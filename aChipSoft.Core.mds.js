function chipsoft_core_mds() { "use strict";function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_get.apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)},_wrapNativeSuper(e)}function _construct(e,t,n){return _construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new S(r||[]);return i(o,"_invoke",{value:F(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",h="suspendedYield",m="executing",p="completed",v={};function g(){}function C(){}function w(){}var y={};u(y,o,(function(){return this}));var b=Object.getPrototypeOf,D=b&&b(b(P([])));D&&D!==n&&r.call(D,o)&&(y=D);var k=w.prototype=g.prototype=Object.create(y);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,s){var l=d(e[i],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==_typeof(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function F(t,n,r){var i=f;return function(a,o){if(i===m)throw new Error("Generator is already running");if(i===p){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=E(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=m;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?p:h,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=p,r.method="throw",r.arg=u.arg)}}}function E(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function V(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(V,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(_typeof(t)+" is not iterable")}return C.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:C,configurable:!0}),C.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(I.prototype),u(I.prototype,s,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(k),u(k,l,"Generator"),u(k,o,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){e.Core||(e.Core={})}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={}));var ChipSoft,__awaiter=window.__awaiter=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};!function(e){!function(t){var n=_createClass((function e(){_classCallCheck(this,e)}));function r(e){return e&&("ChipSoft.SharePoint.Core.VirtualPageRequestActionResult, ChipSoft.SharePoint.Core"===e.$type||"ChipSoft.SharePoint.Core.VirtualPageRequestActionResult, ChipSoft.CarePortal.Core"===e.$type)}t.CancelActionResult=n,t.isVirtualPageRequestActionResult=r;var i,a=function(){function t(n,r,i){var a=this;_classCallCheck(this,t),this.host=n,this.actionResult=r,this.resolve=i,this.src="ChipSoft.SharePoint"===e.PageManager.product?e.Client.combinePath(e.PageManager.webRelativeUrl,"/_layouts/15/ChipSoft/virtualpage.aspx"):e.Client.combinePath(e.PageManager.webRelativeUrl,"/_layouts/virtualpage"),this.valueToPost=ko.observable(null),this.setRootHtmlElement=function(e){a.host.setRootHtmlElement(e)},this.token=this.actionResult.SignedVirtualPageActionLink,this.valueToPost({src:this.src,values:{actionLink:this.token},resolve:this.resolve})}return _createClass(t,[{key:"templateName",value:function(e){return this.host.templateName(e)}}]),t}();t.handleActionResult=function(t,i){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function o(){var s,l=this;return _regeneratorRuntime().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=new Promise((function(o){return __awaiter(l,void 0,void 0,_regeneratorRuntime().mark((function s(){var l,u,c,d,f=this;return _regeneratorRuntime().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!r(i)){s.next=9;break}return l=null,u=new a(t,i,(function(e){return __awaiter(f,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=e,t.next=3,d.closeDialog(!0);case 3:case"end":return t.stop()}}),t)})))})),c=new e.PageManager.KoTemplateDialogOptions("actionresult_virtualpage_messagepanel",u,{title:i.PopupTitle,clickScreenCloses:!1,showClose:!0,alwaysFullScreen:!0,onClose:function(){o(l||new n)}}),d=e.PageManager.createKoTemplateDialog(c),s.next=7,d.openDialog();case 7:s.next=10;break;case 9:o(i);case 10:case"end":return s.stop()}}),s)})))})),o.abrupt("return",s);case 2:case"end":return o.stop()}}),o)})))},t.notifyActionResult=function(e){null==i||i(e)},t.registerActionResultCallback=function(e){i=e}}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n={day:{month:"short",day:"numeric"},hour:"LT",millisecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,hour12:!0},minute:"LT",month:{year:"numeric",month:"short"},quarter:"Q YYYY",second:{hour:"2-digit",minute:"2-digit",second:"2-digit"},week:{dateStyle:"medium"},isoWeek:{dateStyle:"medium"},year:"YYYY"};t.getChartDateFormatOptions=function(){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[t]=t);return e},t.getChartDateAdapterOptions=function(e){return{date:{locale:e}}},t.createChartDateAdapter=function(){return{formats:function(){return t.getChartDateFormatOptions()},parse:function(t,n){return t instanceof e.ConstDate||(t=new e.ConstDate(t)),t.valueOf()},format:function(t,r){var i=n[r];return new e.ConstDate(t).format(i)},add:function(t,n,r){return new e.ConstDate(t).add(n,r).valueOf()},diff:function(t,n,r){return new e.ConstDate(t).difference(new e.ConstDate(n),r)},startOf:function(t,n,r){var i=new e.ConstDate(t);return"week"===n||"isoWeek"===n?i.startOfWeek(r):i.startOf(n)},endOf:function(t,n){return new e.ConstDate(t).endOf(n).valueOf()},_create:function(t){return new e.ConstDate(t)}}}}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){!function(e){e.AddCircle="cs-icon-add-circle",e.Analytics="cs-icon-analytics",e.ArrowDown="cs-icon-arrow-down",e.ArrowLeft="cs-icon-arrow-left",e.ArrowRight="cs-icon-arrow-right",e.ArrowUp="cs-icon-arrow-up",e.Audio="cs-icon-audio",e.Authentication="cs-icon-authentication",e.Bars="cs-icon-bars",e.Bed="cs-icon-bed",e.Blood="cs-icon-blood",e.Calendar="cs-icon-calendar",e.Cancel="cs-icon-cancel",e.CaretDownO="cs-icon-caret-down-o",e.CaretDown="cs-icon-caret-down",e.CaretLeftO="cs-icon-caret-left-o",e.CaretLeft="cs-icon-caret-left",e.CaretRightDown="cs-icon-caret-right-down",e.CaretRightO="cs-icon-caret-right-o",e.CaretRight="cs-icon-caret-right",e.CaretUpO="cs-icon-caret-up-o",e.CaretUp="cs-icon-caret-up",e.ChartBar="cs-icon-chart-bar",e.ChartLine="cs-icon-chart-line",e.ChartPie="cs-icon-chart-pie",e.CheckRound="cs-icon-check-round",e.Check="cs-icon-check",e.ChevronDown="cs-icon-chevron-down",e.ChevronLeftEnd="cs-icon-chevron-left-end",e.ChevronLeft="cs-icon-chevron-left",e.ChevronRightEnd="cs-icon-chevron-right-end",e.ChevronRight="cs-icon-chevron-right",e.ChevronUp="cs-icon-chevron-up",e.Clock="cs-icon-clock",e.Compact="cs-icon-compact",e.Computer="cs-icon-computer",e.Contrast="cs-icon-contrast",e.Cookie="cs-icon-cookie",e.CrossShield="cs-icon-cross-shield",e.Cross="cs-icon-cross",e.Database="cs-icon-database",e.Delegated="cs-icon-delegated",e.Disconnect="cs-icon-disconnect",e.Docter="cs-icon-docter",e.DocumentArrowRight="cs-icon-document-arrow-right",e.Document="cs-icon-document",e.DotsV="cs-icon-dots-v",e.Dots="cs-icon-dots",e.Download="cs-icon-download",e.EditDocument="cs-icon-edit-document",e.Edit="cs-icon-edit",e.EditorBold="cs-icon-editor-bold",e.EditorDotlist="cs-icon-editor-dotlist",e.EditorH1="cs-icon-editor-h1",e.EditorH2="cs-icon-editor-h2",e.EditorHyperlink="cs-icon-editor-hyperlink",e.EditorItalic="cs-icon-editor-italic",e.EditorJoin="cs-icon-editor-join",e.EditorNumericlist="cs-icon-editor-numericlist",e.EditorParagraph="cs-icon-editor-paragraph",e.EditorPublishedpage="cs-icon-editor-publishedpage",e.EditorStepleft="cs-icon-editor-stepleft",e.EditorStepright="cs-icon-editor-stepright",e.EditorUnderline="cs-icon-editor-underline",e.Episode="cs-icon-episode",e.Exclamation="cs-icon-exclamation",e.Files="cs-icon-files",e.Filter="cs-icon-filter",e.Fullscreen="cs-icon-fullscreen",e.Globe="cs-icon-globe",e.Home="cs-icon-home",e.Hospital="cs-icon-hospital",e.IdCard="cs-icon-id-card",e.ImageFile="cs-icon-image-file",e.Implant="cs-icon-implant",e.Important="cs-icon-important",e.Information="cs-icon-information",e.Intoxication="cs-icon-intoxication",e.KeyboardBackspace="cs-icon-keyboard-backspace",e.KeyboardCapslock="cs-icon-keyboard-capslock",e.KeyboardCursor="cs-icon-keyboard-cursor",e.KeyboardHide="cs-icon-keyboard-hide",e.KeyboardReturn="cs-icon-keyboard-return",e.KeyboardShift="cs-icon-keyboard-shift",e.KeyboardSpace="cs-icon-keyboard-space",e.KeyboardTab="cs-icon-keyboard-tab",e.Kiosk="cs-icon-kiosk",e.Lab="cs-icon-lab",e.ListSolid="cs-icon-list-solid",e.Lock="cs-icon-lock",e.Login="cs-icon-login",e.Logout="cs-icon-logout",e.MailOpen="cs-icon-mail-open",e.Mail="cs-icon-mail",e.Maintenance="cs-icon-maintenance",e.MarkerWrong="cs-icon-marker-wrong",e.Measurement="cs-icon-measurement",e.Minus="cs-icon-minus",e.Ok="cs-icon-ok",e.Pacemaker="cs-icon-pacemaker",e.Paperclip="cs-icon-paperclip",e.Pdf="cs-icon-pdf",e.Performance="cs-icon-performance",e.Pharmacy="cs-icon-pharmacy",e.PhoneMobile="cs-icon-phone-mobile",e.Phone="cs-icon-phone",e.Pill="cs-icon-pill",e.Pills="cs-icon-pills",e.Plus="cs-icon-plus",e.PrescriptionBottle="cs-icon-prescription-bottle",e.PrintPaper="cs-icon-print-paper",e.Print="cs-icon-print",e.Question="cs-icon-question",e.Radiology="cs-icon-radiology",e.Refresh="cs-icon-refresh",e.Resuscitation="cs-icon-resuscitation",e.Screen="cs-icon-screen",e.Search="cs-icon-search",e.Send="cs-icon-send",e.Server="cs-icon-server",e.Settings="cs-icon-settings",e.StarO="cs-icon-star-o",e.Star="cs-icon-star",e.TextCloud="cs-icon-text-cloud",e.Tooth="cs-icon-tooth",e.Touch="cs-icon-touch",e.Upload="cs-icon-upload",e.User="cs-icon-user",e.Video="cs-icon-video",e.Visibility="cs-icon-visibility",e.Walking="cs-icon-walking",e.Warning="cs-icon-warning",e.Zorgdomein="cs-icon-zorgdomein"}(e.IconType||(e.IconType={}))}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=this,r={};function i(e){if(r.hasOwnProperty(e))return r[e];var t=document.createElement("input");t.setAttribute("type",e);var n="text"!==t.type&&"style"in t;if(n){if(t.value="1)",t.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(e)&&void 0!==t.style.WebkitAppearance){document.appendChild(t);var i=document.defaultView;n=i.getComputedStyle&&"textfield"!==i.getComputedStyle(t,null).WebkitAppearance&&0!==t.offsetHeight,document.removeChild(t)}else/^(search|tel)$/.test(e)||(n=/^(url|email)$/.test(e)?t.checkValidity&&!1===t.checkValidity():"1)"!==t.value)}return r[e]=!!n}t.mapToArray=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},t.inputType=i,t.isComponentRequestError=function(t){return!(!t||!(t instanceof e.Client.ComponentRequestError||!0===t.isComponentRequestError))};var a=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(e,r,i,a){var o;return _classCallCheck(this,n),(o=t.call(this,i)).request=e,o.fault=r,o.isComponentRequestError=!0,o}return _createClass(n)}();t.ComponentRequestError=a,t.formSubmit=function(){var e=Sys.WebForms.PageRequestManager.getInstance();if(null===e._postBackSettings||!e._postBackSettings.async){var n=window;if(n.csFormSubmitted)return!1;n.csFormSubmitted=!0,t.disableZPLinks("cszplink")}return!0},t.initThreeState=function(e){var n=e.find("input"),r=n.val();t.applyThreeState(r,e);var i=function(r){r.stopPropagation();var i=n.val(),a=t.nextThreeStateValue(i);return n.val(a),n.trigger("change"),t.applyThreeState(a,e),!1};e.on("click",i),e.on("tap",i),e.on("keypress",(function(r){if(32===r.which){r.stopPropagation();var i=n.val(),a=t.nextThreeStateValue(i);return n.val(a),n.trigger("change"),t.applyThreeState(a,e),!1}if(8===r.which){r.stopPropagation();var o=n.val(),s=t.previousThreeStateValue(o);return n.val(s),n.trigger("change"),t.applyThreeState(s,e),!1}}))},t.nextThreeStateValue=function(e){return"true"===e?"false":"false"===e?"":"true"},t.previousThreeStateValue=function(e){return"true"===e?"":"false"===e?"true":"false"},t.applyThreeState=function(e,t){"true"===e?(t.find(".cs-threestate-none").hide(),t.find(".cs-threestate-false").hide(),t.find(".cs-threestate-true").show()):"false"===e?(t.find(".cs-threestate-none").hide(),t.find(".cs-threestate-true").hide(),t.find(".cs-threestate-false").show()):(t.find(".cs-threestate-false").hide(),t.find(".cs-threestate-true").hide(),t.find(".cs-threestate-none").show())},t.combinePath=function(){for(var e="",t=!0,n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];r&&(t?(t=!1,e+=r):("/"===r[0]&&(r=r.substring(1,r.length)),r&&("/"===e[e.length-1]?e+=r:e+="/"+r)))}return e},t.mergeStyles=function(){for(var e="",t=/;\s*$/,n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];ko.isObservable(r)&&(r=r()),r&&(e+=r,t.test(r)||(e+=";"))}return e},t.mergeClasses=function(){for(var e,t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];if(ko.isObservable(r)&&(r=r()),(e=r)===Object(e)){var i=r;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];ko.isObservable(o)&&(o=o()),!0===o&&(t&&" "!==t[t.length-1]&&(t+=" "),t+=a)}}else r&&(t&&" "!==t[t.length-1]&&(t+=" "),t+=r)}return t},t.sizeToText=function(e,t){void 0===t&&(t=2);var n=1024;return e<n?e+" B":e/n<n?(e/n).toFixed(t)+" KB":e/n/n<n?(e/n/n).toFixed(t)+" MB":e/n/n/n<n?(e/n/n/n).toFixed(t)+" GB":e/n/n/n/n<n?(e/n/n/n/n).toFixed(t)+" TB":e/n/n/n/n/n<n?(e/n/n/n/n/n).toFixed(t)+" PB":e/n/n/n/n/n/n<n?(e/n/n/n/n/n/n).toFixed(t)+" EB":e/n/n/n/n/n/n/n<n?(e/n/n/n/n/n/n/n).toFixed(t)+" ZB":(e/n/n/n/n/n/n/n/n).toFixed(t)+" YB"},t.applySingleSelection=function(t,n,r,i){jQuery("#"+n+" .cs-selected").removeClass("cs-selected"),jQuery(t).addClass("cs-selected"),e.Client.NonStrict.call(i,null,t,n,r)},t.initializeZPCommandButton=function(t){jQuery(document).ready((function(){jQuery(t).click((function(t){var n=jQuery(this).find("a");if(n.length>0&&void 0!==n[0].click)return n[0]===t.target?void e.PageManager.logError("ZPCommandButton click() loop detected"):(e.Client.NonStrict.clickElement(n[0]),!1);var r=jQuery(this).find("input:button");return r.length>0&&void 0!==r[0].click&&(r[0]===t.target?void e.PageManager.logError("ZPCommandButton click() loop detected"):(e.Client.NonStrict.clickElement(r[0]),!1))}))}))},t.stopPropagation=function(e){e||(e=window.event),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.goToPage=function(n,r){if(!r&&0===GetUrlKeyValue("Source",!0,n).length){var i=n.indexOf("?")>=0?"&":"?",a=escapeProperly(t.getCurrentUrl());n.length+a.length<=1950&&(n=n+i+"Source="+a)}"undefined"!=typeof Nav?(e.PageManager.stopIsAuthenticated(),Nav.navigate(n)):(e.PageManager.stopIsAuthenticated(),STSNavigate(n))},t.getCurrentUrl=function(){return window.location.href},t.toggleElement=function(e,t,n,r,i){var a=jQuery(e),o=jQuery(n),s=jQuery(t);s.hasClass("cs-togglebutton-expand")?(s.text(i),s.removeClass("cs-togglebutton-expand"),s.addClass("cs-togglebutton-collapse"),o.val("0"),a.addClass("cs-expanded-togglepanel"),a.removeClass("cs-collapsed-togglepanel")):(s.text(r),s.removeClass("cs-togglebutton-collapse"),s.addClass("cs-togglebutton-expand"),o.val("1"),a.addClass("cs-collapsed-togglepanel"),a.removeClass("cs-expanded-togglepanel"))},t.disableZPLinks=function(e){e="a."+e+":not("+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:".cszplink-nondisableable")+")",jQuery(e).removeAttr("href"),jQuery(e).removeAttr("onclick")},t.dateValidator_Validate=function(e){if(i("date")){var t=e.controltovalidate;return jQuery("#"+t)[0].checkValidity()}return!0},t.numericValidator_Validate=function(e){var n=e.controltovalidate;return t.numericValidator_ValidateBox(n,e)},t.numericValidator_ValidateBox=function(e,t){var n=jQuery("#"+e+" input.cs-numeric-integer-box")[0],r=jQuery("#"+e+" input.cs-numeric-decimal-box")[0],i=n.value,a=!!r;if(""===i&&(!a||""===r.value))return!0;var o=new RegExp("^(-|\\+)?\\d+$"),s=new RegExp("^\\d*$");if(""!==i&&!o.test(i))return!1;if(a&&!s.test(r.value))return!1;if(!t.decimalNumbers)return!0;var l=Number(t.decimalNumbers);return!(a&&r.value.length>l)},t.numericRangeValidator_Validate=function(e){var n=e.controltovalidate;return t.numericRangeValidator_ValidateBox(n,e)},t.numericRangeValidator_ValidateBox=function(e,t){var n=jQuery("#"+e+" input.cs-numeric-integer-box")[0],r=jQuery("#"+e+" input.cs-numeric-decimal-box")[0],i=n.value,a=!!r;if(""===i&&(!a||""===r.value))return!0;var o=new RegExp("^(-|\\+)?\\d+$"),s=new RegExp("^\\d*$");if(""!==i&&!o.test(i))return!1;if(a&&!s.test(r.value))return!1;var l=t;if(l.maximumvalue)if(a){var u=parseFloat(l.maximumvalue);if(parseFloat(i+"."+r.value)>u)return!1}else{var c=parseInt(l.maximumvalue,10);if(parseInt(i,10)>c)return!1}if(l.minimumvalue)if(a){var d=parseFloat(l.minimumvalue);if(parseFloat(i+"."+r.value)<d)return!1}else{var f=parseInt(l.minimumvalue,10);if(parseInt(i,10)<f)return!1}return!0},t.numericCompareValidator_Validate=function(e){var n=e.controltovalidate;return t.numericCompareValidator_ValidateBox(n,e)},t.numericCompareValidator_ValidateBox=function(e,t){var n=jQuery("#"+e+" input.cs-numeric-integer-box")[0],r=jQuery("#"+e+" input.cs-numeric-decimal-box")[0],i=n.value,a=!!r;if(""===i&&(!a||""===r.value))return!0;var o=new RegExp("^(-|\\+)?\\d+$"),s=new RegExp("^\\d*$");if(""!==i&&!o.test(i))return!1;if(a&&!s.test(r.value))return!1;var l=0;l=a?parseFloat(i+"."+r.value):parseInt(i,10);var u=0,c=t;if("string"==typeof c.controltocompare&&document.getElementById(c.controltocompare)&&document.getElementById(c.controltocompare))if("string"==typeof c.controltocomparetype&&"numeric"===c.controltocomparetype){var d=jQuery("#"+c.controltocompare+" input.cs-numeric-integer-box")[0],f=jQuery("#"+c.controltocompare+" input.cs-numeric-decimal-box")[0],h=d.value,m=!!f;if(""!==h||m&&""!==f.value){if(""!==h&&!o.test(h))return!1;if(m&&!s.test(f.value))return!1;u=m?parseFloat(h+"."+f.value):parseInt(h,10)}else u=0}else{var p=ValidatorGetValue(c.controltocompare);if(p){if(!o.test(p))return!1;u=parseInt(p,10)}else u=0}else"string"==typeof c.valuetocompare&&(u=a?parseFloat(c.valuetocompare):parseInt(c.valuetocompare,10));var v="Equal";return"string"==typeof c.operator&&(v=c.operator),"Equal"===v?l===u:"NotEqual"===v?l!==u:"GreaterThan"===v?l>u:"GreaterThanEqual"===v?l>=u:"LessThan"===v?l<u:"LessThanEqual"===v?l<=u:"DataTypeCheck"===v},t.threeStateCheckbox_ChangeValue=function(e,t,n,r,i,a){var o=document.getElementById(t),s=null;switch(""!==n&&(s=document.getElementById(n)),Number(o.value)){case 0:e.src=r,s&&(s.style.display="inline"),o.value="2";break;case 1:e.src=i,s&&(s.style.display="none",s.value=""),o.value="0";break;case 2:e.src=a,s&&(s.style.display="inline"),o.value="1";break;default:throw new Error("Invalid value")}},t.requiredThreeStateValidator_Validate=function(e){var t=e.controltovalidate;return"0"!==document.getElementById(t).value},t.hoverLabelsInit=function(e,t,n,r){jQuery("body").on("mouseenter mouseout","."+e,(function(){jQuery(this).next("."+n).is(":visible")?(jQuery(this).removeClass(t),jQuery(this).next("."+n).removeClass(r)):(jQuery(this).addClass(t),jQuery(this).next("."+n).addClass(r))})),jQuery("body").on("mouseenter mouseout","."+n,(function(n){"mouseout"===n.type&&"none"!==jQuery(this).css("display")?(jQuery(this).prev("."+e).removeClass(t),jQuery(this).removeClass(r)):(jQuery(this).prev("."+e).addClass(t),jQuery(this).addClass(r))}))},t.pageIsInDesignmode=function(){return"1"===document.forms.namedItem(MSOWebPartPageFormName).MSOLayout_InDesignMode.value},t.hideEmptyWebparts=function(){t.pageIsInDesignmode()||jQuery(".ms-bodyareacell .s4-wpcell-plain").each((function(){var e=jQuery(this).find(".ms-WPBody > div");0!==e.length&&0===e.children().length&&jQuery(this).hide()}))},t.showSlider=function(e){jQuery((function(){var t=e.lowBound,n=e.highBound,r=e.value,a=e.isEnabled,o=e.hiddenFieldID,s=e.startLabelText,l=e.endLabelText,u=jQuery("#"+o)[0],c=document.createElement("span");c.className="cs-rangeStartLabel";var d=document.createElement("span");d.className="cs-rangeEndLabel";var f=u.parentElement;if(u.className="cs-rangeInput",c.appendChild(document.createTextNode(s)),d.appendChild(document.createTextNode(l)),s&&f.insertBefore(c,f.firstChild),l&&f.insertBefore(d,f.firstChild),!i("range"))throw new Error("no range support");u.type="range",u.min=t,u.max=n,u.value=r,u.disabled=a}))},t.showDatePicker=function(t,r,i,a,o,s){e.PageManager.notifyLoadStart(),jQuery((function(){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i&&(e.PageManager.isMobile||e.PageManager.isTablet)){t.next=5;break}return t.next=3,e.PageManager.now();case 3:n=t.sent,e.Client.datepicker(r,n,i,a,o,s);case 5:e.PageManager.notifyLoadEnd();case 6:case"end":return t.stop()}}),t)})))}))},t.showTimePicker=function(t){e.PageManager.isMobile||e.PageManager.isTablet||e.Client.timepicker(t)},t.isValidDate=function(e){if(t.isEmptyString(e))return!1;var n=e.split("-"),r=parseInt(n[0],10),i=parseInt(n[1],10),a=parseInt(n[2],10);if(4!==a.toString().length)return!1;var o=new Date(a,i-1,r);return o.getFullYear()===a&&o.getMonth()+1===i&&o.getDate()===r},t.isEmptyString=function(e){return null===e||""===e||void 0===e},t.showTimeMask=function(e){i("date")||jQuery(document).ready((function(){var t=jQuery(e);t.attr("type","text"),t.mask("99:99")}))},t.signOutAtWebSpecificUrl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,n=arguments.length>1?arguments[1]:void 0;if(e.PageManager.disableNotifyPageUnload(),e.PageManager.stopIsAuthenticated(),"undefined"==typeof _spPageContextInfo){var r=e.Client.combinePath(e.PageManager.webRelativeUrl,"/Authentication/SignOut");n&&(r=e.Client.addQueryParameter(r,"Source",n,1)),t.location.replace(r)}else{var i=_spPageContextInfo.webServerRelativeUrl;if("/"===i){var a="/_layouts/15/ChipSoft/Signout.aspx";n&&(a=e.Client.addQueryParameter(a,"Source",n,1)),t.location.replace(a)}else{var o=i+"/_layouts/15/ChipSoft/Signout.aspx";n&&(o=e.Client.addQueryParameter(o,"Source",n,1)),t.location.replace(o)}}},t.signInWithResponse=function(t,n,r){e.PageManager.stopIsAuthenticated();var i=jQuery("form:first"),a=document.createElement("form");a.setAttribute("method","POST"),a.setAttribute("name","SignInWithResponseForm"),a.setAttribute("action",t);var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","wa"),o.setAttribute("value","wsignin1.0"),a.appendChild(o),(o=document.createElement("input")).setAttribute("type","hidden"),o.setAttribute("name","wresult"),o.setAttribute("value",n),a.appendChild(o),(o=document.createElement("input")).setAttribute("type","hidden"),o.setAttribute("name","wctx"),o.setAttribute("value",r),a.appendChild(o),i.length>0?i.after(a):document.body.appendChild(a),a.submit()},t.postData=function(t,n,r){e.PageManager.stopIsAuthenticated();var i=jQuery("form:first"),a=document.createElement("form");a.setAttribute("method","POST"),a.setAttribute("name","hiddenform"),a.setAttribute("action",t),r&&a.setAttribute("target",r);for(var o=0;o<n.length;o++){var s=n[o],l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name",s[0]),l.setAttribute("value",s[1]),a.appendChild(l)}i.length>0?i.after(a):document.body.appendChild(a),a.submit()},t.signIn=function(t){if(e.PageManager.stopIsAuthenticated(),!t)throw new Error("Invalid signInResult object");if("None"!==t.actionType){if(!t.action)throw new Error("Invalid signInResult object");if("Redirect"===t.actionType){var n=t.action;if(!n)throw new Error("signInResult.action == null");n.redirectUri&&(e.PageManager.stopIsAuthenticated(),n.replace?window.location.replace(n.redirectUri):window.location.href=n.redirectUri)}else if("PostData"===t.actionType){var r=t.action;if(!r)throw new Error("signInResult.action == null");if(!r.postUrl)throw new Error("Invalid post data action parameters");var i=[];for(var a in r.postData)r.postData.hasOwnProperty(a)&&i.push([a,r.postData[a]]);e.Client.postData(r.postUrl,i)}else{if("WSFederation"!==t.actionType)throw new Error("Unknown signInResult action: "+t.actionType);var o=t.action;if(!o)throw new Error("signInResult.action == null");if("wsignin1.0"!==o.action)throw new Error("Unsupported WS-Federation action: "+o.action);if(!o.trustUri||!o.wctx||!o.wresult)throw new Error("Invalid WS-Federation action parameters");var s=jQuery("form:first"),l=document.createElement("form");l.setAttribute("method","POST"),l.setAttribute("name","SignInWithResponseForm"),l.setAttribute("action",o.trustUri);var u=document.createElement("input");if(u.setAttribute("type","hidden"),u.setAttribute("name","wa"),u.setAttribute("value","wsignin1.0"),l.appendChild(u),(u=document.createElement("input")).setAttribute("type","hidden"),u.setAttribute("name","wresult"),u.setAttribute("value",o.wresult),l.appendChild(u),(u=document.createElement("input")).setAttribute("type","hidden"),u.setAttribute("name","wctx"),o.wctx&&"ChipSoft.SharePoint"===e.PageManager.product){var c=o.wctx.indexOf("?");c>=0?o.wctx=decodeURI(o.wctx.substring(0,c))+o.wctx.substr(c):(c=o.wctx.indexOf("#"),o.wctx=c>=0?decodeURI(o.wctx.substring(0,c))+o.wctx.substr(c):decodeURI(o.wctx))}u.setAttribute("value",o.wctx),l.appendChild(u),s.length>0?s.after(l):document.body.appendChild(l),l.submit()}}},t.unescapeHtml=function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")},t.validateBirthDate=function(e,t){var n=jQuery("#"+e.birthDateControl).val().split("-"),r=n[2],i=n[1],a=n[0];if(jQuery.isNumeric(r)&&jQuery.isNumeric(i)&&jQuery.isNumeric(a)){if(e.innerHTML=e.invalidBirthDate,a.length<4)return void(t.IsValid=!1);if(r>31||i>12)return void(t.IsValid=!1);if((4===i||6===i||9===i||11===i)&&31===r)return void(t.IsValid=!1);if(2===i)(r>29||29===r&&!(a%4==0&&(a%100!=0||a%400==0)))&&(t.IsValid=!1)}else e.innerHTML=e.requiredBirthDate,t.IsValid=!1};var o=_createClass((function t(n,r){var i=this;_classCallCheck(this,t),this.timer=null,this.start=function(){var t=function(){i.timer=setTimeout((function(){return __awaiter(i,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Client.handleNavigation(this.navigation);case 2:case"end":return t.stop()}}),t,this)})))}),1e3*i.timeOut)};t(),jQuery(document).bind("mousemove keypress keyup",(function(){clearTimeout(i.timer),t()}))},this.clear=function(){jQuery(document).unbind("mousemove keypress keyup"),clearTimeout(i.timer)},this.navigation=r,this.timeOut=n}));t.InactivityTimer=o,t.componentActionRequest=function(r,i,o,s,l,u){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var c,d,f,h,m,p;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c={header:{page:r.page,componentId:r.componentId,action:o,lang:e.PageManager.lang},body:s},d=(new Error).stack){n.next=10;break}throw n.prev=3,new Error;case 7:n.prev=7,n.t0=n.catch(3),d=null===n.t0||void 0===n.t0?void 0:n.t0.stack;case 10:return n.prev=10,n.next=13,t.ajaxRequest(i,c);case 13:f=n.sent,n.next=21;break;case 16:return n.prev=16,n.t1=n.catch(10),null==u||u(),n.t1&&(n.t1 instanceof Error?(h=n.t1.stack?n.t1.stack:n.t1.message?n.t1.message:"<Error>",e.PageManager.logError("Error sending request to '".concat(i,"' for action '").concat(c.header.action,"' for page '").concat(c.header.page,"'; error: ").concat(h))):(m=n.t1,0===m.status&&0===m.readyState?e.PageManager.logInformation("Error sending request to '".concat(i,"' for action '").concat(c.header.action,"' for page '").concat(c.header.page,"'; received status ").concat(m.status," ").concat(m.statusText,". This is most likely caused by a network problem on the client, like a mobile devices losing its internet connection.")):(m.status<200||m.status>=300)&&e.PageManager.logError(500!==m.status?"Error sending request to '".concat(i,"' for action '").concat(c.header.action,"' for page '").concat(c.header.page,"'; received status ").concat(m.status," ").concat(m.statusText,". This is most likely caused by an infrastructure problem, like a firewall blocking the request."):"Error sending request to '".concat(i,"' for action '").concat(c.header.action,"' for page '").concat(c.header.page,"'; received status ").concat(m.status," ").concat(m.statusText,". This might be caused by the CarePortal server or it could be an infrastructure problem, like a firewall blocking the request. First check the CarePortal log, then check the infrastructure component logs.")))),n.abrupt("return",void 0);case 21:if(f){n.next=26;break}return e.PageManager.logError("Error sending request to '".concat(i,"' for action '").concat(c.header.action,"' for page '").concat(c.header.page,"'; no data received")),n.abrupt("return",void 0);case 26:if(f.header){n.next=31;break}return e.PageManager.logError("Error sending request to '".concat(i,"' for action '").concat(c.header.action,"' for page '").concat(c.header.page,"'; response does not contain a header")),n.abrupt("return",void 0);case 31:if(!f.header.isFault){n.next=42;break}if(!(p=f.body)||!p.detail||"ChipSoft.PlatformServices.Shared.Protocol.CSTokenExceptionFault, ChipSoft.PlatformServices.Shared"!==p.detail.$type){n.next=38;break}return e.PageManager.stopIsAuthenticated(),e.PageManager.getMainWindow().location.href=e.PageManager.siteRelativeUrl,n.abrupt("return");case 38:throw null==u||u(),new a(c,p,null,d);case 42:if(null!==f.body&&void 0!==f.body||l||void 0===l){n.next=45;break}throw null==u||u(),new a(c,{reason:"Service returned null",detail:{$type:"ChipSoft.Client.NoNullAllowedException"}},null,d);case 45:return e.PageManager.lastRequest=new Date,n.abrupt("return",f.body);case 47:case"end":return n.stop()}}),n,null,[[3,7],[10,16]])})))},t.requestDigest=function(){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("ChipSoft.SharePoint"!==e.PageManager.product){t.next=8;break}if(!((n=window)._spPageContextInfo&&n._spFormDigestRefreshInterval&&n.UpdateFormDigest)){t.next=6;break}return n.UpdateFormDigest(n._spPageContextInfo.webServerRelativeUrl,n._spFormDigestRefreshInterval),r=jQuery("#__REQUESTDIGEST").val(),t.abrupt("return",r);case 6:t.next=12;break;case 8:return t.next=10,s();case 10:return i=t.sent,t.abrupt("return",i);case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)})))};var s=function(){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i,a;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=jQuery("#__REQUESTDIGEST").val()){t.next=3;break}throw new Error("Page has no request digest");case 3:if(!(e.PageManager.requestDigestValidity>0&&Math.floor(((new Date).getTime()-e.PageManager.requestDigestDate.getTime())/1e3/60)>=e.PageManager.requestDigestValidity)){t.next=21;break}return r=null,i=null,a={url:e.Client.combinePath(e.PageManager.webRelativeUrl,"/Home/NewFormDigest"),dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(e){e.setRequestHeader("Accept","application/json")},type:"GET",success:function(t,n,i){e.PageManager.requestDigestDate=new Date,jQuery("#__REQUESTDIGEST").val(t),r=t},error:function(e,t,n){i="Failed to get new request digest. readyState: ".concat(e.readyState," status: ").concat(e.status," data: ").concat(e.responseText," textStatus: ").concat(t," errorThrown: ").concat(n)}},t.prev=7,t.next=10,jQuery.ajax(a);case 10:t.next=17;break;case 12:if(t.prev=12,t.t0=t.catch(7),!i){t.next=16;break}throw new Error(i);case 16:throw new Error("Failed to get new request digest");case 17:if(!r){t.next=19;break}return t.abrupt("return",r);case 19:t.next=22;break;case 21:return t.abrupt("return",n);case 22:case"end":return t.stop()}}),t,null,[[7,12]])})))};t.ajaxRequest=function(t,r,i){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function a(){var o,s,l;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.PageManager.isBrowserEnrolled||e.PageManager.isAuthenticated){a.next=10;break}return a.prev=1,a.next=4,__awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r,i,a,o,s,l,u,c,d,f,h;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(Math.floor(((new Date).getTime()-e.PageManager.lastRequest.getTime())/1e3/60)<e.PageManager.serverIdleTimeout-2)){t.next=2;break}return t.abrupt("return");case 2:return n="keys",r="default",i=indexedDB.open("CS_CarePortal_BrowserEnrollment",1),t.next=8,new Promise((function(e,t){i.onsuccess=function(t){e(t.target.result)},i.onerror=function(e){t()}}));case 8:return a=t.sent,o=a.transaction([n],"readonly"),s=o.objectStore(n),l=s.index("name").get(r),t.next=14,new Promise((function(e,t){l.onsuccess=function(t){e(t.target.result)},l.onerror=function(e){t()}}));case 14:return u=t.sent,c=Math.floor((new Date).getTime()/1e3).toFixed(0),d=c+"|"+u.enrollmentId,t.next=19,crypto.subtle.sign("HMAC",u.hmac,(new TextEncoder).encode(d));case 19:return f=t.sent,h={enrollmentId:u.enrollmentId,iat:c,sign:btoa(String.fromCharCode.apply(null,new Uint8Array(f)))},t.next=23,jQuery.ajax({url:e.Client.combinePath(e.PageManager.webRelativeUrl,"/BrowserEnrollment/CreateSession"),dataType:"json",contentType:"application/json; charset=utf-8",type:"POST",data:JSON.stringify(h),success:function(t,n,r){return"success"===t.status?void 0:void e.PageManager.logError("Failed to update browser enrollment session. Got response: "+r.responseText)},error:function(t){e.PageManager.logError("Failed to update browser enrollment session. Got response: "+t.responseText)}});case 23:case"end":return t.stop()}}),t)})));case 4:a.next=10;break;case 6:return a.prev=6,a.t0=a.catch(1),window.location.reload(),a.abrupt("return");case 10:if(i&&!0===i.noRequestDigest){a.next=14;break}return a.next=13,e.Client.requestDigest();case 13:o=a.sent;case 14:return s=!0,void 0===r&&(s=!1),l={url:t,dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(e){e.setRequestHeader("Accept","application/json")},type:s?"POST":"GET",data:JSON.stringify(r),success:function(t,n,r){e.PageManager.notifyLoadEnd()},error:function(t,n,r){e.PageManager.notifyLoadEnd()}},e.PageManager.tokenId&&(l.headers||(l.headers={}),l.headers["X-ZPTokenId"]=e.PageManager.tokenId),o&&(l.headers||(l.headers={}),l.headers["X-RequestDigest"]=o),e.PageManager.notifyLoadStart(),a.next=22,jQuery.ajax(l);case 22:return a.abrupt("return",a.sent);case 23:case"end":return a.stop()}}),a,null,[[1,6]])})))},t.getComponentDownloadUrl=function(e,t,n,r){var i={header:{componentTypeId:e,action:n},body:r};return t+"?b="+encodeURIComponent(window.btoa(JSON.stringify(i)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))},t.parseQueryParameters=function(e){for(var t,n={},r=/\+/g,i=/([^&=]+)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(r," "))},o=void 0===e?window.location.search.substring(1):e;t=i.exec(o);)n[a(t[1])]=a(t[2]);return n},t.getQueryParameter=function(e,t){if(e){for(var n,r={},i=/\+/g,a=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(i," "))},s=window.location.search.substring(1);n=a.exec(s);)r[o(n[1])]=o(n[2]);if(!t)return r[e];var l=e.toLowerCase();for(var u in r){if(r.hasOwnProperty(u))if(u.toLowerCase()===l)return r[u]}}},t.removeQueryParameter=function(e,t){if(!e)return e;var n=e,r=n.indexOf(t+"=");if(r>=0){var i=n.indexOf("&",r);n=i<0?n.substring(0,r-1):n.substring(0,r)+n.substring(i+1)}return n},function(e){e[e.AddIfNotPresent=0]="AddIfNotPresent",e[e.AddOrReplaceExistingValue=1]="AddOrReplaceExistingValue",e[e.Append=2]="Append"}(t.AddQueryParameterMode||(t.AddQueryParameterMode={})),t.addQueryParameter=function(e,t,n,r){if(!e)throw new Error("no href");var i=encodeURIComponent(t),a=encodeURIComponent(n),o=e.indexOf("?"+i+"=");if(o<0&&(o=e.indexOf("&"+i+"=")),o<0||2===r)return e.indexOf("?")>=0?e+"&"+i+"="+a:e+"?"+i+"="+a;if(1===r){var s=e.indexOf("&",o+1);if(s<0)return e.substring(0,o+i.length+2)+a;o=e.indexOf("?");var l=e.substring(0,o),u=e.substring(o+1),c="";for(o=0;s>0;){var d=void 0;(d=(s=u.indexOf("&",o))<0?u.substring(o):u.substring(o,s)).startsWith(i+"=")||(c+="&"+d),o=s+1}return c?l+"?"+c.substring(1)+"&"+i+"="+a:l+"?"+i+"="+a}},t.addHiXObjectReferenceQueryParameter=function(e,n,r){if(void 0===r&&(r=1),h(n))throw new Error("An object transformation can not be added to an url. objectId: "+t.hixObjectReferenceToString(n));if(!n.Hash)throw new Error("Object id does not contain a hash. objectId: "+JSON.stringify(n));for(var i=n.ObjectIds.length.toString(10),a=0;a<n.ObjectIds.length;a++){var o=n.ObjectIds[a];if(o&&o.indexOf("|")>=0)throw new Error("Invalid object id: "+t.hixObjectReferenceToString(n));i+="|",i+=n.ObjectIds[a]}return i+="|",i+=n.Hash,t.addQueryParameter(e,"__"+n.ClassId,i,r)},t.inputActionSearchbox=function(t,r,i,a,o,s,l,u,c,d){var f=d;if(!s)throw new Error("inputActionParameters is not defined for action '"+o+"'.");i||(i=e.Client.combinePath(r.siteRelativeUrl,"/_vti_bin/ChipSoft/ZP.svc/ComponentRequest"));var h,m=jQuery("#"+t);if(0!==m.length){if(m.select2({multiple:!0===l,minimumInputLength:0,language:{searching:function(){return"Zoeken..."},inputTooShort:function(){return"Typ meer om te zoeken"},noResults:function(){return"Geen resultaat gevonden"},errorLoading:function(){return"Er is iets misgegaan"}},ajax:{url:i,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(e){e.setRequestHeader("Accept","application/json")},delay:250,data:function(e){var t;if("function"!=typeof s)throw new Error("invalid value for inputActionParameters");t=s({params:e,objectId:a});var n={header:{page:r.page,componentId:r.componentId,action:t.action},body:t.body};return e.primaryDisplayFields=t.primaryDisplayFields,e.displayFields=t.displayFields,JSON.stringify(n)},processResults:function(t,n){n.page=n.page||1,n.lastObjectId=null;var r={results:[],pagination:{more:!1}};if(u&&1===n.page){var i={id:"hixobjref:null",fields:c?[c]:[],displayValue:c||""};r.results.push(i)}if(!t.body||!t.body.data||!e.Core.isSingleViewVersion(t.body.data.ViewVersion))return r;var a=function(e,t){if(!e||!e.views)return null;for(var n=0;n<e.views.length;n++){var r=e.views[n];if(r.definition.ViewVersion.ClassId===t.ClassId&&r.definition.ViewVersion.Mode===t.Mode&&r.definition.ViewVersion.Uri===t.Uri&&r.definition.ViewVersion.Version===t.Version)return r}return null}(t.body.viewData,t.body.data.ViewVersion);if(!a)return r;var o=[];for(var s in a.definition.Attributes.Items)if(a.definition.Attributes.Items.hasOwnProperty(s)){var l=a.definition.Attributes.Items[s];if("selectionDisplayValueField"===l.Name&&!l.Prefix&&l.Value){o.push(l.Value);break}}var d=[];if(n.displayFields&&n.displayFields.length>0)for(var f=0;f<n.displayFields.length;f++)d.push(n.displayFields[f]);else for(var h=0;h<a.definition.Fields.Items.length;h++){var m=a.definition.Fields.Items[h];"field"!==m.FieldPath.Prefix&&m.FieldPath.Prefix||d.push(m.FieldPath.Value)}if(n.primaryDisplayFields&&n.primaryDisplayFields.length>0)for(var p=0;p<n.primaryDisplayFields.length;p++)o.push(n.primaryDisplayFields[p]);else o.push("Naam"),o.push("Omschrijving");if(t&&t.body&&t.body.data){var v=new e.Utilities.ExchangeUtil(t.body.data),g=v.collectionAsArray(t.body.data);n.lastObjectId=g.length>0?g[g.length-1].ObjectId:null;for(var C=0;C<g.length;C++){for(var w=[],y=0;y<d.length;y++){var b=v.getField(g[C],d[y]);b&&b.Value&&w.push(b.Value.Value)}for(var D="",k=!1,x=0;x<o.length;x++){var I=v.getField(g[C],o[x]);if(I&&I.Value){D=I.Value.Value,k=!0;break}}k||(D=JSON.stringify(g[C].ObjectId.ObjectIds));var F={id:"hixobjref:"+JSON.stringify(g[C].ObjectId),fields:w,displayValue:D};r.results.push(F)}t&&t.body&&t.body.data&&t.body.data.PageInformation&&!0===t.body.data.PageInformation.IsNextEnabled&&(r.pagination.more=!0)}return r},cache:!0,transport:function(t,r,i){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var a,o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.Client.requestDigest();case 2:return(a=n.sent)&&(t.headers||(t.headers={}),t.headers["X-RequestDigest"]=a),(o=jQuery.ajax(t)).done((function(e){e&&e.header&&!e.header.isFault?r.apply(this,arguments):i.call(this,"Server request failed")})),o.fail((function(t){e.PageManager.logError(t),i.apply(this,arguments)})),n.abrupt("return",o);case 8:case"end":return n.stop()}}),n)})))}},templateResult:function(e){var t;if(e.loading)return e.text;var n=document.createElement("DIV");0===e.fields.length&&(n.innerText=" ");for(var r=0;r<e.fields.length;r++){var i=document.createElement("DIV");i.innerText=null!==(t=e.fields[r])&&void 0!==t?t:"",n.appendChild(i)}return n},templateSelection:function(e){return e.displayValue||e.text}}),(h=l?function(e){var t;if(m[0].options.length=0,e&&0!==e.length){for(var n=[],r=[],i=0;i<e.length;i++){var a=document.createElement("option");a.value=e[i].key,a.innerText=null!==(t=e[i].value)&&void 0!==t?t:"",r.push(a),n.push(a.value)}m.append(r).val(n).trigger("change")}else m.val("").trigger("change")}:function(e){var t;if(m[0].options.length=0,e){var n=[],r=[],i=document.createElement("option");i.value=e.key,i.innerText=null!==(t=e.value)&&void 0!==t?t:"",r.push(i),n.push(i.value),m.append(r).val(n).trigger("change")}else m.val("").trigger("change")})(ko.unwrap(f)),ko.isObservable(f)){var p;ko.utils.domNodeDisposal.addDisposeCallback(m[0],(function(){p&&p.dispose()})),m.on("change.select2",(function(t){var n=m.select2("data");if(n){p&&(p.dispose(),p=null);try{if(0===n.length)f(l?[]:null);else if(l){for(var r=[],i=0;i<n.length;i++)r.push(new e.Core.KeyValuePair(n[i].id,n[i].displayValue));f(r)}else f(new e.Core.KeyValuePair(n[0].id,n[0].displayValue))}finally{p||(p=f.subscribe((function(e){h(e)})))}}}))}}else e.PageManager.logLocal("Element ".concat(t," not found"))},t.lookupSearchbox=function(t,r,i,a,o,s,l,u,c,d,f){var h=f;i||(i=e.Client.combinePath(r.siteRelativeUrl,"/_vti_bin/ChipSoft/ZP.svc/ComponentRequest"));var m,p=jQuery("#"+t);if(0!==p.length){if(p.select2({multiple:!0===u,minimumInputLength:0,language:{searching:function(){return"Zoeken..."},inputTooShort:function(){return"Typ meer om te zoeken"},noResults:function(){return"Geen resultaat gevonden"},errorLoading:function(){return"Er is iets misgegaan"}},dropdownParent:jQuery(document.body).find(".cs-content-wrapper").length>0?jQuery(document.body).find(".cs-content-wrapper"):jQuery(document.body),ajax:{url:i,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(e){e.setRequestHeader("Accept","application/json")},delay:250,data:function(e){var t={header:{page:r.page,componentId:r.componentId,action:"GetViewFieldLimitedLookup"},body:{objectId:a,searchText:e.term,field:o,pageOptions:{$type:"ChipSoft.PlatformServices.Shared.Protocol.FixedSizePageOptions, ChipSoft.PlatformServices.Shared",PageDirection:"Forward",PageSize:20,LastObjectId:e.lastObjectId||null},page:e.page}};return e.term&&(t.header.action="GetViewFieldLookup"),JSON.stringify(t)},processResults:function(t,n){n.page=n.page||1,n.lastObjectId=null;var r=s?s.split(";"):[],i=l,a={results:[],pagination:{more:!1}};if(c&&1===n.page){var o={id:"hixobjref:null",text:d||"",displayValue:d||""};a.results.push(o)}if(t&&t.body&&t.body.data){var u=new e.Utilities.ExchangeUtil(t.body.data),f=u.collectionAsArray(t.body.data);n.lastObjectId=f.length>0?f[f.length-1].ObjectId:null;for(var h=0;h<f.length;h++){for(var m="",p=0;p<r.length;p++){var v=u.getField(f[h],r[p]);v&&v.Value&&v.Value.Value&&(m&&(m+=" - "),m+=v.Value.Value)}var g="",C=u.getField(f[h],i);C&&C.Value&&C.Value.Value&&(g=C.Value.Value);var w={id:"hixobjref:"+JSON.stringify(f[h].ObjectId),text:m,displayValue:g};a.results.push(w)}t&&t.body&&t.body.data&&t.body.data.PageInformation&&!0===t.body.data.PageInformation.IsNextEnabled&&(a.pagination.more=!0)}return a},cache:!0,transport:function(t,r,i){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var a,o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.Client.requestDigest();case 2:return(a=n.sent)&&(t.headers||(t.headers={}),t.headers["X-RequestDigest"]=a),(o=jQuery.ajax(t)).done((function(e){e&&e.header&&!e.header.isFault?r.apply(this,arguments):i.call(this,"Server request failed")})),o.fail((function(t){e.PageManager.logError(t),i.apply(this,arguments)})),n.abrupt("return",o);case 8:case"end":return n.stop()}}),n)})))}},templateResult:function(e){if(e.loading)return e.text;var t=document.createElement("DIV");return e.text?t.innerText=e.text:t.innerText=" ",t},templateSelection:function(e){return e.displayValue||e.text}}),(m=u?function(e){var t;if(p[0].options.length=0,e&&0!==e.length){for(var n=[],r=[],i=0;i<e.length;i++){var a=document.createElement("option");a.value=e[i].key,a.innerText=null!==(t=e[i].value)&&void 0!==t?t:"",r.push(a),n.push(a.value)}p.append(r).val(n).trigger("change")}else p.val("").trigger("change")}:function(e){var t;if(p[0].options.length=0,e){var n=[],r=[],i=document.createElement("option");i.value=e.key,i.innerText=null!==(t=e.value)&&void 0!==t?t:"",r.push(i),n.push(i.value),p.append(r).val(n).trigger("change")}else p.val("").trigger("change")})(ko.unwrap(h)),ko.isObservable(h)){var v;ko.utils.domNodeDisposal.addDisposeCallback(p[0],(function(){v&&v.dispose()})),p.on("change.select2",(function(t){var n=p.select2("data");if(n){v&&(v.dispose(),v=null);try{if(0===n.length)h(u?[]:null);else if(u){for(var r=[],i=0;i<n.length;i++)r.push(new e.Core.KeyValuePair(n[i].id,n[i].displayValue));h(r)}else h(new e.Core.KeyValuePair(n[0].id,n[0].displayValue))}finally{v||(v=h.subscribe((function(e){m(e)})))}}}))}}else e.PageManager.logLocal("Element ".concat(t," not found"))};t.isModalDialog=function(){return!!e.Client.getQueryParameter("IsDlg",!0)};var l="http://chipsoft.publishedurl/placeholder",u="/chipsoft.publishedurl/placeholder",c=!1,d=null;t.handleViewCommandConfirmation=function(t){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||!t.attr[e.Views.CommandRefNodeAttributes.confirmationMessage]){n.next=6;break}return n.next=3,e.PageManager.confirm(null,t.attr[e.Views.CommandRefNodeAttributes.confirmationMessage]);case 3:if(!0===n.sent){n.next=6;break}return n.abrupt("return",!1);case 6:return n.abrupt("return",!0);case 7:case"end":return n.stop()}}),n)})))},t.handleViewCommandNavigation=function(t,r,i){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var a,o,s,c,d,f,h,m,p,v,g,C;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r.navigationUrl){n.next=23;break}if(a=!1,!r.navigationUrl.startsWith(l)){n.next=8;break}if(!(r.navigationUrl.length>40&&"?"!==r.navigationUrl[40])){n.next=5;break}throw new Error("Unexpected placeholder url: "+r.navigationUrl);case 5:a=!0,n.next=17;break;case 8:if(!((o=r.navigationUrl.indexOf(u))>=0)){n.next=17;break}if(!(o>0)){n.next=14;break}if(s=r.navigationUrl.substring(0,o),e.PageManager.webRelativeUrl.startsWith(s)){n.next=14;break}throw new Error("Unexpected basepath in placeholder url '".concat(r.navigationUrl,"', expected '").concat(e.PageManager.webRelativeUrl,"'."));case 14:if(!(r.navigationUrl.length>o+34&&"?"!==r.navigationUrl[o+34])){n.next=16;break}throw new Error("Unexpected placeholder url: "+r.navigationUrl);case 16:a=!0;case 17:if(!a){n.next=23;break}if(t){n.next=20;break}throw new Error("Place holder url without command node");case 20:if(c=t.attr[e.Views.CommandRefNodeAttributes.pageUrl],r=Object.assign({},r),c){for(m in d={},(f=r.navigationUrl.indexOf("?"))>0&&(d=e.Client.parseQueryParameters(r.navigationUrl.substr(f+1))),h=c,d)d.hasOwnProperty(m)&&(h=e.Client.addQueryParameter(h,m,d[m],2));r.navigationUrl=h}else r.navigationUrl=null;case 23:if(p=null,("CurrentObject"===r.objectParameterType||"CurrentObjectAndObjectParameter"===r.objectParameterType)&&r&&r.navigationUrl&&i&&i.objectId&&i.objectId.ObjectIds.length>0&&(v=p=i.objectId,(r=Object.assign({},r)).navigationUrl=e.Client.addHiXObjectReferenceQueryParameter(r.navigationUrl,v,1)),("ObjectParameter"===r.objectParameterType||"CurrentObjectAndObjectParameter"===r.objectParameterType)&&r&&r.navigationUrl&&t&&(g=t.attr[e.Views.CommandRefNodeAttributes.objectParameter])&&g.viewResult&&g.viewResult.item&&1===g.viewResult.item.length&&(!((C=g.viewResult.item[0].objectId)&&C.ObjectIds.length>0)||p&&e.Core.areObjectIdsEqual(p,C)||((r=Object.assign({},r)).navigationUrl=e.Client.addHiXObjectReferenceQueryParameter(r.navigationUrl,C,1))),!t||"_blank"!==t.attr[e.Views.CommandRefNodeAttributes.linkTarget]||!r.navigationUrl){n.next=29;break}return window.open(r.navigationUrl,"_blank"),n.abrupt("return");case 29:if(!r){n.next=32;break}return n.next=32,e.Client.handleNavigation(r);case 32:case"end":return n.stop()}}),n)})))},t.handleCommandNavigation=function(t){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,i;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.navigation){n.next=6;break}return(r=!!t.confirmationText)&&(i=e.PageManager.registerDontNotifyPageUnload()),n.next=5,e.Client.handleNavigation(t.navigation);case 5:r&&e.PageManager.unregisterDontNotifyPageUnload(i);case 6:return n.abrupt("return");case 7:case"end":return n.stop()}}),n)})))};var f=function(t,n){if(!t)return!1;if(!n)return!!t;var r=!1;if(t.startsWith(l)){if(t.length>40&&"?"!==t[40])throw new Error("Unexpected placeholder url: "+t);r=!0}else{var i=t.indexOf(u);if(i>=0){if(i>0){var a=t.substring(0,i);if(!e.PageManager.webRelativeUrl.startsWith(a))throw new Error("Unexpected basepath in placeholder url '".concat(t,"', expected '").concat(e.PageManager.webRelativeUrl,"'."))}if(t.length>i+34&&"?"!==t[i+34])throw new Error("Unexpected placeholder url: "+t);r=!0}}return!r||!!n.attr[e.Views.CommandRefNodeAttributes.pageUrl]};function h(t){return!(!e.Client.isObjectWithType(t)||"ChipSoft.PlatformServices.Client.Model.Protocol.ClientObjectReferenceTransformation, ChipSoft.PlatformServices.Client.Model"!==t.$type)}t.canNavigate=function(t,n){if(!t)return!1;if("WebPartDialog"===t.navigationType)return t.dialogComponentIds&&t.dialogComponentIds.length>0&&!c;if(e.Client.isModalDialog()||c)if("Navigate"===t.dialogNavigationType){if(f(t.navigationUrl,n))return!0}else if("NavigateParent"===t.dialogNavigationType){if(f(t.navigationUrl,n))return!0}else{if("NoneCloseDialog"===t.dialogNavigationType)return!0;if("NavigateOrCloseDialog"===t.dialogNavigationType)return f(t.navigationUrl,n),!0;if("NavigateParentOrCloseDialog"===t.dialogNavigationType)return f(t.navigationUrl,n),!0}else if("Navigate"===t.navigationType){if(f(t.navigationUrl,n))return!0}else if("Modal"===t.navigationType&&f(t.navigationUrl,n))return!0;return!1},t.handleNavigation=function(t){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,i,a,o,s,f,h,m,p=this;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.Client.isModalDialog(),i||c){n.next=32;break}if("Navigate"!==t.navigationType){n.next=10;break}if(!t.navigationUrl){n.next=8;break}if(!(t.navigationUrl.indexOf(l)>=0||t.navigationUrl.indexOf(u)>=0)){n.next=7;break}throw new Error("navigation url contains an unresolved url token");case 7:e.Client.goToPage(t.navigationUrl,!0);case 8:n.next=30;break;case 10:if("Modal"!==t.navigationType){n.next=19;break}if(!t.navigationUrl){n.next=17;break}if(!(t.navigationUrl.indexOf(l)>=0||t.navigationUrl.indexOf(u)>=0)){n.next=14;break}throw new Error("navigation url contains an unresolved url token");case 14:a={url:t.navigationUrl,showMaximized:t.openDialogMaximized,dialogReturnValueCallback:function(t,n){e.PageManager.resumeIsAuthenticated()}},e.PageManager.stopIsAuthenticated(),SP.SOD.execute("sp.ui.dialog.js","SP.UI.ModalDialog.showModalDialog",a);case 17:n.next=30;break;case 19:if("WebPartDialog"!==t.navigationType){n.next=30;break}if(!c){n.next=22;break}throw new Error("A WebPartDialog is already open");case 22:return c=!0,(o=t.dialogOptions?t.dialogOptions:{}).alwaysFullScreen=t.openDialogMaximized,s=null===(r=null==t?void 0:t.dialogOptions)||void 0===r?void 0:r.onClose,o.onClose=function(){return __awaiter(p,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=!1,d=null,!s){e.next=5;break}return e.next=5,s();case 5:return e.abrupt("return");case 6:case"end":return e.stop()}}),e)})))},n.next=29,e.PageManager.showWebpartDialog(t.dialogComponentIds,o);case 29:d=n.sent;case 30:n.next=106;break;case 32:if("Navigate"!==t.dialogNavigationType){n.next=39;break}if(!t.navigationUrl){n.next=37;break}if(!(t.navigationUrl.indexOf(l)>=0||t.navigationUrl.indexOf(u)>=0)){n.next=36;break}throw new Error("navigation url contains an unresolved url token");case 36:e.Client.goToPage(t.navigationUrl,!0);case 37:n.next=106;break;case 39:if("NavigateParent"!==t.dialogNavigationType){n.next=50;break}if(!t.navigationUrl){n.next=48;break}if(!(t.navigationUrl.indexOf(l)>=0||t.navigationUrl.indexOf(u)>=0)){n.next=43;break}throw new Error("navigation url contains an unresolved url token");case 43:if(!c||i){n.next=46;break}return e.Client.goToPage(t.navigationUrl,!0),n.abrupt("return");case 46:e.PageManager.stopIsAuthenticated(),window.frameElement.navigateParent(t.navigationUrl);case 48:n.next=106;break;case 50:if("NoneCloseDialog"!==t.dialogNavigationType){n.next=64;break}if(!(f=d)){n.next=58;break}return n.next=55,f.closeDialog();case 55:return n.abrupt("return");case 58:if(!c){n.next=60;break}throw new Error("openWebpartDialog without vm");case 60:e.PageManager.stopIsAuthenticated(),window.frameElement.cancelPopUp(),n.next=106;break;case 64:if("NavigateOrCloseDialog"!==t.dialogNavigationType){n.next=84;break}if(!t.navigationUrl){n.next=71;break}if(!(t.navigationUrl.indexOf(l)>=0||t.navigationUrl.indexOf(u)>=0)){n.next=68;break}throw new Error("navigation url contains an unresolved url token");case 68:e.Client.goToPage(t.navigationUrl,!0),n.next=82;break;case 71:if(!(h=d)){n.next=78;break}return n.next=75,h.closeDialog();case 75:return n.abrupt("return");case 78:if(!c){n.next=80;break}throw new Error("openWebpartDialog without vm");case 80:e.PageManager.stopIsAuthenticated(),window.frameElement.cancelPopUp();case 82:n.next=106;break;case 84:if("NavigateParentOrCloseDialog"!==t.dialogNavigationType){n.next=106;break}if(!t.navigationUrl){n.next=95;break}if(!(t.navigationUrl.indexOf(l)>=0||t.navigationUrl.indexOf(u)>=0)){n.next=88;break}throw new Error("navigation url contains an unresolved url token");case 88:if(!c||i){n.next=91;break}return e.Client.goToPage(t.navigationUrl,!0),n.abrupt("return");case 91:e.PageManager.stopIsAuthenticated(),window.frameElement.navigateParent(t.navigationUrl),n.next=106;break;case 95:if(!(m=d)){n.next=102;break}return n.next=99,m.closeDialog();case 99:return n.abrupt("return");case 102:if(!c){n.next=104;break}throw new Error("openWebpartDialog without vm");case 104:e.PageManager.stopIsAuthenticated(),window.frameElement.cancelPopUp();case 106:case"end":return n.stop()}}),n)})))},t.closeWebPartDialog=function(){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=d)){e.next=7;break}return e.next=4,t.closeDialog();case 4:return e.abrupt("return");case 7:if(!c){e.next=9;break}throw new Error("openWebpartDialog without vm");case 9:case"end":return e.stop()}}),e)})))},t.isObjectWithType=function(e){return!!e&&e.hasOwnProperty("$type")},t.isObjectReferenceTransformation=h,t.isSameDay=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return!1;if(1===t.length&&t[0])return!0;if(!t[0])return!1;for(var r=t[0].getFullYear(),i=t[0].getMonth(),a=t[0].getDate(),o=1;o<t.length;o++){if(!t[o])return!1;var s=t[o].getFullYear(),l=t[o].getMonth(),u=t[o].getDate();if(r!==s)return!1;if(i!==l)return!1;if(a!==u)return!1}return!0},t.getWeek=function(e){(e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))).setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));var t=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.valueOf()-t.valueOf())/864e5+1)/7)},t.isSameWeek=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(0===n.length)return!1;if(1===n.length&&n[0])return!0;if(!n[0])return!1;for(var i=n[0].getFullYear(),a=t.getWeek(n[0]),o=1;o<n.length;o++){if(!n[o])return!1;var s=n[o].getFullYear(),l=t.getWeek(n[o]);if(i!==s)return!1;if(a!==l)return!1}return!0},t.isSameMonth=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return!1;if(1===t.length&&t[0])return!0;if(!t[0])return!1;for(var r=t[0].getFullYear(),i=t[0].getMonth(),a=1;a<t.length;a++){if(!t[a])return!1;var o=t[a].getFullYear(),s=t[a].getMonth();if(r!==o)return!1;if(i!==s)return!1}return!0},t.isSameYear=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return!1;if(1===t.length&&t[0])return!0;if(!t[0])return!1;for(var r=t[0].getFullYear(),i=1;i<t.length;i++){if(!t[i])return!1;if(r!==t[i].getFullYear())return!1}return!0},t.hixObjectReferenceToString=function(e){return h(e)?e.ClassId+": "+e.ObjectIds.join(",")+":"+t.hixObjectReferenceToString(e.TransformationId):e.ClassId+": "+e.ObjectIds.join(",")},t.createPrecompilerContexts=function(t){if(!e.PageManager.knockoutPrecompile)return t;var n=t;if(n.precompilerContexts)return n;for(var r={},i={},a=0;a<t.item.length;a++){var o=t.item[a],s=o.fields;for(var l in s)if(s.hasOwnProperty(l)&&"attr"!==l&&"nav"!==l){var u=s[l];r.hasOwnProperty(l)||(r[l]={allFields:{},fixedValues:{},variableFields:{}});var c=r[l];for(var d in u.attr)if(!c.variableFields[d]&&u.attr.hasOwnProperty(d)&&"precompilerContext"!==d){c.allFields[d]=!0;var f=u.attr[d];0===a?c.fixedValues[d]=f:c.fixedValues[d]!==f&&(delete c.fixedValues[d],c.variableFields[d]=!0)}u.precompilerContexts={attr:c}}var h=o.commands.commandRef();for(var m in h)if(h.hasOwnProperty(m)&&"attr"!==m&&"nav"!==m){var p=h[m];i.hasOwnProperty(m)||(i[m]={allFields:{},fixedValues:{},variableFields:{}});var v=i[m];for(var g in p.attr)if(!v.variableFields[g]&&p.attr.hasOwnProperty(g)&&"precompilerContext"!==g){v.allFields[g]=!0;var C=p.attr[g];0===a?v.fixedValues[g]=C:v.fixedValues[g]!==C&&(delete v.fixedValues[g],v.variableFields[g]=!0)}p.precompilerContexts={attr:v}}}return n.precompilerContexts={fields:r},n};var m=0,p={},v={},g={},C={};t.getPrecompiledTemplateId=function(n,r,i,a){var o,s;if(void 0===v[n]&&(o=jQuery("#"+n),v[n]=!(!o||"true"!==o.attr("precompile"))),!1===v[n])return n;if(o||(o=jQuery("#"+n)),r){var l=r;if(l.__templateIds){if(l.__templateIds[n])return l.__templateIds[n]}else l.__templateIds={};var u=o.data("dependencies"),c=null;if(u){c="";for(var d=0;d<u.length;d++){var f=u[d];if(r[f.prefix]){var h=r[f.prefix].fixedValues[f.property];c+="_"+f.prefix+"_"+f.property+"_"+_typeof(h)+"_"+h}}s=g[n+"_"+c]}C[s]&&(s=t.getPrecompiledTemplateId(C[s],r,i,a)),l.__templateIds[n]=s}else s="__CS_precompiled_static_"+n,r={};if(s&&p[s])return s;var b={},D=o.attr("prefixes");D&&D.split(",").forEach((function(e){var t=_slicedToArray(e.split(":"),2),n=t[0],r=t[1];b[n]=r}));w(b);var k,x=(new e.Core.KoPrecompiler).parse(o[0],r,b),I="",F="",E=[];for(var V in x.dependencyProps)if(x.dependencyProps.hasOwnProperty(V)){var _=x.dependencyProps[V];for(var S in _)if(_.hasOwnProperty(S)){var P=_[S];I+="_"+b[V]+"_"+S+"_"+_typeof(P)+"_"+P,F&&(F+=","),F+=b[V]+":"+S,E.push({prefix:b[V],property:S})}}return o.attr("dependencies",F),o.data("dependencies",E),s="__CS_precompiled_"+m++,g[n+"_"+I]=s,x.templateRedirect&&x.templateRedirect.nextCommandName===i&&a.hasOwnProperty(x.templateRedirect.templateName)&&(k=a[x.templateRedirect.templateName],C[s]=k),y(s,x.compiledElement,n,I,k),p[s]=!0,C[s]||s};var w=function(e){e.attr||(e.attr="attr"),e["$data.attr"]||(e["$data.attr"]="attr"),e["$command.attr"]||(e["$command.attr"]="attr")},y=function(e,t,n,r,i){var a=jQuery("<script type='text/html'>");a.attr("id",e),a.attr("originalTemplateId",n),a.attr("dependencyId",r),a.attr("redirectId",i),a.html(t.innerHTML),jQuery("body").append(a)};t.isEmptyTargetPage=function(e){return!e||"#"===e},t.linkTextToElement=function(n){var r=/(((?:https?:\/\/)|(?:tel:)|(?:mailto:)|(?:callto:)|(?:sms:))\S*)/gim,i=/(?:[!-\/:-@\[-`\{-~\xA1-\xA9\xAB\xAC\xAE-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0606-\u060F\u061B\u061D-\u061F\u066A-\u066D\u06D4\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u0888\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C77\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2010-\u2027\u2030-\u205E\u207A-\u207E\u208A-\u208E\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uAB6A\uAB6B\uABEB\uFB29\uFBB2-\uFBC2\uFD3E-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3F]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFD5-\uDFF1\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F[\uDC9C\uDC9F]|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD838[\uDD4F\uDEFF]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA])+$/m,a=t.combinePath(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),e.PageManager.siteRelativeUrl),o=document.createElement("span");if(!n)return o;var s=r.exec(n);if(s){for(var l=0;s;){if(s.index-l>0){var u=n.substring(l,s.index),c=document.createElement("span");c.innerText=u,o.appendChild(c)}var d=s[0],f=i.exec(d);f&&(d=d.substring(0,f.index)),l=s.index+d.length;var h=document.createElement("a");h.href=d,h.textContent=s[2].startsWith("http")?d:d.substr(s[2].length),d.startsWith(a)||(h.target="_blank"),o.appendChild(h),s=r.exec(n)}if(n.length>l){var m=n.substring(l),p=document.createElement("span");p.innerText=m,o.appendChild(p)}}else o.innerText=n;return o},t.createIOSAppBanner=function(e,t){var n=document.createElement("meta");n.name="apple-itunes-app",n.content="app-id="+e+", app-argument="+t,document.head.appendChild(n)},t.isKnownIconType=function(n){return Object.keys(t.IconType).filter((function(e){return isNaN(Number(e))})).filter((function(t){return e.Client.IconType[t]===n})).length>0},function(e){e.Android="Android",e.iOS="iOS",e.Desktop="Desktop"}(t.UserAgentDevice||(t.UserAgentDevice={})),t.detectUserAgent=function(){return/Android/i.test(window.navigator.userAgent)?"Android":/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?"iOS":"Desktop"},t.queueTask=function(e){return setTimeout(e,0)},window.csApplySingleSelection=t.applySingleSelection}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(){function t(){_classCallCheck(this,t),this.firstObjectId=null,this.lastObjectId=null,this.pageSize=20}return _createClass(t,[{key:"update",value:function(t){if(this.firstObjectId=null,this.lastObjectId=null,t){var n=new e.Utilities.ExchangeUtil(t);if(n.collectionItemCount(t)>0){var r=n.collectionAsArray(t);this.firstObjectId=r[0].ObjectId,this.lastObjectId=r[r.length-1].ObjectId}}}},{key:"getLastPageOptions",value:function(){return this.lastOptions}},{key:"setPageSize",value:function(e){this.pageSize=e}},{key:"registerCommands",value:function(e,t){var n=this;e.registerCommand("commands.firstpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))})),e.registerCommand("commands.lastpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))})),e.registerCommand("commands.previouspage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))})),e.registerCommand("commands.nextpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))}))}},{key:"createPageOptions",value:function(e){if("commands.firstpage"===e){var t={$type:"ChipSoft.PlatformServices.Shared.Protocol.FixedSizePageOptions, ChipSoft.PlatformServices.Shared",PageSize:this.pageSize,LastObjectId:null,PageDirection:"Forward"};return this.lastOptions=t,t}if("commands.lastpage"===e){var n={$type:"ChipSoft.PlatformServices.Shared.Protocol.FixedSizePageOptions, ChipSoft.PlatformServices.Shared",PageSize:this.pageSize,LastObjectId:null,PageDirection:"Backward"};return this.lastOptions=n,n}if("commands.previouspage"===e){var r={$type:"ChipSoft.PlatformServices.Shared.Protocol.FixedSizePageOptions, ChipSoft.PlatformServices.Shared",PageSize:this.pageSize,LastObjectId:this.firstObjectId,PageDirection:"Backward"};return this.lastOptions=r,r}if("commands.nextpage"===e){var i={$type:"ChipSoft.PlatformServices.Shared.Protocol.FixedSizePageOptions, ChipSoft.PlatformServices.Shared",PageSize:this.pageSize,LastObjectId:this.lastObjectId,PageDirection:"Forward"};return this.lastOptions=i,i}throw new Error("Unsupported command: "+e)}}]),t}();t.FixedSizePager=n;var r=_createClass((function e(){_classCallCheck(this,e)}));t.ClientPeriodPageOptions=r,function(e){e.Unspecified="Unspecified",e.Day="Day",e.Week="Week",e.Month="Month",e.Year="Year"}(t.PeriodPageSpan||(t.PeriodPageSpan={}));var i=function(){function t(){_classCallCheck(this,t),this.startDateTime=null,this.endDateTime=null,this.previousDateTime=null,this.nextDateTime=null,this.lastOptions=null,this._pageSpan="Unspecified"}return _createClass(t,[{key:"pageStart",get:function(){return this.startDateTime}},{key:"pageEnd",get:function(){return this.endDateTime}},{key:"pageSpan",get:function(){return this._pageSpan}},{key:"setPageSpan",value:function(e){this._pageSpan=e}},{key:"isSingleSpan",get:function(){return"Unspecified"!==this._pageSpan&&this.startDateTime instanceof Date&&this.endDateTime instanceof Date&&("Day"===this._pageSpan&&e.Client.isSameDay(this.startDateTime,this.endDateTime)||"Week"===this._pageSpan&&e.Client.isSameWeek(this.startDateTime,this.endDateTime)||"Month"===this._pageSpan&&e.Client.isSameMonth(this.startDateTime,this.endDateTime)||"Year"===this._pageSpan&&e.Client.isSameYear(this.startDateTime,this.endDateTime))}},{key:"update",value:function(t){if(this.startDateTime=null,this.endDateTime=null,this.previousDateTime=null,this.nextDateTime=null,t&&t.PageInformation){if("ChipSoft.PlatformServices.Shared.Protocol.PeriodPageInformation, ChipSoft.PlatformServices.Shared"!==t.PageInformation.$type)throw new Error("Expected PeriodPageInformation");var n=t.PageInformation;this.startDateTime=e.Core.dateFromIsoDateString(n.StartDateTime),this.endDateTime=e.Core.dateFromIsoDateString(n.EndDateTime),this.previousDateTime=n.PreviousDateTime?new Date(n.PreviousDateTime):null,this.nextDateTime=n.NextDateTime?new Date(n.NextDateTime):null}}},{key:"getLastPageOptions",value:function(){return this.lastOptions}},{key:"registerCommands",value:function(e,t){var n=this;e.registerCommand("commands.firstpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))})),e.registerCommand("commands.lastpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))})),e.registerCommand("commands.previouspage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))})),e.registerCommand("commands.nextpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))}))}},{key:"createPageOptions",value:function(e){if("commands.firstpage"===e){var t=new r;return t.pageDirection="Forward",t.dateTime=null,this.lastOptions=t,t}if("commands.lastpage"===e){var n=new r;return n.pageDirection="Backward",n.dateTime=null,this.lastOptions=n,n}if("commands.previouspage"===e){var i=new r;return this.previousDateTime?(i.pageDirection="None",i.dateTime=this.previousDateTime):(i.pageDirection="Backward",i.dateTime=this.startDateTime),this.lastOptions=i,i}if("commands.nextpage"===e){var a=new r;return this.nextDateTime?(a.pageDirection="None",a.dateTime=this.nextDateTime):(a.pageDirection="Forward",a.dateTime=this.endDateTime),this.lastOptions=a,a}throw new Error("Unsupported command: "+e)}}]),t}();t.PeriodPager=i;var a=_createClass((function e(){_classCallCheck(this,e)}));t.ClientNextPeriodPageOptions=a;var o=function(){function t(){_classCallCheck(this,t),this.dateTime=null,this.pageSize=5,this.previousDateTime=null,this.nextDateTime=null}return _createClass(t,[{key:"update",value:function(t){if(this.dateTime=null,this.previousDateTime=null,this.nextDateTime=null,t&&t.PageInformation){if("ChipSoft.PlatformServices.Shared.Protocol.NextPeriodPageInformation, ChipSoft.PlatformServices.Shared"!==t.PageInformation.$type)throw new Error("Expected NextPeriodPageInformation");var n=t.PageInformation;this.dateTime=e.Core.dateFromIsoDateString(n.DateTime),this.previousDateTime=n.PreviousDateTime?e.Core.dateFromIsoDateString(n.PreviousDateTime):null,this.nextDateTime=n.NextDateTime?e.Core.dateFromIsoDateString(n.NextDateTime):null}}},{key:"getLastPageOptions",value:function(){return this.lastOptions}},{key:"setPageSize",value:function(e){this.pageSize=e}},{key:"getdateTime",value:function(){return this.dateTime}},{key:"registerCommands",value:function(e,t){var n=this;e.registerCommand("commands.firstpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))})),e.registerCommand("commands.lastpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))})),e.registerCommand("commands.previouspage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))})),e.registerCommand("commands.nextpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(this.createPageOptions(e));case 2:case"end":return n.stop()}}),n,this)})))}))}},{key:"createPageOptions",value:function(e){if("commands.firstpage"===e){var t={$type:"ChipSoft.PlatformServices.Shared.Protocol.NextPeriodPageOptions, ChipSoft.PlatformServices.Shared",DateTime:null,PageSize:this.pageSize,PageDirection:"Forward"};return this.lastOptions=t,t}if("commands.lastpage"===e){var n={$type:"ChipSoft.PlatformServices.Shared.Protocol.NextPeriodPageOptions, ChipSoft.PlatformServices.Shared",DateTime:null,PageSize:this.pageSize,PageDirection:"Backward"};return this.lastOptions=n,n}if("commands.previouspage"===e){var r={$type:"ChipSoft.PlatformServices.Shared.Protocol.NextPeriodPageOptions, ChipSoft.PlatformServices.Shared",DateTime:this.previousDateTime,PageSize:this.pageSize,PageDirection:"Backward"};return this.lastOptions=r,r}if("commands.nextpage"===e){var i={$type:"ChipSoft.PlatformServices.Shared.Protocol.NextPeriodPageOptions, ChipSoft.PlatformServices.Shared",DateTime:this.nextDateTime,PageSize:this.pageSize,PageDirection:"Forward"};return this.lastOptions=i,i}throw new Error("Unsupported command: "+e)}}]),t}();t.NextPeriodPager=o;var s=function(){function t(){_classCallCheck(this,t),this.pageSize=20,this.pageOffset=0,this.pageWindow=-1,this.prevCommandIds=[]}return _createClass(t,[{key:"update",value:function(e){}},{key:"viewData",value:function(e){if(e!==this.originalViewData)if(e&&e.data){if(e.data.PageInformation)throw new Error("Collection is already paged");this.pageOffset=0,this.originalViewData=e;var t=e.data;this.originalCollection=Object.assign({},t),this.originalCollection.Items=_toConsumableArray(t.Items),this.handleCommand(this.lastCommand)}else this.pageOffset=0,this.pageWindow=-1,this.originalViewData=null,this.originalCollection=null}},{key:"getLastPageOptions",value:function(){return null}},{key:"setPageSize",value:function(e){this.pageSize=e}},{key:"createPageOptions",value:function(e){return this.lastCommand=e,null}},{key:"registerCommands",value:function(e,t){var n=this,r=e.registerCommand("commands.firstpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.lastCommand=e,this.handleCommand(e),n.next=4,t(this.originalViewData);case 4:case"end":return n.stop()}}),n,this)})))})),i=e.registerCommand("commands.lastpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.lastCommand=e,this.handleCommand(e),n.next=4,t(this.originalViewData);case 4:case"end":return n.stop()}}),n,this)})))})),a=e.registerCommand("commands.previouspage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.lastCommand=e,this.handleCommand(e),n.next=4,t(this.originalViewData);case 4:case"end":return n.stop()}}),n,this)})))})),o=e.registerCommand("commands.nextpage",(function(e,r,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.lastCommand=e,this.handleCommand(e),n.next=4,t(this.originalViewData);case 4:case"end":return n.stop()}}),n,this)})))}));this.prevCommandIds=[r,i,a,o]}},{key:"unregisterCommands",value:function(e){4===this.prevCommandIds.length&&(e.unregisterCommand("commands.firstpage",this.prevCommandIds[0]),e.unregisterCommand("commands.lastpage",this.prevCommandIds[1]),e.unregisterCommand("commands.previouspage",this.prevCommandIds[2]),e.unregisterCommand("commands.nextpage",this.prevCommandIds[3])),this.prevCommandIds=[]}},{key:"updateCommands",value:function(t){var n={ClassId:"~virtual",ObjectIds:[SparkMD5.hash(this.originalViewData.viewId.ClassId+this.originalViewData.viewId.Mode+this.originalViewData.viewId.Uri+this.originalViewData.viewId.Version)]};if(this.originalViewData.itemScopedViewData&&this.originalViewData.itemScopedViewData.commands)for(var r=0;r<this.originalViewData.itemScopedViewData.commands.length;r++){var i=this.originalViewData.itemScopedViewData.commands[r];if(!i.Key.ExtraKey&&e.Core.areObjectIdsEqual(n,i.Key.ObjectId)){for(var a=0;a<t.length;a++)for(var o=t[a],s=0;s<i.Value.length;s++)if(i.Value[s].name===o.name){i.Value[s].enabled=o.enabled;break}break}}}},{key:"handleCommand",value:function(e){if(e)if("commands.firstpage"===e){if(!this.originalViewData||!this.originalCollection)return;this.pageOffset=0,this.pageWindow=this.originalCollection.Items.length>=this.pageSize?this.pageSize:this.originalCollection.Items.length;var t=Object.assign({},this.originalCollection);t.Items=_toConsumableArray(this.originalCollection.Items),t.Items.splice(this.pageWindow),t.PageInformation={$type:"ChipSoft.PlatformServices.Shared.Protocol.FixedSizePageInformation, ChipSoft.PlatformServices.Shared",IsPreviousEnabled:!1,IsNextEnabled:this.originalCollection.Items.length>this.pageSize},this.originalViewData.data=t,this.updateCommands([{name:"commands.nextpage",enabled:this.originalCollection.Items.length>this.pageSize},{name:"commands.previouspage",enabled:!1}])}else if("commands.lastpage"===e){if(!this.originalViewData||!this.originalCollection)return;this.pageOffset=this.originalCollection.Items.length-this.pageSize,this.pageWindow=this.originalCollection.Items.length>=this.pageSize?this.pageSize:this.originalCollection.Items.length,this.pageOffset<0&&(this.pageOffset=0);var n=Object.assign({},this.originalCollection);n.Items=_toConsumableArray(this.originalCollection.Items),n.Items.splice(0,this.originalCollection.Items.length-this.pageWindow),n.PageInformation={$type:"ChipSoft.PlatformServices.Shared.Protocol.FixedSizePageInformation, ChipSoft.PlatformServices.Shared",IsPreviousEnabled:this.originalCollection.Items.length>this.pageSize,IsNextEnabled:!1},this.originalViewData.data=n,this.updateCommands([{name:"commands.nextpage",enabled:!1},{name:"commands.previouspage",enabled:this.originalCollection.Items.length>this.pageSize}])}else if("commands.previouspage"===e){if(!this.originalViewData||!this.originalCollection)throw new Error("No data");if(0===this.pageOffset)throw new Error("Page beyond collection start");if(this.pageWindow<0)throw new Error("Invalid page window");this.pageOffset-=this.pageSize,this.pageWindow=this.pageOffset>=0?this.pageSize:this.pageSize+this.pageOffset,this.pageOffset<0&&(this.pageOffset=0);var r=Object.assign({},this.originalCollection);r.Items=_toConsumableArray(this.originalCollection.Items),r.Items.splice(0,this.pageOffset),r.Items.splice(this.pageWindow),r.PageInformation={$type:"ChipSoft.PlatformServices.Shared.Protocol.FixedSizePageInformation, ChipSoft.PlatformServices.Shared",IsPreviousEnabled:this.pageOffset>0,IsNextEnabled:!0},this.originalViewData.data=r,this.updateCommands([{name:"commands.nextpage",enabled:!0},{name:"commands.previouspage",enabled:this.pageOffset>0}])}else{if("commands.nextpage"!==e)throw new Error("Unkown command: "+e);if(!this.originalViewData||!this.originalCollection)throw new Error("No data");if(this.pageOffset+this.pageSize>=this.originalCollection.Items.length)throw new Error("Page beyond collection end");if(this.pageWindow<0)throw new Error("Invalid page window");this.pageOffset+=this.pageWindow,this.pageWindow=this.pageOffset+this.pageSize<=this.originalCollection.Items.length?this.pageSize:this.originalCollection.Items.length-this.pageOffset;var i=Object.assign({},this.originalCollection);i.Items=_toConsumableArray(this.originalCollection.Items),i.Items.splice(0,this.pageOffset),i.Items.splice(this.pageWindow),i.PageInformation={$type:"ChipSoft.PlatformServices.Shared.Protocol.FixedSizePageInformation, ChipSoft.PlatformServices.Shared",IsPreviousEnabled:!0,IsNextEnabled:this.pageOffset+this.pageWindow<this.originalCollection.Items.length},this.originalViewData.data=i,this.updateCommands([{name:"commands.nextpage",enabled:this.pageOffset+this.pageWindow<this.originalCollection.Items.length},{name:"commands.previouspage",enabled:!0}])}else{if(!this.originalViewData||!this.originalCollection)return;this.pageOffset=0,this.pageWindow=this.originalCollection.Items.length;var a=Object.assign({},this.originalCollection);a.Items=_toConsumableArray(this.originalCollection.Items),a.PageInformation={$type:"ChipSoft.PlatformServices.Shared.Protocol.FixedSizePageInformation, ChipSoft.PlatformServices.Shared",IsPreviousEnabled:!1,IsNextEnabled:!1},this.originalViewData.data=a,this.updateCommands([{name:"commands.nextpage",enabled:!1},{name:"commands.previouspage",enabled:!1}])}}}]),t}();t.VirtualFixedSizePager=s}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(e,t){if(t)for(var n=0;n<t.length;n++){if(t[n].n===e)return n}return-1},r=function(e,t){if(t)for(var n=0;n<t.length;n++){if(t[n].k===e)return n}return-1},i=function(e,i){if(e.e)for(var a=0;a<e.e.length;a++){var o=e.e[a];if("TextPart"===o.n){var s=n("Format",o.e),l=n("Text",o.e);if(-1===l)continue;var u=o.e[l];if(u.v){var c=document.createElement("span");if(s>-1){var d=o.e[s];if(d.e)for(var f=0;f<d.e.length;f++){var h=d.e[f];if("Bold"===h.n)c.classList.add("bold");else if("Italic"===h.n)c.classList.add("italic");else if("Underline"===h.n)c.classList.add("underline");else if("FontColor"===h.n&&h.v&&9===h.v.length){var m=h.v;m=m.substring(3),c.classList.add("foreColor"+t.getClosestColorCode(m))}}}var p=/(((?:https?:\/\/)|(?:tel:)|(?:mailto:)|(?:callto:)|(?:sms:))\S*)/gim,v=/(?:[!-\/:-@\[-`\{-~\xA1-\xA9\xAB\xAC\xAE-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0606-\u060F\u061B\u061D-\u061F\u066A-\u066D\u06D4\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u0888\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C77\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2010-\u2027\u2030-\u205E\u207A-\u207E\u208A-\u208E\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uAB6A\uAB6B\uABEB\uFB29\uFBB2-\uFBC2\uFD3E-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3F]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFD5-\uDFF1\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F[\uDC9C\uDC9F]|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD838[\uDD4F\uDEFF]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA])+$/m,g=p.exec(u.v);if(g){for(var C=0;g;){if(g.index-C>0){var w=u.v.substring(C,g.index),y=document.createElement("span");y.innerText=w,c.appendChild(y)}var b=g[0],D=v.exec(b);D&&(b=b.substring(0,D.index)),C=g.index+b.length;var k=document.createElement("a");k.href=b,k.textContent=g[2].startsWith("http")?b:b.substr(g[2].length),b.startsWith(origin)||(k.target="_blank"),c.appendChild(k),g=p.exec(u.v)}if(u.v.length>C){var x=u.v.substring(C),I=document.createElement("span");I.innerText=x,c.appendChild(I)}}else c.textContent=u.v;i.appendChild(c)}}else if("Link"===o.n){var F=n("Title",o.e),E=n("Href",o.e);if(-1===F&&-1===E)continue;var V=void 0;-1!==F&&(V=o.e[F].v);var _=void 0;if(-1!==E&&(_=o.e[E].v),!V&&!_)continue;var S=!1;if(_){S=/((?:(?:https?:\/\/)|(?:tel:)|(?:mailto:)|(?:callto:)|(?:sms:))\S*)/gim.test(_)}if(S){var P=document.createElement("a");P.href=_,P.target="_blank",P.innerText=V||_,i.appendChild(P)}else{var O=document.createElement("span");O.innerText=V||_,i.appendChild(O)}}else if("PublishedPageLink"===o.n){if(-1===n("PublishedPage",o.e))continue;var A=n("Caption",o.e),T=n("DefaultCaption",o.e),R=n("Link",o.e);if(-1===A&&-1===T)continue;var N=document.createElement("a");N.href=-1===R?"#":o.e[R].v,N.innerText=-1===A?o.e[T].v:o.e[A].v,i.appendChild(N)}else if("HiXImage"===o.n){var M=n("ImageUrl",o.e);if(-1===M)continue;var j=n("AltText",o.e),B=n("Title",o.e),L=n("Width",o.e),U=n("Height",o.e),W=document.createElement("img");-1!==j&&(W.alt=o.e[j].v),-1!==B&&(W.title=o.e[B].v),-1!==L&&o.e[L].v&&(W.style.width="".concat(o.e[L].v,"px")),-1!==U&&o.e[U].v&&(W.style.height="".concat(o.e[U].v,"px")),W.src=o.e[M].v,i.appendChild(W)}else{if("ContentReference"!==o.n)throw new Error("Unknown element: "+o.n);var Q=n("Content",o.e);if(-1===Q)continue;var q=n("Role",o.e),H=n("Label",o.e),Y=n("Title",o.e),z=n("Width",o.e),K=n("Height",o.e),$=null,G=null,Z="px",J="px";if(z>=0){var X=r("maximum",o.e[z].a);-1!==X&&"true"===o.e[z].a[X].v&&($=!0);var ee=r("type",o.e[z].a);if(-1!==ee){var te=o.e[z].a[ee].v;"percentage"===te?Z="%":"viewport"===te&&(Z="vw")}}if(K>=0){var ne=r("maximum",o.e[K].a);-1!==ne&&"true"===o.e[K].a[ne].v&&(G=!0);var re=r("type",o.e[K].a);if(-1!==re){var ie=o.e[K].a[re].v;"percentage"===ie?J="%":"viewport"===ie&&(J="vh")}}var ae=document.createElement("span");ae.style.display="inline-block",ae.className=o.e[Q].v,-1!==q&&ae.setAttribute("role",o.e[q].v),-1!==Y&&ae.setAttribute("title",o.e[Y].v),-1!==H&&ae.setAttribute("aria-label",o.e[H].v),-1!==z&&o.e[z].v&&($?ae.style.maxWidth="".concat(o.e[z].v).concat(Z):ae.style.width="".concat(o.e[z].v).concat(Z)),-1!==K&&o.e[K].v&&(G?ae.style.maxHeight="".concat(o.e[K].v).concat(J):ae.style.height="".concat(o.e[K].v).concat(J)),i.appendChild(ae)}}},a=function e(t,n){if(t&&t.e)for(var a=0;a<t.e.length;a++){var o=t.e[a];if("Paragraph"===o.n){var s=document.createElement("p");i(o,s),n.push(s)}else if("Heading"===o.n){var l="h1",u=r("level",o.a);if(u>=0){var c=Number(o.a[u].v);c>=1&&c<=6&&(l="h"+c)}var d=document.createElement(l);i(o,d),n.push(d)}else if("UnorderedList"===o.n){var f=document.createElement("ul");if(o.e)for(var h=0;h<o.e.length;h++){var m=o.e[h];if("ListItem"!==m.n)throw new Error("Unknown list node: "+m.n);var p=document.createElement("li");f.appendChild(p);var v=[];e(m,v);for(var g=0;g<v.length;g++)p.appendChild(v[g])}n.push(f)}else{if("OrderedList"!==o.n)throw new Error("Unknown block node: "+o.n);var C=document.createElement("ol"),w=r("start",o.a);if(w>=0){var y=o.a[w].v;if(y){var b=Number(y);1!==b&&(C.start=b)}}if(o.e)for(var D=0;D<o.e.length;D++){var k=o.e[D];if("ListItem"!==k.n)throw new Error("Unknown list node: "+k.n);var x=document.createElement("li");C.appendChild(x);var I=[];e(k,I);for(var F=0;F<I.length;F++)x.appendChild(I[F])}n.push(C)}}};t.parseJsonXmlToHtml=function(t){var n=[];if(t&&t.e)if(1===t.e.length&&"Paragraph"===t.e[0].n){var r=document.createElement("span");i(t.e[0],r),n.push(r)}else a(t,n);else{if(t&&t.$type==="ChipSoft.SharePoint.Core.InvalidInputData, ".concat(e.PageManager.product,".Core")){var o=document.createElement("span");o.innerText="Ongeldige inhoud",o.classList.add("cs-error"),n.push(o)}}return n},t.getClosestColorCode=function(e){var t=["000000","2600FF","0040FF","0095FF","00D0FF","00FFFB","FFFFFF","FF0000","FF4545","FF8080","FFB0B0","FFD6DD","D1D1D1","11700D","1EB319","35ED2F","0AFF00","9CF299","B0B0B0","9C4713","D9773B","FF6200","F28E50","F5C6A9","5F615F","FCF400","B3AD14","E4F52F","DFEB5B","EAF0AA","3B3B3B","FF00E1","FF0088","BF00FF","9000FF","FF87CB","B48AF0","F88FAE","D083AF","D7B8E1","919AE2","91CC55","CECE51","7FB79A","70E39E","C0A560","94E3EA","69B6C8","B8CFBF","E7E7E7","FFFC70","FFF9BC","FFC34B","FFBD81","FE8972","F44741","DBDBDB","B6B6B6","929292","6D6D6D","494949","242424","FFFF00","D6D1B7","BEB78D","A69C62","7F7648","544F30","0000FF","1B3F6B","163459","122A47","0D1F36","091524","800080","3F77A7","34638B","2A4F6F","1F3B54","152838","AA3F3C","8E3532","722A28","55201E","391514","008000","87A845","718C39","5A702E","445422","2D3817","FFC0CB","6E548C","5B4675","49385E","372A46","251C2F","A52A2A","3898B2","2F7F94","266576","1C4C59","13333B","FFA500","F57D1B","D96709","AE5308","823E06","572904"];if(!e||6!==e.length)throw new Error("Invalid color: "+e);for(var n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),i=parseInt(e.substr(4,2),16),a=[],s=0;s<t.length;s++){var l=t[s],u=o(parseInt(l.substr(0,2),16),parseInt(l.substr(2,2),16),parseInt(l.substr(4,2),16),n,r,i);a.push(u)}return t[a.indexOf(Math.min.apply(Math,a))]};var o=function(e,t,n,r,i,a){var o=0;return o+=Math.pow(e-r,2),o+=Math.pow(t-i,2),o+=Math.pow(n-a,2),Math.sqrt(o)}}(e.CommonDocumentFormat||(e.CommonDocumentFormat={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=_createClass((function e(t,n){var r=this;_classCallCheck(this,e),this.filter=function(e){r.filterUpdateCallback(e)},this.reportContext=function(){return r.getReportContext()},this.filterUpdateCallback=t,this.getReportContext=n}));e.FilterConnectionData=t;var n=function(){function e(t,n,r,i){_classCallCheck(this,e),this.objectId=t,this._parameters=n,this._complete=r,this._cancel=i}return _createClass(e,[{key:"parameters",get:function(){return this._parameters}},{key:"complete",value:function(e,t,n){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._complete){r.next=3;break}return r.next=3,this._complete.call(this,e,t,n);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"cancel",value:function(e,t,n){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._cancel){r.next=3;break}return r.next=3,this._cancel.call(this,e,t,n);case 3:case"end":return r.stop()}}),r,this)})))}}]),e}();e.ObjectIdConnectionData=n;var r=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i,a,o){var s;return _classCallCheck(this,n),(s=t.call(this,e,r,a,o))._resolve=i,s}return _createClass(n,[{key:"resolve",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._resolve){e.next=4;break}return e.next=3,this._resolve.call(this);case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e,this)})))}}]),n}(n);e.ObjectIdTransformationConnectionData=r;var i=function(){function e(t,n,r,i){_classCallCheck(this,e),this.collectionReference=t,this._parameters=n,this._complete=r,this._cancel=i}return _createClass(e,[{key:"parameters",get:function(){return this._parameters}},{key:"complete",value:function(e,t,n){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._complete){r.next=3;break}return r.next=3,this._complete.call(this,e,t,n);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"cancel",value:function(e,t,n){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this._cancel){r.next=3;break}return r.next=3,this._cancel.call(this,e,t,n);case 3:case"end":return r.stop()}}),r,this)})))}}]),e}();e.CollectionReferenceConnectionData=i;var a=_createClass((function e(t){_classCallCheck(this,e),this.status=t}));e.StatusConnectionData=a;var o=function(){function e(t,n,r,i){_classCallCheck(this,e),this._objectId=t,this._objectParameters=n,this._canExecute=r,this._execute=i}return _createClass(e,[{key:"objectId",get:function(){return this._objectId}},{key:"objectParameters",get:function(){return this._objectParameters}},{key:"canExecute",value:function(e,t){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._canExecute.call(this,e,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"execute",value:function(e,t){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._execute.call(this,e,t);case 2:case"end":return n.stop()}}),n,this)})))}}]),e}();e.HiXActionProviderConnectionData=o,e.isTaskProviderConnectionData=function(e){return"task"in e&&"canExecute"in e},e.isExecutedTaskProviderConnectionData=function(e){return"executedTask"in e}}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t={},n={},r={},i=_createClass((function e(){_classCallCheck(this,e)})),a=_createClass((function e(){_classCallCheck(this,e),this.queue=[]}));function o(e,n){var r=t[e+"$"+n],i=[];if(!r)return i;for(var a=0;a<r.length;a++)i.push(r[a]);return i}e.provide=function(e,n,i){!function(e,n,i,o){var s=t[e+"$"+n];if(s)for(var l=0;l<s.length;l++){var u=s[l],c=u.consumerComponentId+"$"+u.consumerConnectionId,d=r[c];d&&d.callback?d.callback.call(null,i):d?d.queue.push({data:i,keepOnQueue:o}):((d=new a).queue.push({data:i,keepOnQueue:o}),r[c]=d)}}(e,n,i,arguments.length>3&&void 0!==arguments[3]&&arguments[3])},e.registerConnection=function(e,r,a,o){!function(e,r,a,o){var s=e+"$"+r,l=t[s];void 0===l&&(l=[],t[s]=l);var u=new i;u.consumerComponentId=a,u.consumerConnectionId=o,l.push(u);var c=a+"$"+o;n.hasOwnProperty(c)||(n[c]=[]),n[c].push([e,r])}(e,r,a,o)},e.registerConsumerCallback=function(e,t,n){!function(e,t,n){var i=e+"$"+t,o=r[i];if(o){if(o.callback)throw new Error("consumer callback is already registered for component '"+e+"' and connection '"+t+"'.");o.callback=n;var s=[];if(o.queue){for(var l=0;l<o.queue.length;l++)n.call(null,o.queue[l].data),o.queue[l].keepOnQueue&&s.push(o.queue[l]);o.queue=s.length?s:null}}else{var u=new a;u.callback=n,r[i]=u}}(e,t,n)},e.removeConsumerCallbacks=function(e){!function(e){for(var t in r)r.hasOwnProperty(t)&&t.startsWith(e+"$")&&delete r[t]}(e)},e.getConnectionProviderId=function(e,t){return function(e,t){var r=n[e+"$"+t];if(!r)return null;if(r.length>1)throw new Error("There are multiple providers connected");return r[0][0]}(e,t)},e.getConnectionProviderIds=function(e,t){return function(e,t){var r=n[e+"$"+t];if(!r)return[];for(var i=[],a=0;a<r.length;a++)i.push(r[a][0]);return i}(e,t)},e.getConnectionIdsByConsumerComponentId=function(e){return function(e){var t=[];for(var r in n)n.hasOwnProperty(r)&&r.startsWith(e+"$")&&t.push(r.substring(e.length+1));return t}(e)},e.getConnectionConsumerIds=function(e,t){return function(e,t){return o(e,t).map((function(e){return e.consumerComponentId}))}(e,t)},e.getConnectionConsumers=function(e,t){return o(e,t)},e.hasConnectedProviders=function(e,t){if(t)return n.hasOwnProperty(e+"$"+t);for(var r in n)if(n.hasOwnProperty(r)&&r.startsWith(e+"$"))return!0;return!1}}(e.ClientConnectionManager||(e.ClientConnectionManager={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){var t=function(){function t(e,n,r,i,a,o,s){if(_classCallCheck(this,t),e!==t.dummyDate&&(this.d=t.createDateOrNull(e,n,r,i,a,o,s),null===this.d||void 0===this.d))throw new Error("Invalid date")}return _createClass(t,[{key:"addTime",value:function(e){return this.addHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}},{key:"addHours",value:function(e,t,n,r){var i=this;return this.with((function(a){var o=i.getTime()+60*e*60*1e3;void 0!==t&&(o+=60*t*1e3,void 0!==n&&(o+=1e3*n,void 0!==r&&(o+=r))),a.setTime(o)}))}},{key:"addMinutes",value:function(e,t,n){return this.addHours(0,e,t,n)}},{key:"addSeconds",value:function(e,t){return this.addHours(0,0,e,t)}},{key:"addMilliseconds",value:function(e){return this.addHours(0,0,0,e)}},{key:"addDays",value:function(e){var t=this;return this.with((function(n){n.setDate(t.getDate()+e)}))}},{key:"addYears",value:function(e){var t=this;return this.with((function(n){n.setFullYear(t.getFullYear()+e)}))}},{key:"addMonths",value:function(e){var t=this;return this.with((function(n){n.setMonth(t.getMonth()+e)}))}},{key:"addQuarter",value:function(e){return this.addMonths(3*e)}},{key:"add",value:function(e,t){switch(t){case"year":return this.addYears(e);case"quarter":return this.addQuarter(e);case"month":return this.addMonths(e);case"week":return this.addDays(7*e);case"day":return this.addDays(e);case"hour":return this.addHours(e);case"minute":return this.addMinutes(e);case"second":return this.addSeconds(e);case"millisecond":return this.addMilliseconds(e);default:throw new Error("Unsupported DateUnit ".concat(t))}}},{key:"startOf",value:function(e){switch(e){case"year":return this.startOfYear();case"quarter":return this.startOfQuarter();case"month":return this.startOfMonth();case"week":return this.startOfWeek();case"isoWeek":return this.startOfIsoWeek();case"day":return this.startOfDay();case"hour":return this.startOfHour();case"minute":return this.startOfMinute();case"second":return this.startOfSecond();case"millisecond":return this;default:throw new Error("Unsupported DateUnit ".concat(e))}}},{key:"startOfYear",value:function(){return new t(this.getFullYear(),0,1,0,0,0)}},{key:"startOfQuarter",value:function(){return new t(this.getFullYear(),3*(this.getQuarter()-1),1,0,0,0,0)}},{key:"startOfMonth",value:function(){return new t(this.getFullYear(),this.getMonth(),1,0,0,0,0)}},{key:"startOfWeek",value:function(t){void 0===t&&(t=e.PageManager.locale.firstDayOfWeek);var n=this.startOfDay(),r=n.getDay();return r===t?n:r<t?n.addDays(-(7-t+r)):n.addDays(-(r-t))}},{key:"startOfIsoWeek",value:function(){return this.startOfWeek(1)}},{key:"startOfDay",value:function(){return this.with((function(e){return e.setHours(0,0,0,0)}))}},{key:"startOfHour",value:function(){var e=this;return this.with((function(t){return t.setHours(e.getHours(),0,0,0)}))}},{key:"startOfMinute",value:function(){var e=this;return this.with((function(t){return t.setHours(e.getHours(),e.getMinutes(),0,0)}))}},{key:"startOfSecond",value:function(){var e=this;return this.with((function(t){return t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),0)}))}},{key:"endOfYear",value:function(){return this.endOf("year")}},{key:"endOfQuarter",value:function(){return this.endOf("quarter")}},{key:"endOfMonth",value:function(){return this.endOf("month")}},{key:"endOfIsoWeek",value:function(){return this.endOf("isoWeek")}},{key:"endOfWeek",value:function(){return this.endOf("week")}},{key:"endOfDay",value:function(){return this.endOf("day")}},{key:"endOfMinute",value:function(){return this.endOf("minute")}},{key:"endOfSecond",value:function(){return this.endOf("second")}},{key:"endOf",value:function(e){return this.startOf(e).add(1,e).addMilliseconds(-1)}},{key:"isSameDay",value:function(n){return e.Utilities.DateUtil.isSameDay(this.d,t.toDateInternal(n))}},{key:"isSameMonth",value:function(n){return e.Utilities.DateUtil.isSameMonth(this.d,t.toDateInternal(n))}},{key:"isSameYear",value:function(n){return e.Utilities.DateUtil.isSameYear(this.d,t.toDateInternal(n))}},{key:"isBefore",value:function(n){return e.Utilities.DateUtil.isBefore(this.d,t.toDateInternal(n))}},{key:"isAfter",value:function(n){return e.Utilities.DateUtil.isAfter(this.d,t.toDateInternal(n))}},{key:"isEmptyDate",value:function(){return e.Core.isEmptyDate(this.d)}},{key:"getUTCFullYear",value:function(){return this.d.getUTCFullYear()}},{key:"getUTCMonth",value:function(){return this.d.getUTCMonth()}},{key:"getUTCMinutes",value:function(){return this.d.getUTCMinutes()}},{key:"getUTCSeconds",value:function(){return this.d.getUTCSeconds()}},{key:"getUTCMilliseconds",value:function(){return this.d.getUTCMilliseconds()}},{key:"getFullYear",value:function(){return this.d.getFullYear()}},{key:"getMonth",value:function(){return this.d.getMonth()}},{key:"getHours",value:function(){return this.d.getHours()}},{key:"getMinutes",value:function(){return this.d.getMinutes()}},{key:"getSeconds",value:function(){return this.d.getSeconds()}},{key:"getMilliseconds",value:function(){return this.d.getMilliseconds()}},{key:"getTime",value:function(){return this.d.getTime()}},{key:"getDate",value:function(){return this.d.getDate()}},{key:"getDay",value:function(){return this.d.getDay()}},{key:"getTimezoneOffset",value:function(){return this.d.getTimezoneOffset()}},{key:"getWeek",value:function(){return e.Utilities.DateUtil.getWeekNumber(this)}},{key:"getQuarter",value:function(){return e.Utilities.DateUtil.getQuarter(this)}},{key:"difference",value:function(t,n){return e.Utilities.DateUtil.difference(this,t,n)}},{key:"differenceInDays",value:function(t){return e.Utilities.DateUtil.differenceInDays(this,t)}},{key:"differenceInMonths",value:function(t){return e.Utilities.DateUtil.differenceInMonths(this,t)}},{key:"differenceInYears",value:function(t){return e.Utilities.DateUtil.differenceInYears(this,t)}},{key:"withoutTime",value:function(){return this.startOfDay()}},{key:"withFullYear",value:function(e,t,n){return this.with((function(r){return r.setFullYear(e,void 0===t?null:t,void 0===n?null:n)}))}},{key:"withMonth",value:function(e,t){return this.with((function(n){return n.setMonth(e,void 0===t?null:t)}))}},{key:"withDate",value:function(e){return this.with((function(t){return t.setDate(e)}))}},{key:"withHours",value:function(e,t,n,r){return t||(t=0),n||(n=0),r||(r=0),this.with((function(i){return i.setHours(e,t,n,r)}))}},{key:"withMinutes",value:function(e,t,n){return t||(t=0),n||(n=0),this.with((function(r){return r.setMinutes(e,t,n)}))}},{key:"withSeconds",value:function(e,t){return t||(t=0),this.with((function(n){return n.setSeconds(e,t)}))}},{key:"withMilliseconds",value:function(e){return this.with((function(t){return t.setMilliseconds(e)}))}},{key:"with",value:function(e){var n=new Date(this.d);return e(n),t.createWithoutClone(n)}},{key:"valueOf",value:function(){return this.d.valueOf()}},{key:"toMutableDate",value:function(){return new Date(this.getTime())}},{key:"toIso",value:function(){return e.Core.dateToIsoDateString(this.d)}},{key:"toIsoDateWithoutTime",value:function(){return this.toIso().split("T")[0]}},{key:"format",value:function(t,n){return e.Utilities.DateUtil.format(this.d,t,n)}}],[{key:"toDateInternal",value:function(e){return e instanceof t?e.d:e}},{key:"toDate",value:function(e){return e instanceof t?new Date(e.d):e}},{key:"fromDate",value:function(e){return e instanceof t?e:new t(e)}},{key:"tryFromDate",value:function(n){return n instanceof t?new e.ConstDateHolder(!0,n):t.tryCreate(n)}},{key:"fromIso",value:function(t){return e.Core.constDateFromIsoDateString(t).value()}},{key:"tryFromIso",value:function(t){return e.Core.constDateFromIsoDateString(t)}},{key:"fromIsoOrDefault",value:function(t,n){return t?e.Core.constDateFromIsoDateString(t).value():n}},{key:"tryCreate",value:function(t,n,r,i,a,o,s){var l=this.createDateOrNull(t,n,r,i,a,o,s);return null==l?new e.ConstDateHolder(!1,null):new e.ConstDateHolder(!0,this.createWithoutClone(l))}},{key:"createDateOrNull",value:function(e,t,n,r,i,a,o){if(null===e)return null;if(void 0!==e){var s;if("number"==typeof e){if(void 0===t)s=new Date(e);else if(s=new Date(e,t,void 0===n?null:n,void 0===r?null:r,void 0===i?null:i,void 0===a?null:a,void 0===o?null:o),e<100&&(s.setFullYear(e,t,void 0===n?null:n),s.setHours(void 0===r?null:r,void 0===i?null:i,void 0===a?null:a,void 0===o?null:o)),"number"==typeof o){if(s.getMilliseconds()!==o||s.getMinutes()!==i||s.getHours()!==r||s.getDate()!==n||s.getMonth()!==t||s.getFullYear()!==e)return null}else if("number"==typeof i){if(s.getMinutes()!==i||s.getHours()!==r||s.getDate()!==n||s.getMonth()!==t||s.getFullYear()!==e)return null}else if("number"==typeof r){if(s.getHours()!==r||s.getDate()!==n||s.getMonth()!==t||s.getFullYear()!==e)return null}else if("number"==typeof n){if(s.getDate()!==n||s.getMonth()!==t||s.getFullYear()!==e)return null}else if("number"==typeof t&&(1!==s.getDate()||s.getMonth()!==t||s.getFullYear()!==e))return null}else s=new Date(e.valueOf());return s instanceof Date&&!isNaN(s.valueOf())?s:null}}},{key:"createWithoutClone",value:function(e){var n=new t(this.dummyDate);return n.d=e,n}}]),t}();t.dummyDate=new Date(0),t.csEmptyDT=new t(101,0,1,0,0,0,0),t.csEmptyDate=new t(102,0,1,0,0,0,0),t.csBODate=new t(200,0,1,0,0,0,0),t.csEODate=new t(2999,11,31,0,0,0,0),t.csSQLBODate=new t(1753,0,1,0,0,0,0),e.ConstDate=t}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){var t=function(){function e(t,n){if(_classCallCheck(this,e),this.isValid=t,this.d=n,t&&!n)throw new Error("A valid ConstDate can't be null")}return _createClass(e,[{key:"value",value:function(){if(!this.isValid)throw new Error("Date is not valid");return this.d}},{key:"toMutableDate",value:function(){return this.isValid?this.d.toMutableDate():new Date(void 0)}}]),e}();t.csEmptyDT=new t(!0,e.ConstDate.csEmptyDT),t.csEmptyDate=new t(!0,e.ConstDate.csEmptyDate),t.csBODate=new t(!0,e.ConstDate.csBODate),t.csEODate=new t(!0,e.ConstDate.csEODate),t.csSQLBODate=new t(!0,e.ConstDate.csSQLBODate),t.invalid=new t(!1,null),e.ConstDateHolder=t}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=_createClass((function e(){_classCallCheck(this,e)}));t.isDefinedButNotFieldsIcon=function(e){return e&&e.indexOf("cs-fields-icon")<0},e.CsFieldsUtil=t;var n=_createClass((function e(){_classCallCheck(this,e)}));n.getColSpan=function(e){var t=e.viewNode,n=t.viewCommands.commandRef.filter((function(e){return"Object"===e.attr.scope&&e.attr.visible&&!e.attr.inExpander})),r=t.viewCommands.commandRef.filter((function(e){return"Object"===e.attr.scope&&e.attr.visible&&e.attr.inExpander}));return t.model.rowGrid&&t.model.rowGrid()?t.model.rowGrid().length+n.length+(t.model.multiselect()||t.model.singleselect()?1:0)+(!t.attr.hideExpanderIcon&&(t.model.expanderGrid().length>0||r.length>0||t.model.expanderRowTemplate)?1:0):1},n.selectCellClickFunction=function(e,t,n){var r=e.viewNode;return void 0!==r.model.selectable&&r.model.selectable()&&t.itemModel.selectCommandEnabled()&&r.model.selectCommand()?e.viewModel.onCommand.bind(n,r.model.selectCommand(),t.itemModel.selectCommandNode(),t):void 0!==r.model.selectable&&r.model.selectable()&&t.itemModel.canSelect()?function(){return t.itemModel.selectFunction(t)}:function(){return!1}},n.rowClickFunction=function(e,t,n,r,i,a,o){var s=e.viewNode;return void 0!==s.model.selectable&&s.model.selectable()&&t.itemModel.selectCommandEnabled()&&s.model.selectCommand()?e.viewModel.onCommand.bind(n,s.model.selectCommand(),t.itemModel.selectCommandNode(),t):void 0===s.model.selectable||s.model.selectable()||!(r.length>0||i.length>0||s.model.expanderRowTemplate&&(!s.model.expanderRowTemplate.visibleFunction||s.model.expanderRowTemplate.visibleFunction(a,o,t)))||s.attr.hideExpanderIcon?void 0!==s.model.selectable&&s.model.selectable()&&t.itemModel.canSelect()?function(){return t.itemModel.selectFunction(t)}:null:function(){return t.itemModel.expandFunction(t)}},e.CsListUtil=n}(e.Utilities||(e.Utilities={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n,r,i="full"===new Intl.DateTimeFormat("en-US",{dateStyle:"full"}).resolvedOptions().dateStyle,a={L:i?{dateStyle:"short"}:{day:"2-digit",month:"2-digit",year:"numeric"},LL:i?{dateStyle:"long"}:{day:"numeric",month:"long",year:"numeric"},LLLL:i?{dateStyle:"full",timeStyle:"short"}:{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"},llll:{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"},LT:i?{timeStyle:"short"}:{hour:"2-digit",minute:"2-digit"},LTS:i?{timeStyle:"medium"}:{hour:"2-digit",minute:"2-digit",second:"2-digit"},dd:{weekday:"short"},dddd:{weekday:"long"},MMMM:{month:"long"},YYYY:{year:"numeric"},"MMMM YYYY":{year:"numeric",month:"long"},"WWWW YYYY":{year:"numeric"},"Q YYYY":{year:"numeric"}},o=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"toDateWithoutTime",value:function(t){var n;return n="string"==typeof t?e.Core.dateFromIsoDateString(t):t,new Date(n.getFullYear(),n.getMonth(),n.getDate())}},{key:"isBefore",value:function(e,t){return e<t}},{key:"isAfter",value:function(e,t){return e>t}},{key:"isSameDay",value:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}},{key:"isSameMonth",value:function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}},{key:"isSameYear",value:function(e,t){return e.getFullYear()===t.getFullYear()}},{key:"differenceInYears",value:function(e,t){return this.difference(e,t,"year")}},{key:"differenceInMonths",value:function(e,t){return this.difference(e,t,"month")}},{key:"differenceInDays",value:function(e,t){return this.difference(e,t,"day")}},{key:"difference",value:function(t,n,r){if(t>n)return-this.difference(n,t,r);if(!this.millisecondsInUnit.hasOwnProperty(r))throw new Error("Unsupported unit: ".concat(r));var i=Math.ceil((t.getTime()-n.getTime())/this.millisecondsInUnit[r]),a=new e.ConstDate(t.getTime()).add(-i,r);if(a<n){do{a=a.add(1,r),i--}while(a<n);a>n&&i++}else if(a>n)do{a=a.add(-1,r),i++}while(a>n);return i}},{key:"getWeekNumber",value:function(e){var t=this.getStartOfFirstWeek(e.getFullYear()),n=this.differenceInDays(e,t);if(n>=364){var r=this.differenceInDays(e,this.getStartOfFirstWeek(e.getFullYear()+1));r>=0&&(n=r)}n<0&&(n=this.differenceInDays(e,this.getStartOfFirstWeek(e.getFullYear()-1)));var i=Math.ceil(n/7);return 1===e.getDay()&&i++,i}},{key:"getStartOfFirstWeek",value:function(t){for(var n=new e.ConstDate(t,0,1);1!==n.getDay();)n=n.addDays(1);return n.getDate()>4&&(n=n.addDays(-7)),n}},{key:"getQuarter",value:function(e){return Math.floor(e.getMonth()/4)+1}},{key:"valueOf",value:function(e){return e?e.valueOf():NaN}}]),t}();o.applyDateBugWorkaround=/iPad|iPhone|iPod/.test(navigator.userAgent)&&parseInt(null===(n=/OS (\d\d?)\D/.exec(navigator.userAgent))||void 0===n?void 0:n[1],10)<15||/Edge\//.test(navigator.userAgent)||parseInt(null===(r=/Chrome\/(\d\d?\d?)\D/.exec(navigator.userAgent))||void 0===r?void 0:r[1],10)<85||0!==parseInt(new Intl.DateTimeFormat("nl-NL",{hour:"numeric"}).format(new Date(1983,9,5,0,0,0)),10),o.format=function(t,n,r){var i,s;if(i="string"==typeof t?e.Core.dateFromIsoDateString(t):t,"string"==typeof n){if(!(s=a[n]))throw new Error("Date formatter '".concat(n,"' is not supported"))}else s=n;r||(r=e.PageManager.locale);var l=i;o.applyDateBugWorkaround&&(l=new Date(e.Core.dateToIsoDateString(i)+"Z"),s=Object.assign({timeZone:"UTC"},s));var u=new Intl.DateTimeFormat(r.name,s).format(l);return"WWWW YYYY"===n?u="".concat(r.week," ").concat(o.getWeekNumber(i)," ").concat(u):"Q YYYY"===n&&(u="".concat(r.q).concat(o.getQuarter(i)," ").concat(u)),u},o.millisecondsInUnit={year:31536e6,quarter:7776000001,month:2592e6,week:6048e5,isoWeek:6048e5,day:864e5,hour:36e5,minute:6e4,second:1e3,millisecond:1},t.DateUtil=o}(e.Utilities||(e.Utilities={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=_createClass((function e(){_classCallCheck(this,e)})),r=_createClass((function e(){_classCallCheck(this,e)})),i=_createClass((function e(){_classCallCheck(this,e)})),a=function(){function a(){var r=this;_classCallCheck(this,a),this._commands=new n,this._clientActions={},this.clientId="",this.uniqueId="",this.componentInstanceId="",this._isDisposed=!1,this._loading={},this.registerOnLoadingStartFunction=function(e){r._loadingStart=e},this.registerOnLoadingEndFunction=function(e){r._loadingEnd=e},this._templateIndex={},this.registerTemplate=function(e,t){r._templateIndex[e]=t},this.templateName=function(t,n,i,a){if(r._templateIndex.hasOwnProperty(t)){var o=r._templateIndex[t];if(!e.PageManager.knockoutPrecompile||!i||!i.precompilerContexts)return o;var s=i.precompilerContexts;return e.Client.getPrecompiledTemplateId(o,s,a,r._templateIndex)}if(!1===n)return null;throw new Error("Unknown template '"+t+"'.")},this.visible=ko.observable(!0),this.hide=function(){r.onHide()},this.show=function(){r.onShow()},this.refresh=function(){return __awaiter(r,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onRefresh();case 2:case"end":return e.stop()}}),e,this)})))},this.notifyLoadingStart=function(e,t,n){r._loadingStart&&r._loadingStart(e,t,n)},this.notifyLoadingStop=function(e,t){r._loadingEnd&&r._loadingEnd(e,t)},this._loadingCount={},this.execLoading=function(e,t){return __awaiter(r,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t||(t="main"),this.startLoading(t),void 0===this._loadingCount[t]&&(this._loadingCount[t]=0),this._loadingCount[t]++,n.prev=4,n.next=7,e();case 7:return n.prev=7,this._loadingCount[t]--,0===this._loadingCount[t]&&this.endLoading(t),n.finish(7);case 11:case"end":return n.stop()}}),n,this,[[4,,7,11]])})))},this.startLoading=function(e){e||(e="main"),r.setLoadingId(e,!0),"main"===e&&r.isLoading(!0)},this.endLoading=function(e){e||(e="main"),r.setLoadingId(e,!1),"main"===e&&r.isLoading(!1)},this.setLoadingId=function(e,t){if(r._loading.hasOwnProperty(e))r._loading[e][0](t);else{var n=ko.observable(t);r._loading[e]=[n,ko.pureComputed((function(){return!n()}),r)]}},this.getLoadingId=function(e){if(r._loading.hasOwnProperty(e))return r._loading[e];var t=ko.observable(!1),n=[t,ko.pureComputed((function(){return!t()}),r)];return r._loading[e]=n,n},this.initialized=ko.observable(!1),this.isLoading=ko.observable(!1),this.isNotLoading=ko.pureComputed((function(){return!r.isLoading()}),this),this.isItemLoading=function(e){return r.getLoadingId(e)[0]},this.isItemNotLoading=function(e){return r.getLoadingId(e)[1]},this.areAllItemsLoading=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Invalid number of arguments for isItemLoading()");return 1===t.length?r.getLoadingId(t[0])[0]:ko.pureComputed((function(){for(var e=!0,n=0;n<t.length;n++){var i=t[n];!0!==(0,r.getLoadingId(i)[0])()&&(e=!1)}return e}),r)},this.areAllItemsNotLoading=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Invalid number of arguments for isItemNotLoading()");return 1===t.length?r.getLoadingId(t[0])[1]:ko.pureComputed((function(){for(var e=!0,n=0;n<t.length;n++){var i=t[n];!0!==(0,r.getLoadingId(i)[1])()&&(e=!1)}return e}),r)},this.isAnyItemLoading=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Invalid number of arguments for isItemLoading()");return 1===t.length?r.getLoadingId(t[0])[0]:ko.pureComputed((function(){for(var e=!1,n=0;n<t.length;n++){var i=t[n];!0===(0,r.getLoadingId(i)[0])()&&(e=!0)}return e}),r)},this.isAnyItemNotLoading=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Invalid number of arguments for isItemNotLoading()");return 1===t.length?r.getLoadingId(t[0])[1]:ko.pureComputed((function(){for(var e=!1,n=0;n<t.length;n++){var i=t[n];!0===(0,r.getLoadingId(i)[1])()&&(e=!0)}return e}),r)},this.loadingBinding=function(e){return{viewModel:r,property:e||"main",isLoading:r.isItemLoading(e||"main")}},this.getLoadifiedCommandNode=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.PageManager.buttonLoaderClass;return n=Object.assign({},n),t&&n.attr.commandCssClass?n.attr.commandCssClass+=r:n.attr.commandCssClass=t?r:n.attr.commandCssClass.replace(r,""),n},this.getCommandIsEnabled=function(e,t){return ko.pureComputed((function(){if(!r._commands.hasOwnProperty(e))return!0;for(var n=r._commands[e],i=0;i<n.length;i++){if(!n[i].enabled)return!0;if(!0===n[i].enabled.call(r,t))return!0}return!1}))},this.getCommandVisible=function(e,t){return ko.pureComputed((function(){if(!r._commands.hasOwnProperty(e))return!0;for(var n=r._commands[e],i=0;i<n.length;i++){if(!n[i].visible)return!0;if(!0===n[i].visible.call(r,t))return!0}return!1}))},this.handleCustomCommandConnectionProvider=function(n,i,a){if(n.connectionProviders)for(var o=0;o<n.connectionProviders.length;o++){var s=n.connectionProviders[o];if(s&&s.connectionId){var l=null;if(a instanceof e.Views.ViewResultItemNode&&("CurrentObject"===s.objectParameterType||"CurrentObjectAndObjectParameter"===s.objectParameterType)&&a&&a.objectId&&a.objectId.ObjectIds.length>0){var u=l=a.objectId;e.ClientConnectionManager.provide(r.requestInfo.componentId,s.connectionId,new t.ObjectIdConnectionData(u))}if("ObjectParameter"===s.objectParameterType||"CurrentObjectAndObjectParameter"===s.objectParameterType){var c=i.attr[e.Views.CommandRefNodeAttributes.objectParameter];if(c&&c.viewResult&&c.viewResult.item&&1===c.viewResult.item.length){var d=c.viewResult.item[0].objectId;!(d&&d.ObjectIds.length>0)||l&&e.Core.areObjectIdsEqual(l,d)||e.ClientConnectionManager.provide(r.requestInfo.componentId,s.connectionId,new t.ObjectIdConnectionData(d))}}}}},this.dispose=function(){r._isDisposed||(r._isDisposed=!0,r.disposeInternal())}}return _createClass(a,[{key:"rootHtmlElement",value:function(){var e;return this.rootElement||(null===(e=this.componentInstance)||void 0===e?void 0:e.element)}},{key:"setRootHtmlElement",value:function(e){this.rootElement=e}},{key:"addResource",value:function(e,t){this._resources[e]=t}},{key:"setResources",value:function(e){this._resources=e}},{key:"getResource",value:function(e){return this._resources[e]}},{key:"getResourceOrDefault",value:function(e,t){var n=this._resources[e];return null==n?t:n}},{key:"formatResource",value:function(t){for(var n=this.getResourceOrDefault(t,""),r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return e.Utilities.StringUtil.format(String(n),i)}},{key:"formatResourceOrDefault",value:function(t,n){for(var r=this.getResourceOrDefault(t,n),i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];return e.Utilities.StringUtil.format(String(r),a)}},{key:"onHide",value:function(){this.visible(!1)}},{key:"onShow",value:function(){this.visible(!0)}},{key:"onRefresh",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})))}},{key:"generateFieldId",value:function(t){var n,r,i,a,o,s,l,u;if((null===(n=null==t?void 0:t.attr)||void 0===n?void 0:n[e.Views.ItemFieldNodeAttributes.name_])&&(null===(a=null===(i=null===(r=null==t?void 0:t.nav)||void 0===r?void 0:r.parent)||void 0===i?void 0:i.nav)||void 0===a?void 0:a.parent)){var c=t.attr[e.Views.ItemFieldNodeAttributes.name_],d=null===(l=null===(s=null===(o=t.nav.parent.nav.parent)||void 0===o?void 0:o.objectId)||void 0===s?void 0:s.ObjectIds)||void 0===l?void 0:l.join("_");if(!d)d="Idx_"+(null===(u=t.nav.parent.nav.parent.nav)||void 0===u?void 0:u.index);return this.clientId+"_"+d+"_"+c}e.PageManager.logInformation("generateFieldId: called on unsupported field")}},{key:"generateFieldName",value:function(t){var n=t.attr[e.Views.ItemFieldNodeAttributes.name_],r=t.nav.parent.nav.parent.objectId.ObjectIds.join("_");return this.clientId+"$"+r+"$"+n}},{key:"generateClientId",value:function(e){return"root"===e?this.clientId:this.clientId+"_"+e}},{key:"generateUniqueId",value:function(e){return this.clientId+"$"+e}},{key:"hasSubViewData",value:function(e){return e.hasOwnProperty("view")&&null!==e.view}},{key:"concatItemFields",value:function(e,t,n){return t||(t=" - "),this.concatItemFieldsInternal(e,t,n)}},{key:"concatItemFieldsInternal",value:function(t,n,r){for(var i=t.nav.parent.nav.parent,a="",o=0;o<i.viewFields.fieldRef.length;o++){var s=t.fields[i.viewFields.fieldRef[o].attr[e.Views.FieldRefNodeAttributes.name_]];if(!0===s.attr[e.Views.ItemFieldNodeAttributes.visible])if(this.hasSubViewData(s))for(var l=s.view.viewResult.item,u=0;u<l.length;u++){var c=this.concatItemFieldsInternal(l[u],n,r);c.length>0&&(a.length>0&&(a+=n),a+=c)}else{var d=e.Core.getItemFieldStringValue(s,r);d&&d.length>0&&(a.length>0&&(a+=n),a+=d)}}return a}},{key:"executeClientAction",value:function(e,t,n){if(this._clientActions.hasOwnProperty(e))return this._clientActions[e].callback.call(this,e,t,n)}},{key:"onCommand",value:function(n,r,i){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function a(){var o,s,l,u,c,d,f,h,m,p,v,g;return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=n.indexOf(":"),s=null,o>=0&&(s=n.substring(o+1),n=n.substring(0,o)),a.next=5,e.Client.handleViewCommandConfirmation(r);case 5:if(a.sent){a.next=7;break}return a.abrupt("return");case 7:if(l=!1,"commands.select"===n&&i){if((u=i).nav.parent)for(c=u.nav.parent,d=0;d<c.item.length;d++)(f=c.item[d]).itemModel&&f.itemModel[t.DefaultItemNodeModelProperties.selected]&&f.itemModel[t.DefaultItemNodeModelProperties.selected](!1);u.itemModel[t.DefaultItemNodeModelProperties.selected]&&u.itemModel[t.DefaultItemNodeModelProperties.selected](!0),l=!0}else"commands.multiselect"===n&&i&&((h=i).itemModel[t.DefaultItemNodeModelProperties.selected]&&(m=!0,void 0!==h.itemModel[t.DefaultItemNodeModelProperties.canSelect]&&!0!==ko.unwrap(h.itemModel[t.DefaultItemNodeModelProperties.canSelect])&&(m=!1),m&&h.itemModel[t.DefaultItemNodeModelProperties.selected](!h.itemModel[t.DefaultItemNodeModelProperties.selected]())),l=!0);if(l||!r||!0===ko.unwrap(r.attr[e.Views.CommandRefNodeAttributes.isEnabled])){a.next=12;break}return e.PageManager.logError("Attempt to execute non enabled command '".concat(n,"'.")),a.abrupt("return");case 12:if(this._commands.hasOwnProperty(n))for(p=this._commands[n],v=0;v<p.length;v++)g=!0,p[v].enabled&&(g=p[v].enabled.call(this,r)),g&&p[v].callback.call(this,n,s,r,i);case 13:case"end":return a.stop()}}),a,this)})))}},{key:"unregisterCommand",value:function(e,t){if(this._commands.hasOwnProperty(e))for(var n=this._commands[e].length-1;n>=0;n--)this._commands[e][n].id===t&&this._commands[e].splice(n,1)}},{key:"registerCommand",value:function(e,t,n){this._commands.hasOwnProperty(e)||(this._commands[e]=[]);var i=new r;return i.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),i.callback=t,n&&(n.enabled&&(i.enabled=n.enabled),n.visible&&(i.visible=n.visible)),this._commands[e].push(i),i.id}},{key:"withItemButtonLoader",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.PageManager.buttonLoaderClass;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var i,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.attr&&n.attr.name&&n&&n.nav.parent&&n.nav.parent.commandRef)){e.next=7;break}return i=n.nav.parent.commandRef,a=n.attr.name,e.next=5,this.withButtonLoader(t,i,a,r);case 5:e.next=9;break;case 7:return e.next=9,t();case 9:case"end":return e.stop()}}),e,this)})))}},{key:"withButtonLoader",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.PageManager.buttonLoaderClass;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){var a,o,s,l,u=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,o=null,s=n(),l=s.some((function(e,t){if(e.attr&&r===e.attr.name)return a=u.getLoadifiedCommandNode(!0,e,i),o=t,n.splice(o,1,a),!0})),void 0===a.attr.loadingCount&&(a.attr.loadingCount=0),a.attr.loadingCount++,e.prev=6,e.next=9,t();case 9:return e.prev=9,a.attr.loadingCount--,0===a.attr.loadingCount&&l&&(a=this.getLoadifiedCommandNode(!1,a,i),n.splice(o,1,a)),e.finish(9);case 13:case"end":return e.stop()}}),e,this,[[6,,9,13]])})))}},{key:"registerCustomCommands",value:function(t){var n=this;if(t){var r=function(){if(t.hasOwnProperty(i)&&!n._commands.hasOwnProperty(i)){var r=t[i];if("Select"===r.action)n.registerCommand(i,(function(e,t,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleCustomCommandConnectionProvider(r,i,a),e.next=3,this.onCommand("commands.select",i,a);case 3:case"end":return e.stop()}}),e,this)})))}));else if("MultiSelect"===r.action)n.registerCommand(i,(function(e,t,i,a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleCustomCommandConnectionProvider(r,i,a),e.next=3,this.onCommand("commands.multiselect",i,a);case 3:case"end":return e.stop()}}),e,this)})))}));else if("Navigate"===r.action){var a={};r.navDisabled&&"Hidden"===r.navDisabled.mode&&(a.visible=function(t){return e.Client.canNavigate(r.nav,t)}),a.enabled=function(t){return e.Client.canNavigate(r.nav,t)},n.registerCommand(i,(function(t,i,a,o){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.handleCustomCommandConnectionProvider(r,a,o),!(o instanceof e.Views.ViewResultItemNode)){t.next=6;break}return t.next=4,e.Client.handleViewCommandNavigation(a,r.nav,o);case 4:t.next=8;break;case 6:return t.next=8,e.Client.handleViewCommandNavigation(a,r.nav);case 8:case"end":return t.stop()}}),t,this)})))}),a)}}};for(var i in t)r()}}},{key:"unregisterClientAction",value:function(e){this._clientActions.hasOwnProperty(e)&&delete this._clientActions[e]}},{key:"registerClientAction",value:function(e,t){if(this._clientActions[e])throw new Error("client action callback is already registerd for action '"+e+"'.");var n=new i;n.id=e,n.callback=t,this._clientActions[e]=n}},{key:"createCommandNodeFromProperties",value:function(t,n){t.splice(0,t().length);for(var r=0;r<n.length;r++){var i=n[r];if(i.properties){var a=new e.Views.CommandRefNode;if(a.nav=new e.Views.ViewNodeNavigation,a.nav.viewModel=this,a.nav.index=r,i.attr)for(var o in i.attr)i.attr.hasOwnProperty(o)&&(a.attr[o]=i.attr[o]);a.attr[e.Views.CommandRefNodeAttributes.name_]=i.name,a.attr[e.Views.CommandRefNodeAttributes.scope]="None",a.attr[e.Views.CommandRefNodeAttributes.isEnabled]=i.isEnabled,a.attr[e.Views.CommandRefNodeAttributes.visible]=i.visible,a.attr[e.Views.CommandRefNodeAttributes.isFirstCommand]=!0,a.attr[e.Views.CommandRefNodeAttributes.isLastCommand]=!0,a.attr[e.Views.CommandRefNodeAttributes.isFirstCommandOfScope]=!0,a.attr[e.Views.CommandRefNodeAttributes.isLastCommandOfScope]=!0,a.attr[e.Views.CommandRefNodeAttributes.displayName]=i.properties.caption,a.attr.hasOwnProperty(e.Views.CommandRefNodeAttributes.commandCssClass)?a.attr[e.Views.CommandRefNodeAttributes.commandCssClass]+=" "+i.properties.commandCssClass:a.attr[e.Views.CommandRefNodeAttributes.commandCssClass]=i.properties.commandCssClass,a.attr.hasOwnProperty(e.Views.CommandRefNodeAttributes.disabledCommandCssClass)?a.attr[e.Views.CommandRefNodeAttributes.disabledCommandCssClass]+=" "+i.properties.disabledCommandCssClass:a.attr[e.Views.CommandRefNodeAttributes.disabledCommandCssClass]=i.properties.disabledCommandCssClass,a.attr[e.Views.CommandRefNodeAttributes.confirmationMessage]=i.properties.confirmationText,a.attr[e.Views.CommandRefNodeAttributes.imageUrl]=i.properties.imageUrl,a.attr[e.Views.CommandRefNodeAttributes.displayTemplate]=i.properties.displayTemplate,a.attr[e.Views.CommandRefNodeAttributes.isEmptyTargetPage]=e.Client.isEmptyTargetPage(a.attr[e.Views.CommandRefNodeAttributes.targetPage]),t.push(a)}}}},{key:"dateInputValueFromDateValue",value:function(t){return e.Core.dateInputValueFromDateValue(t)}},{key:"dateInputValueFromDateTimeValue",value:function(t){return e.Core.dateInputValueFromDateTimeValue(t)}},{key:"timeInputValueFromTimeValue",value:function(t){return e.Core.timeInputValueFromTimeValue(t)}},{key:"timeInputValueFromDateTimeValue",value:function(t){return e.Core.timeInputValueFromDateTimeValue(t)}},{key:"integerInputValueFromFieldValue",value:function(t){return e.Core.integerInputValueFromFieldValue(t)}},{key:"decimalInputValueFromFieldValue",value:function(t){return e.Core.decimalInputValueFromFieldValue(t)}},{key:"booleanInputValueFromFieldValue",value:function(t){return e.Core.booleanInputValueFromFieldValue(t)}},{key:"isEmptyDate",value:function(t){return e.Core.isEmptyDate(t)}},{key:"dateFromIsoDateString",value:function(t){return e.Core.dateFromIsoDateString(t)}},{key:"createViewDataModel",value:function(t,n,r){return e.Core.createViewDataModel(t,this,n,r)}},{key:"isDisposed",value:function(){return this._isDisposed}},{key:"disposeInternal",value:function(){}}]),a}();t.ViewModelBase=a}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=_createClass((function e(){_classCallCheck(this,e),this.title="",this.callback=null,this.isDefault=ko.observable(!1),this.commandCssClass=ko.observable("")}));t.DialogCommand=n,t.isTemplateDialogControllerHost=function(e){return"function"==typeof e.registerTemplateController};var r=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).vm=e,r.templateName=function(e){return r.vm.templateName(e)},r.setRootHtmlElement=function(e){r.dialogElement=e},Object.defineProperty(_assertThisInitialized(r),"dialogElement",{enumerable:!1,writable:!0}),r}return _createClass(n,[{key:"onOpened",value:function(){}},{key:"onClosed",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"onClosing",value:function(){}},{key:"rootHtmlElement",value:function(){return this.dialogElement}}]),n}(e.Core.ViewModelBase);t.DialogTemplateViewModelBase=r;var i=_createClass((function e(t){var n=this;if(_classCallCheck(this,e),this.idPrefix="csDialogId",this.titleClass=ko.observable(""),this.dialogId=ko.observable(null),this.zIndex=ko.observable(null),this.visible=ko.observable(!1),this.title=ko.observable(""),this.subTitle=ko.observable(""),this.message=ko.observable(""),this.dialogClass=ko.observable(""),this.showCommands=ko.observable(!1),this.showClose=ko.observable(!1),this.showClickScreen=ko.observable(!0),this.clickScreenCloses=ko.observable(!1),this.isDraggable=ko.observable(!1),this.commands=ko.observableArray([]),this.viewCommands=ko.observableArray([]),this.onClose=function(){},this.onClosing=function(){},this.onShow=function(){},this.hidePadding=ko.observable(!1),this.neverFullScreen=ko.observable(!1),this.alwaysFullScreen=ko.observable(!1),this.dontCoverNav=ko.observable(!1),this.standardText=null,t){for(var r in t)if(t.hasOwnProperty(r)&&this.hasOwnProperty(r)){var i=t[r],a=this[r];ko.isObservable(i)&&ko.isObservable(a)?this[r]=i:ko.isObservable(a)?this[r](i):ko.isObservable(i)?this[r]=i():this[r]=i}void 0===ko.unwrap(t.showCommands)&&(this.showCommands=ko.pureComputed((function(){return!(!n.commands()||!n.commands().length)||!(!n.viewCommands()||!n.viewCommands().length)})))}}));t.DialogOptions=i;var a=function(t){_inherits(r,t);var n=_createSuper(r);function r(t){var i;_classCallCheck(this,r),(i=n.call(this,t)).isInitialized=!1,i.previouslyFocussedElement=null,i.navZIndex=90,i.resolve=function(){return"no resolver specified"},i.reject=function(){return"no rejecter specified"},Object.defineProperty(_assertThisInitialized(i),"dialogElement",{enumerable:!1,writable:!0}),Object.defineProperty(_assertThisInitialized(i),"previouslyFocussedElement",{enumerable:!1,writable:!0});var a=e.PageManager.ensureCsRoot(),o=e.PageManager.createNewDialogRoot(a);return i.dialogElement=o[0],i.standardText={confirm:o.data("i8Confirm")||"Ok",cancel:o.data("i8Cancel")||"Annuleren",close:o.data("i8Close")||"Sluiten"},i.visible()&&i.showDialog(),i.dontCoverNav.subscribe((function(e){a.css("z-index",e?""+(i.navZIndex-1):"")})),i.dontCoverNav.valueHasMutated(),i}return _createClass(r,[{key:"rootHtmlElement",value:function(){return this.dialogElement}},{key:"init",value:function(){this.isInitialized||(this.isInitialized=!0,ko.applyBindings(this,this.dialogElement))}},{key:"showDialog",value:function(){var t=this;this.init();var n=e.PageManager.ensureCsRoot(),r=_slicedToArray(e.PageManager.createNewLayerIdx(n),2),i=r[0],a=r[1];this.dialogId(a),null!==this.zIndex()&&void 0!==this.zIndex()&&"number"==typeof this.zIndex()||this.zIndex(i),n.parent().css("z-index",""),document.activeElement&&(this.previouslyFocussedElement=document.activeElement),this.visible(!0),this.onShow&&this.onShow();var o=this.dialogElement.querySelector(".csDialogMain");o&&o instanceof HTMLDivElement&&(this.isDraggable()?this.dragDialog(o):o.onmousedown=null),jQuery(o).on("keyup.forModal",(function(e){"Escape"===e.key&&t.showClose()&&(jQuery(o).off("keyup.forModal"),t.closeDialog(null))})),jQuery(o).focus();var s=function(){o=t.dialogElement.querySelector(".csDialogMain");var e="button,[href],input,select,textarea,[tabindex]:not([tabindex='-1'])".split(",").map((function(e){return e+":visible"})).join(","),n=jQuery(jQuery(o).find(e)[0]),r=jQuery(o).find(e);return[n,jQuery(r[r.length-1]),r]};setTimeout((function(){var e=_slicedToArray(s(),3),n=e[0],r=e[1],i=e[2];jQuery(document).on("keydown",(function(e){if("Tab"===e.key||9===e.keyCode){var t=_slicedToArray(s(),3);n=t[0],r=t[1],i=t[2],e.shiftKey?document.activeElement===n[0]&&(r.focus(),e.preventDefault()):document.activeElement===r[0]&&(n.focus(),e.preventDefault())}}));var a=(o=t.dialogElement.querySelector(".csDialogMain"))&&o.querySelector(".cs-btn-default[href], .cs-btn-default[tabindex]:not([tabindex='-1']");a?jQuery(a).focus():n.is(".csDialogCloseButton")&&i.length>1?i[1].focus():n.focus()}),0)}},{key:"executeCommand",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.callback){t.next=6;break}return t.next=3,e.callback(this.resolve,this.reject);case 3:if(!1!==t.sent){t.next=6;break}return t.abrupt("return",!1);case 6:return t.next=8,this.closeDialog();case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"hideDialog",value:function(){this.dontCoverNav(!1),this.visible(!1),this.previouslyFocussedElement&&jQuery(this.previouslyFocussedElement).focus()}},{key:"closeDialog",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.dontCoverNav(!1),this.onClosing&&this.onClosing(e),this.dialogElement&&ko.removeNode(this.dialogElement),this.previouslyFocussedElement&&jQuery(this.previouslyFocussedElement).focus(),!this.onClose){t.next=7;break}return t.next=7,this.onClose(e);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"dragDialog",value:function(e){var t,n,r,i,a,o,s=e.querySelector("div.csDialogHeader"),l=s||e,u=e.parentElement,c=!1,d=0,f=0;function h(e){a&&(d*=u.clientWidth/a),o&&(f*=u.clientHeight/o),"touchstart"===e.type&&e instanceof TouchEvent?(r=e.touches[0].clientX-d,i=e.touches[0].clientY-f):e instanceof MouseEvent&&(r=e.clientX-d,i=e.clientY-f),l.contains(e.target)&&(c=!0)}function m(e){r=t,i=n,c=!1}function p(s){c&&(s.preventDefault(),"touchmove"===s.type&&s instanceof TouchEvent?(t=s.touches[0].clientX-r,n=s.touches[0].clientY-i):s instanceof MouseEvent&&(t=s.clientX-r,n=s.clientY-i),d=t,f=n,a=u.clientWidth,o=u.clientHeight,function(t,n){var r=e.clientWidth,i=e.clientHeight,s=a/2+t*a-r/2<=0,l=a/2+t*a+r/2>=a,u=o/2+n*o-i/2<=0,c=o/2+n*o+i/2>=o;if(s||l){var d=(a-r)/(.02*a);e.style.left=s?-d+"%":d+"%"}else e.style.left=100*t+"%";if(u||c){var f=(o-i)/(.02*o);e.style.top=u?-f+"%":f+"%"}else e.style.top=100*n+"%"}(t/a,n/o))}u.addEventListener("touchstart",h,!1),u.addEventListener("touchend",m,!1),u.addEventListener("touchmove",p,!1),u.addEventListener("mousedown",h,!1),u.addEventListener("mouseup",m,!1),u.addEventListener("mousemove",p,!1)}}]),r}(i);t.DialogViewModel=a}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){!function(e){e.GetOrCreatePatientLibraryItemWithContextObject="GetOrCreatePatientLibraryItemWithContextObject",e.MarkEducationItemAsOpened="MarkEducationItemAsOpened",e.DomainRequiresConsent="DomainRequiresConsent",e.AcceptCookiesForDomain="AcceptCookiesForDomain"}(t.Actions||(t.Actions={})),function(e){e.NewTab="NewTab",e.Inline="Inline",e.Dialog="Dialog",e.DialogFullscreen="DialogFullscreen"}(t.EducationItemOpenMode||(t.EducationItemOpenMode={}));var n=function(){function t(e,n,r,i,a,o,s,l){_classCallCheck(this,t),this.host=e,this.objectId=n,this.service=r,this.settings=i,this.source=a,this.name=o,this.mediatype=s,this.assignToPatient=l,this.confirmedSeen=!1,this.confirmedRead=!1,this.hasBtn=ko.observable(!0),this.showCookieNotice=ko.observable(!1),this.sourceIsValidUrl=!0,this.localStorageCookieDomainConsentKey="__myconsent"}return _createClass(t,[{key:"clone",value:function(){var e=new t(this.host,this.objectId,this.service,this.settings,this.source,this.name,this.mediatype,this.assignToPatient);return e.domain=this.domain,e.assignToPatient=this.assignToPatient,e.documentIcon=this.documentIcon,e.confirmedRead=this.confirmedRead,e.confirmedSeen=this.confirmedSeen,e.documentOpenMode=this.documentOpenMode,e.sourceIsValidUrl=this.sourceIsValidUrl,e.hasBtn=ko.observable(!1),e.showCookieNotice=this.showCookieNotice,e}},{key:"confirmSeenDocument",value:function(){var t;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function n(){var r;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.PageManager.isPatientOriented&&!this.confirmedSeen){n.next=2;break}return n.abrupt("return");case 2:if(r={preventDefault:!1},null===(t=this.onConfirmSeenDocument)||void 0===t||t.call(this,this,r),this.confirmedSeen=!0,r.preventDefault){n.next=8;break}return n.next=8,this.markAsOpened();case 8:case"end":return n.stop()}}),n,this)})))}},{key:"markAsOpened",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.assignToPatient&&!this.showCookieNotice()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.service.action("MarkEducationItemAsOpened")({itemId:this.objectId});case 4:case"end":return e.stop()}}),e,this)})))}},{key:"openDocument",value:function(){var t,n;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function i(){var a,o,s,l,u=this;return _regeneratorRuntime().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a={preventDefault:!1},null===(t=this.onOpenDocument)||void 0===t||t.call(this,this,a),a.preventDefault||this.confirmSeenDocument(),"NewTab"!==this.documentOpenMode){i.next=8;break}return window.open(this.source,"_blank"),i.next=7,null===(n=this.onCloseDocument)||void 0===n?void 0:n.call(this,this,a);case 7:return i.abrupt("return");case 8:return o={title:this.name,clickScreenCloses:!0,showClose:!0,onClose:function(){return __awaiter(u,void 0,void 0,_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.onCloseDocument)||void 0===t?void 0:t.call(this,this,a);case 2:case"end":return e.stop()}}),e,this)})))}},"DialogFullscreen"===this.documentOpenMode?o.alwaysFullScreen=!0:o.dialogClass="csDialogWidthL",i.t0=this,i.next=13,this.getDomainRequiresConsent();case 13:i.t1=i.sent,i.t0.showCookieNotice.call(i.t0,i.t1),s=new r(this,!0),l=new e.PageManager.KoTemplateDialogOptions("educationItemDialogContentTemplate",s,o),e.PageManager.createKoTemplateDialog(l).openDialog();case 18:case"end":return i.stop()}}),i,this)})))}},{key:"setDomainFromSource",value:function(){try{this.domain=new URL(this.source).hostname.replace("www.","")}catch(t){e.PageManager.logError(t),this.sourceIsValidUrl=!1}}},{key:"acceptCookies",value:function(){var e;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.service.action("AcceptCookiesForDomain")({domain:this.domain,localStorage:null!==(e=localStorage.getItem(this.localStorageCookieDomainConsentKey))&&void 0!==e?e:""});case 2:return n=t.sent,localStorage.setItem(this.localStorageCookieDomainConsentKey,n),this.showCookieNotice(!1),t.next=7,this.markAsOpened();case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getDomainRequiresConsent",value:function(){var e;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.domain){t.next=4;break}return t.next=3,this.service.action("DomainRequiresConsent")({domain:this.domain,localStorage:null!==(e=localStorage.getItem(this.localStorageCookieDomainConsentKey))&&void 0!==e?e:""});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"fullScreenDocument",value:function(){var t=new r(this),n=new e.PageManager.KoTemplateDialogOptions("educationItemDialogContentTemplate",t,{title:this.name,clickScreenCloses:!0,showClose:!0,alwaysFullScreen:!0});e.PageManager.createKoTemplateDialog(n).openDialog()}}]),t}();t.EducationItemViewModel=n;var r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,e),this.item=t.clone(),this.item.hasBtn=ko.observable(n)}return _createClass(e,[{key:"templateName",value:function(e){return this.item.host.templateName(e)}},{key:"setRootHtmlElement",value:function(e){this.item.host.setRootHtmlElement(e)}}]),e}()}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"createFromLinkedMedia",value:function(r,i,a,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function l(){var u,c,d,f=this;return _regeneratorRuntime().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.Utilities.ExchangeUtil.isRootObject(i)){l.next=2;break}return l.abrupt("return",[]);case 2:return u=t.ExchangeCollectionHolder.createOrDefault(i),c=[{key:"Image",value:"Inline"},{key:"YouTube",value:"Inline"},{key:"iFrame",value:"DialogFullscreen"}],l.next=6,Promise.all(u.toObjectArray().map((function(e){return __awaiter(f,void 0,void 0,_regeneratorRuntime().mark((function t(){var i,l;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.getObject("LibraryItem"),l=e.getValue("AssignToPatient"),t.next=4,n.createWithLibraryItem(r,i.object,a,i.util,o,s,l,c);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))})));case 6:return d=l.sent,l.abrupt("return",d.filter((function(e){return!!e})));case 8:case"end":return l.stop()}}),l)})))}},{key:"isFilledLinkedMedia",value:function(n){return e.Utilities.ExchangeUtil.isRootObject(n)&&t.ExchangeCollectionHolder.createOrDefault(n).countCollection()>0}},{key:"markAsOpened",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.filter((function(e){return"Inline"===e.documentOpenMode})).map((function(e){return e.markAsOpened()})));case 2:case"end":return t.stop()}}),t)})))}},{key:"createWithLibraryItem",value:function(t,r,i,a,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0;return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function c(){var d,f,h,m,p,v;return _regeneratorRuntime().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!l){c.next=9;break}return c.next=3,o.action("GetOrCreatePatientLibraryItemWithContextObject")({itemId:r.ObjectId,contextId:i});case 3:r=c.sent,a=new e.Utilities.ExchangeUtil(r),f=n.getDocumentSource(r,a),d=a.getField(r,"CalculatedWeblink").Value.Value,c.next=11;break;case 9:f=n.getDocumentSource(r,a),d=a.getField(f,"CalculatedWeblink").Value.Value;case 11:return h=a.getField(f,"Naam").Value.Value,m=a.getField(f,"MediaType").Value.Value,p=n.getDocumentOpenMode(m,u),v=n.create(t,r,m,d,h,o,s,l,p),c.t0=v,c.next=18,v.getDomainRequiresConsent();case 18:return c.t1=c.sent,c.t0.showCookieNotice.call(c.t0,c.t1),c.abrupt("return",v);case 21:case"end":return c.stop()}}),c)})))}},{key:"createWithPatientLibraryItem",value:function(t,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5?arguments[5]:void 0;if("WEBPORTA_PATBIBITEM"!==r.ObjectId.ClassId)return e.PageManager.logInformation("Object should be of class ".concat("WEBPORTA_PATBIBITEM")),null;var l=n.getDocumentSource(r,i),u=i.getField(r,"CalculatedWeblink").Value.Value,c=i.getField(l,"Naam").Value.Value,d=i.getField(l,"MediaType").Value.Value,f=n.getDocumentOpenMode(d,s);return n.create(t,r,d,u,c,a,o,!1,f)}},{key:"create",value:function(r,i,a,o,s,l){var u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},d=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"NewTab",h=null===(u=n.mediaTypeIconMap.find((function(e){return e.key===a})))||void 0===u?void 0:u.value,m=new t.EducationItemViewModel(r,i.ObjectId,l,c,o,s,a,d);return m.setDomainFromSource(),m.documentIcon=null!=h?h:e.Client.IconType.Document,m.documentOpenMode=f,-1!==n.mediaTypeEducationItemHandlerMapping.indexOf(a)&&(m.source=e.Client.combinePath(e.PageManager.webRelativeUrl,e.Client.addHiXObjectReferenceQueryParameter("/_layouts/15/ChipSoft/EducationItemPage.ashx",i.ObjectId))),m}},{key:"getDocumentSource",value:function(t,n){var r=n.getField(t,"BronItem").Value.Value;return e.Core.isNullOrVoid(r.ObjectId)?t:r}},{key:"getDocumentOpenMode",value:function(e,t){var n="NewTab",r=null==t?void 0:t.find((function(t){return t.key===e}));return void 0!==r&&(n=r.value),n}}]),n}();n.mediaTypeIconMap=[{key:"Image",value:e.Client.IconType.ImageFile},{key:"PDF",value:e.Client.IconType.Pdf},{key:"Video",value:e.Client.IconType.Video},{key:"Website",value:e.Client.IconType.Globe},{key:"iFrame",value:e.Client.IconType.Globe},{key:"YouTube",value:e.Client.IconType.Video}],n.mediaTypeEducationItemHandlerMapping=["YouTube","Image","iFrame"],n.GetLinkedMediaService=function(t){return new e.Core.ComponentRequestServiceProxy(t.componentActionRequest.bind(t),t)},t.EducationItemViewModelFactory=n}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(){function n(t,r){_classCallCheck(this,n),this.util=r,this.collection=t instanceof n?t.collection:t,this.util||(this.util=new e.Utilities.ExchangeUtil(this.collection))}return _createClass(n,[{key:"enumerateCollection",value:function(e){var n=this;this.collection&&this.util.enumerateCollection(this.collection,(function(r,i){e(new t.ExchangeObjectHolder(r,n.util),i)}))}},{key:"enumerateCollectionAsync",value:function(e){var n=this;if(this.collection)return this.util.enumerateCollectionAsync(this.collection,(function(r,i){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(new t.ExchangeObjectHolder(r,this.util),i);case 2:case"end":return n.stop()}}),n,this)})))}))}},{key:"toObjectArray",value:function(){var e=this,n=[];return this.util.enumerateCollection(this.collection,(function(r){n.push(new t.ExchangeObjectHolder(r,e.util))})),n}},{key:"countCollection",value:function(){var e=this.collection;return e?this.util.collectionItemCount(e):0}},{key:"mapCollection",value:function(e){var t=[];return this.enumerateCollection((function(n,r){t.push(e(n,r))})),t}},{key:"find",value:function(e){var t;return this.enumerateCollection((function(n,r){e(n)&&(t=n,r.break=!0)})),t}},{key:"findById",value:function(t){return this.find((function(n){return e.Core.areObjectIdsEqual(n.object.ObjectId,t)}))}},{key:"isNull",value:function(){return!this.collection}}],[{key:"createOrDefault",value:function(e){return e?new n(e):null}}]),n}();t.ExchangeCollectionHolder=n}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(){function t(n,r,i){_classCallCheck(this,t),this.util=r,this.object=n instanceof t?n.object:n,this.object&&!this.util&&(this.util=new e.Utilities.ExchangeUtil(this.object)),i&&this.object&&(this.object=this.util.getField(this.object,i).Value.Value)}return _createClass(t,[{key:"getField",value:function(e){return this.util.getField(this.object,e)}},{key:"getFields",value:function(e){return this.util.getFields(this.object,e)}},{key:"getValue",value:function(e){var t=this.util.getField(this.object,e);if(t&&t.Value)return t.Value.Value}},{key:"getObject",value:function(e){var n=this.getValue(e);if(n)return new t(n,this.util)}},{key:"enumerateCollection",value:function(e,n){var r=this;this.util.enumerateCollection(this.getValue(e),(function(e,i){n(new t(e,r.util),i)}))}},{key:"enumerateCollectionAsync",value:function(e,n){var r=this;return this.util.enumerateCollectionAsync(this.getValue(e),(function(e,i){return __awaiter(r,void 0,void 0,_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n(new t(e,this.util),i);case 2:case"end":return r.stop()}}),r,this)})))}))}},{key:"getCollection",value:function(e){var n=this,r=[],i=this.getValue(e);if(i)return this.util.enumerateCollection(i,(function(e){r.push(new t(e,n.util))})),r}},{key:"countCollection",value:function(e){var t=this.getValue(e);return t?this.util.collectionItemCount(t):0}},{key:"mapCollection",value:function(e,t){var n=[];return this.enumerateCollection(e,(function(e,r){n.push(t(e,r))})),n}},{key:"getObjectId",value:function(e){var t;return null===(t=this.getValue(e))||void 0===t?void 0:t.ObjectId}},{key:"isNullOrVoid",value:function(e){var t=this.object;return e&&(t=this.getValue(e)),!(t&&t.ObjectId&&t.ObjectId.ObjectIds.length>0)}},{key:"clone",value:function(){var n=this.util.cloneObject(this.object);return new t(n,new e.Utilities.ExchangeUtil(n))}}],[{key:"createOrDefault",value:function(e){return e?new t(e):null}}]),t}();t.ExchangeObjectHolder=n}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=_createClass((function e(){_classCallCheck(this,e)}));t.ExchangeUtilField=n;var r=_createClass((function e(){_classCallCheck(this,e),this.isCollection=!1,this.resultCollection=[],this.resultObject=null,this.parts=[]})),i=_createClass((function e(){_classCallCheck(this,e),this.isCollection=!1,this.resultCollection1=[],this.resultCollection2=[],this.parts=[],this.lastIsValue=!0,this.secondTolastIsValue=!0})),a=function(){function t(e){_classCallCheck(this,t),this._oldManager=e,this._newManager={Data:[]},this._processedHolders=[]}return _createClass(t,[{key:"getFinalManager",value:function(){for(var e=0;e<this._processedHolders.length;e++)this._newManager.Data.push({Key:this._processedHolders[e].Key,Value:this._processedHolders[e].Value});return this._newManager}},{key:"storeHolder",value:function(t,n,r){for(var i=0;i<this._processedHolders.length;i++)if(e.Core.areObjectIdsEqual(this._processedHolders[i].Key.ObjectId,t)&&this._processedHolders[i].Key.ExtraKey===n)throw new Error("Duplicate holder: ".concat(t.ClassId," ").concat(t.ObjectIds?t.ObjectIds.join(", "):""));this._processedHolders.push({Key:{ObjectId:t,ExtraKey:n},Value:r})}},{key:"informRequiredData",value:function(t,n){for(var r=0;r<this._processedHolders.length;r++)if(e.Core.areObjectIdsEqual(this._processedHolders[r].Key.ObjectId,t)&&this._processedHolders[r].Key.ExtraKey===n)return;for(var i=null,a=0;a<this._oldManager.Data.length;a++)if(e.Core.areObjectIdsEqual(this._oldManager.Data[a].Key.ObjectId,t)&&this._oldManager.Data[a].Key.ExtraKey===n){i=this._oldManager.Data[a].Value;break}if(!i)throw new Error("Holder not found: ".concat(t.ClassId," ").concat(t.ObjectIds?t.ObjectIds.join(", "):""));this.cloneHolder(i,t,n)}},{key:"cloneHolder",value:function(e,t,n){var r={Locked:e.Locked,Values:{Items:{},Locked:e.Values.Locked},ExchangeCommands:null,ObjectData:null};if(e.ObjectData&&(r.ObjectData=Object.assign({},e.ObjectData)),e.ExchangeCommands){r.ExchangeCommands={Items:[],Locked:e.ExchangeCommands.Locked};for(var i=0;i<e.ExchangeCommands.Items.length;i++)r.ExchangeCommands.Items.push(Object.assign({},e.ExchangeCommands.Items[i]))}for(var a in this.storeHolder(t,n,r),e.Values.Items)if(e.Values.Items.hasOwnProperty(a)){var o=e.Values.Items[a];if(r.Values.Items[a]={IsTemplateData:o.IsTemplateData,Locked:o.Locked,FieldData:null,Value:null},o.FieldData&&(r.Values.Items[a].FieldData=Object.assign({},o.FieldData)),o.Value){var s={ValueType:o.Value.ValueType,Value:null};o.Value.Value&&("Object"===o.Value.ValueType?s.Value=this.cloneObjectInternal(o.Value.Value):"Collection"===o.Value.ValueType?s.Value=this.cloneCollectionInternal(o.Value.Value,null,null):s.Value=o.Value.Value),r.Values.Items[a].Value=s}}}},{key:"cloneObjectInternal",value:function(e){var t={DataTemplate:e.DataTemplate,ObjectId:e.ObjectId,ExtraKey:e.ExtraKey,Locked:e.Locked,Manager:null,ViewVersion:null};return e.ViewVersion&&(this.isArray(e.ViewVersion)?t.ViewVersion=_toConsumableArray(e.ViewVersion):t.ViewVersion=[e.ViewVersion]),this.informRequiredData(e.ObjectId,e.ExtraKey),t}},{key:"cloneCollectionInternal",value:function(e,t,n){var r={ClassId:e.ClassId,DataTemplate:e.DataTemplate,Items:[],Locked:e.Locked,ExchangeCommands:null,PageInformation:null,ViewVersion:null,Manager:null};if(e.ViewVersion&&(this.isArray(e.ViewVersion)?r.ViewVersion=_toConsumableArray(e.ViewVersion):r.ViewVersion=[e.ViewVersion]),e.PageInformation&&(r.PageInformation=Object.assign({},e.PageInformation)),e.ExchangeCommands){r.ExchangeCommands={IgnoreCase:e.ExchangeCommands.IgnoreCase,Locked:e.ExchangeCommands.Locked,Items:[]};for(var i=0;i<e.ExchangeCommands.Items.length;i++)r.ExchangeCommands.Items.push(Object.assign({},e.ExchangeCommands.Items[i]))}if(t||n){for(var a=[],o=0;o<e.Items.length;o++)if(!n||n(e.Items[o])){var s=this.cloneObjectInternal(e.Items[o]);a.push(s)}t&&a.sort(t);for(var l=0;l<a.length;l++)r.Items.push(a[l])}else for(var u=0;u<e.Items.length;u++){var c=this.cloneObjectInternal(e.Items[u]);r.Items.push(c)}return r}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}}],[{key:"cloneObject",value:function(e,n){if(!e.hasOwnProperty("ObjectId")||!e.hasOwnProperty("ExtraKey"))throw new Error("Object is not an exchange object");var r=e;if(!r.Manager)throw new Error("Root object does not contain a data manager.");var i=new t(r.Manager),a=i.cloneObjectInternal(n);return a.Manager=i.getFinalManager(),a}},{key:"cloneCollection",value:function(e,n){if(!e.hasOwnProperty("ClassId")||!e.hasOwnProperty("Items"))throw new Error("Object is not an exchange collection");var r=e;if(!r.Manager)throw new Error("Root object does not contain a data manager.");var i=new t(r.Manager),a=i.cloneCollectionInternal(n,null,null);return a.Manager=i.getFinalManager(),a}},{key:"sortCollection",value:function(e,n,r){if(!e.hasOwnProperty("ClassId")||!e.hasOwnProperty("Items"))throw new Error("Object is not an exchange collection");var i=e;if(!i.Manager)throw new Error("Root object does not contain a data manager.");var a=new t(i.Manager),o=a.cloneCollectionInternal(n,r,null);return o.Manager=a.getFinalManager(),o}},{key:"filterCollection",value:function(e,n,r){if(!e.hasOwnProperty("ClassId")||!e.hasOwnProperty("Items"))throw new Error("Object is not an exchange collection");var i=e;if(!i.Manager)throw new Error("Root object does not contain a data manager.");var a=new t(i.Manager),o=a.cloneCollectionInternal(n,null,r);return o.Manager=a.getFinalManager(),o}},{key:"sortAndFilterCollection",value:function(e,n,r,i){if(!e.hasOwnProperty("ClassId")||!e.hasOwnProperty("Items"))throw new Error("Object is not an exchange collection");var a=e;if(!a.Manager)throw new Error("Root object does not contain a data manager.");var o=new t(a.Manager),s=o.cloneCollectionInternal(n,r,i);return s.Manager=o.getFinalManager(),s}}]),t}(),o=function(){function t(e){_classCallCheck(this,t);var n=e;if(!e)throw new Error("rootObject == null");if(!n.Manager)throw new Error("rootObject.Manager == null");if(!n.Manager.Data)throw new Error("rootObject.Manager.Data == null");this._rootObject=n}return _createClass(t,[{key:"getObjectFromManager",value:function(t,n){for(var r=this._rootObject.Manager.Data,i=0,a=r.length;i<a;i++){var o=r[i];if(e.Core.areObjectIdsEqual(o.Key.ObjectId,t)&&o.Key.ExtraKey===n)return o.Value}return null}},{key:"getValueFromObjectData",value:function(e,t){var n=t.toLowerCase(),r=e.Values.Items;for(var i in r){if(r.hasOwnProperty(i))if(i.toLowerCase()===n)return r[i]}return null}},{key:"getFieldInternal",value:function(e,t,n){var r,i=n===t.parts.length-1,a=t.parts[n],o=a.indexOf(":");r=o<0?"field:"+a:0===o?"field"+a:a;var s=this.getValueFromObjectData(e,r);if(!s)return!1;if(i)return t.isCollection?t.resultCollection.push(s):t.resultObject=s,!0;if("Object"===s.Value.ValueType){if(!s.Value.Value)return!1;var l=s.Value.Value,u=l.ObjectId,c=l.ExtraKey,d=this.getObjectFromManager(u,c);return!!d&&this.getFieldInternal(d,t,n+1)}if("Collection"===s.Value.ValueType){if(!s.Value.Value)return!1;var f=s.Value.Value;t.isCollection=!0;for(var h=!1,m=0,p=f.Items.length;m<p;m++){var v=f.Items[m],g=v.ObjectId,C=v.ExtraKey,w=this.getObjectFromManager(g,C);if(w)this.getFieldInternal(w,t,n+1)&&(h=!0)}return h}return!1}},{key:"getLastObjectInternal",value:function(e,t,n){var r,i=n===t.parts.length-1,a=n===t.parts.length-2,o=t.parts[n],s=o.indexOf(":");r=s<0?"field:"+o:0===s?"field"+o:o;var l=this.getValueFromObjectData(e,r);if(!l)return!1;if(i){if("Object"===l.Value.ValueType){if(!l.Value.Value)return!1;var u=l.Value.Value;t.resultCollection1.push(u)}else if("Collection"===l.Value.ValueType){if(!l.Value.Value)return!1;for(var c=l.Value.Value,d=0,f=c.Items.length;d<f;d++)t.resultCollection1.push(c.Items[d])}else t.lastIsValue=!1;return!0}if(a)if("Object"===l.Value.ValueType){if(!l.Value.Value)return!1;var h=l.Value.Value;t.resultCollection2.push(h)}else if("Collection"===l.Value.ValueType){if(!l.Value.Value)return!1;for(var m=l.Value.Value,p=0,v=m.Items.length;p<v;p++)t.resultCollection2.push(m.Items[p])}else t.secondTolastIsValue=!1;if("Object"===l.Value.ValueType){if(!l.Value.Value)return!1;var g=l.Value.Value,C=g.ObjectId,w=g.ExtraKey,y=this.getObjectFromManager(C,w);return!!y&&this.getLastObjectInternal(y,t,n+1)}if("Collection"===l.Value.ValueType){if(!l.Value.Value)return!1;var b=l.Value.Value;t.isCollection=!0;for(var D=!1,k=0,x=b.Items.length;k<x;k++){var I=b.Items[k],F=I.ObjectId,E=I.ExtraKey,V=this.getObjectFromManager(F,E);if(V)this.getLastObjectInternal(V,t,n+1)&&(D=!0)}return D}return!1}},{key:"getField",value:function(e,t){var n=t.split("."),i=e.ExtraKey,a=e.ObjectId,o=this.getObjectFromManager(a,i);if(!o)return null;var s=new r;if(s.parts=n,!this.getFieldInternal(o,s,0))return null;if(s.isCollection)throw new Error("Field path '"+t+"' contains a collection field");return s.resultObject}},{key:"getFields",value:function(e,t){var n=t.split("."),i=e.ExtraKey,a=e.ObjectId,o=this.getObjectFromManager(a,i);if(!o)return null;var s=new r;return s.parts=n,this.getFieldInternal(o,s,0)?s.isCollection?s.resultCollection:[s.resultObject]:null}},{key:"createCollectionFromObjectInternal",value:function(e,t,n){return{ClassId:e,DataTemplate:t,PageInformation:null,ViewVersion:n,ExchangeCommands:{IgnoreCase:!0,Items:[],Locked:!0},Items:[],Locked:!0,Manager:null}}},{key:"createCollectionFromObject",value:function(e){if(!e||!e.ObjectId)return null;var t=this.createCollectionFromObjectInternal(e.ObjectId.ClassId,e.DataTemplate,e.ViewVersion);return t.Items.push(e),t}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"isEqualViewVersion",value:function(e,t){return!e&&!t||!(!e||!t)&&(e.ClassId===t.ClassId&&(e.Mode===t.Mode&&(e.Uri===t.Uri&&e.Version===t.Version)))}},{key:"isUniformCollection",value:function(e){if(0===e.length)return null;if(1===e.length)return{dataTemplate:e[0].DataTemplate,viewVersion:e[0].ViewVersion};for(var t=e[0],n=this.isArray(t.ViewVersion),r=1;r<e.length;r++){var i=e[r];if(i.DataTemplate!==t.DataTemplate)return null;if(this.isArray(i.ViewVersion)!==this.isArray(t.ViewVersion))return null;if(n){var a=t.ViewVersion,o=i.ViewVersion;if(a.length!==o.length)return null;for(var s=0;s<o.length;s++)if(!this.isEqualViewVersion(o[s],a[s]))return null}else if(!this.isEqualViewVersion(i.ViewVersion,t.ViewVersion))return null}return{dataTemplate:e[0].DataTemplate,viewVersion:e[0].ViewVersion}}},{key:"createLastObjectValue",value:function(e){var t=this.isUniformCollection(e);return t?{ClassId:e[0].ObjectId.ClassId,DataTemplate:t.dataTemplate,PageInformation:null,ViewVersion:t.viewVersion,ExchangeCommands:{IgnoreCase:!0,Items:[],Locked:!0},Items:e,Locked:!0,Manager:null}:null}},{key:"getLastObjectsForFieldPath",value:function(e,t){var n=t.split("."),r=e.ExtraKey,a=e.ObjectId,o=this.getObjectFromManager(a,r);if(!o)return null;var s=new i;return s.parts=n,this.getLastObjectInternal(o,s,0)?s.lastIsValue?{collection:this.createLastObjectValue(s.resultCollection1),fieldPath:t,singleField:null,itemCount:s.resultCollection1.length}:s.secondTolastIsValue?{collection:this.createLastObjectValue(s.resultCollection2),fieldPath:n.slice(0,n.length-1).join("."),singleField:n[n.length-1],itemCount:s.resultCollection2.length}:1===n.length?{collection:this.createCollectionFromObject(e),fieldPath:null,singleField:n[0],itemCount:1}:null:null}},{key:"enumerateCollection",value:function(e,t){for(var n=e.Items,r=0,i=n.length;r<i;r++){var a={index:r,break:!1};if(t(n[r],a),a.break)break}}},{key:"enumerateCollectionAsync",value:function(e,t){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,i,a,o,s;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.Items,i=0,a=r.length;case 3:if(!(i<a)){n.next=13;break}return o=r[i],s={index:i,break:!1},n.next=8,t(o,s);case 8:if(!s.break){n.next=10;break}return n.abrupt("break",13);case 10:i++,n.next=3;break;case 13:case"end":return n.stop()}}),n)})))}},{key:"collectionAsArray",value:function(e){for(var t=[],n=e.Items,r=0,i=n.length;r<i;r++){var a=n[r];t.push(a)}return t}},{key:"collectionItemCount",value:function(e){if(!e)throw new Error("coll == null");var t=e.Items;if(!t)throw new Error("coll is not an IExchangeCollection");return t.length}},{key:"getObjectData",value:function(e){var t=e.ExtraKey,n=e.ObjectId,r=this.getObjectFromManager(n,t);return r?r.ObjectData:null}},{key:"cloneObject",value:function(e){return a.cloneObject(this._rootObject,e)}},{key:"cloneCollection",value:function(e){return a.cloneCollection(this._rootObject,e)}},{key:"sortCollection",value:function(e,t){return a.sortCollection(this._rootObject,e,t)}},{key:"filterCollection",value:function(e,t){return a.filterCollection(this._rootObject,e,t)}},{key:"sortAndFilterCollection",value:function(e,t,n){return a.sortAndFilterCollection(this._rootObject,e,t,n)}}],[{key:"isRootObject",value:function(e){if(!e)throw new Error("exchangeObject == null");var t=e;if(t.Manager){if(!t.Manager.Data)throw new Error("exchangeObject.Manager.Data == null");return!0}return!1}}]),t}();t.ExchangeUtil=o}(e.Utilities||(e.Utilities={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=_createClass((function e(t,n){_classCallCheck(this,e),this.util=t,this.item=n}));e.ExchangeUtilObjectPair=t;var n=_createClass((function e(t,n){_classCallCheck(this,e),this.util=t,this.item=n}));e.ExchangeUtilCollectionPair=n}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){e.sourcedObservable=function(e,t){var n=ko.observable(e),r=t,i=function(e,t){if(void 0===e)return n();r=t,n(e)};return i.source=function(){return r},i.subscribe=n.subscribe.bind(n),i.extend=n.extend.bind(n),i.getSubscriptionsCount=n.getSubscriptionsCount.bind(n),i.peek=n.peek.bind(n),i.valueHasMutated=n.valueHasMutated.bind(n),i.valueWillMutate=n.valueWillMutate.bind(n),i.notifySubscribers=n.valueWillMutate.bind(n),i.fn=n.fn,i}}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){t.init=function(n){var r;null===(r=window.moment)||void 0===r||r.locale(n.lang),window.Chart&&window.Chart._adapters._date.override(t.createChartDateAdapter()),e.PageManager.preInit(),jQuery((function(){e.PageManager.init();var t="hoverlabel",n="hoverlabelmouseover",r="hoverpopup",i="hoverpopupvisible";e.Client.hoverLabelsInit(t,n,r,i),e.PageManager.initComponents()}))}}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=_createClass((function e(t,n){_classCallCheck(this,e),this.key=t,this.value=n}));e.KeyValuePair=t}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){e.isA=function(e){if(e.key){if("a"===e.key.toLowerCase())return!0}else if(65===e.keyCode)return!0;return!1},e.isS=function(e){if(e.key){if("s"===e.key.toLowerCase())return!0}else if(83===e.keyCode)return!0;return!1},e.isD=function(e){if(e.key){if("d"===e.key.toLowerCase())return!0}else if(68===e.keyCode)return!0;return!1},e.isF=function(e){if(e.key){if("f"===e.key.toLowerCase())return!0}else if(70===e.keyCode)return!0;return!1},e.isG=function(e){if(e.key){if("g"===e.key.toLowerCase())return!0}else if(71===e.keyCode)return!0;return!1},e.isH=function(e){if(e.key){if("h"===e.key.toLowerCase())return!0}else if(72===e.keyCode)return!0;return!1},e.isJ=function(e){if(e.key){if("j"===e.key.toLowerCase())return!0}else if(74===e.keyCode)return!0;return!1},e.isK=function(e){if(e.key){if("k"===e.key.toLowerCase())return!0}else if(75===e.keyCode)return!0;return!1},e.isL=function(e){if(e.key){if("l"===e.key.toLowerCase())return!0}else if(76===e.keyCode)return!0;return!1},e.isQ=function(e){if(e.key){if("q"===e.key.toLowerCase())return!0}else if(81===e.keyCode)return!0;return!1},e.isW=function(e){if(e.key){if("w"===e.key.toLowerCase())return!0}else if(87===e.keyCode)return!0;return!1},e.isE=function(e){if(e.key){if("e"===e.key.toLowerCase())return!0}else if(69===e.keyCode)return!0;return!1},e.isR=function(e){if(e.key){if("r"===e.key.toLowerCase())return!0}else if(82===e.keyCode)return!0;return!1},e.isT=function(e){if(e.key){if("t"===e.key.toLowerCase())return!0}else if(84===e.keyCode)return!0;return!1},e.isY=function(e){if(e.key){if("y"===e.key.toLowerCase())return!0}else if(89===e.keyCode)return!0;return!1},e.isU=function(e){if(e.key){if("u"===e.key.toLowerCase())return!0}else if(85===e.keyCode)return!0;return!1},e.isI=function(e){if(e.key){if("i"===e.key.toLowerCase())return!0}else if(73===e.keyCode)return!0;return!1},e.isO=function(e){if(e.key){if("o"===e.key.toLowerCase())return!0}else if(79===e.keyCode)return!0;return!1},e.isP=function(e){if(e.key){if("p"===e.key.toLowerCase())return!0}else if(80===e.keyCode)return!0;return!1},e.is1=function(e){if(e.key){if("1"===e.key.toLowerCase())return!0}else if(49===e.keyCode)return!0;return!1},e.is2=function(e){if(e.key){if("2"===e.key.toLowerCase())return!0}else if(50===e.keyCode)return!0;return!1},e.is3=function(e){if(e.key){if("3"===e.key.toLowerCase())return!0}else if(51===e.keyCode)return!0;return!1},e.is4=function(e){if(e.key){if("4"===e.key.toLowerCase())return!0}else if(52===e.keyCode)return!0;return!1},e.is5=function(e){if(e.key){if("5"===e.key.toLowerCase())return!0}else if(53===e.keyCode)return!0;return!1},e.is6=function(e){if(e.key){if("6"===e.key.toLowerCase())return!0}else if(54===e.keyCode)return!0;return!1},e.is7=function(e){if(e.key){if("7"===e.key.toLowerCase())return!0}else if(55===e.keyCode)return!0;return!1},e.is8=function(e){if(e.key){if("8"===e.key.toLowerCase())return!0}else if(56===e.keyCode)return!0;return!1},e.is9=function(e){if(e.key){if("9"===e.key.toLowerCase())return!0}else if(57===e.keyCode)return!0;return!1},e.is0=function(e){if(e.key){if("0"===e.key.toLowerCase())return!0}else if(48===e.keyCode)return!0;return!1},e.isZ=function(e){if(e.key){if("z"===e.key.toLowerCase())return!0}else if(90===e.keyCode)return!0;return!1},e.isX=function(e){if(e.key){if("x"===e.key.toLowerCase())return!0}else if(88===e.keyCode)return!0;return!1},e.isC=function(e){if(e.key){if("c"===e.key.toLowerCase())return!0}else if(67===e.keyCode)return!0;return!1},e.isV=function(e){if(e.key){if("v"===e.key.toLowerCase())return!0}else if(86===e.keyCode)return!0;return!1},e.isB=function(e){if(e.key){if("b"===e.key.toLowerCase())return!0}else if(66===e.keyCode)return!0;return!1},e.isN=function(e){if(e.key){if("n"===e.key.toLowerCase())return!0}else if(78===e.keyCode)return!0;return!1},e.isM=function(e){if(e.key){if("m"===e.key.toLowerCase())return!0}else if(77===e.keyCode)return!0;return!1},e.isArrowDown=function(e){if(e.key){if("arrowdown"===e.key.toLowerCase())return!0}else if(40===e.keyCode)return!0;return!1},e.isArrowLeft=function(e){if(e.key){if("arrowleft"===e.key.toLowerCase())return!0}else if(37===e.keyCode)return!0;return!1},e.isClear=function(e){if(e.key){if("clear"===e.key.toLowerCase())return!0}else if(12===e.keyCode)return!0;return!1},e.isArrowRight=function(e){if(e.key){if("arrowright"===e.key.toLowerCase())return!0}else if(39===e.keyCode)return!0;return!1},e.isArrowUp=function(e){if(e.key){if("arrowup"===e.key.toLowerCase())return!0}else if(38===e.keyCode)return!0;return!1},e.isNumLock=function(e){if(e.key){if("numlock"===e.key.toLowerCase())return!0}else if(144===e.keyCode)return!0;return!1},e.isF1=function(e){if(e.key){if("f1"===e.key.toLowerCase())return!0}else if(112===e.keyCode)return!0;return!1},e.isDead=function(e){if(e.key){if("dead"===e.key.toLowerCase())return!0}else if(192===e.keyCode)return!0;return!1},e.isTab=function(e){if(e.key){if("tab"===e.key.toLowerCase())return!0}else if(9===e.keyCode)return!0;return!1},e.isEnter=function(e){if(e.key){if("enter"===e.key.toLowerCase())return!0}else if(13===e.keyCode)return!0;return!1},e.isShift=function(e){if(e.key){if("shift"===e.key.toLowerCase())return!0}else if(16===e.keyCode)return!0;return!1},e.isBackspace=function(e){if(e.key){if("backspace"===e.key.toLowerCase())return!0}else if(8===e.keyCode)return!0;return!1},e.isControl=function(e){if(e.key){if("control"===e.key.toLowerCase())return!0}else if(17===e.keyCode)return!0;return!1},e.isInsert=function(e){if(e.key){if("insert"===e.key.toLowerCase())return!0}else if(45===e.keyCode)return!0;return!1},e.isHome=function(e){if(e.key){if("home"===e.key.toLowerCase())return!0}else if(36===e.keyCode)return!0;return!1},e.isPageUp=function(e){if(e.key){if("pageup"===e.key.toLowerCase())return!0}else if(33===e.keyCode)return!0;return!1},e.isPageDown=function(e){if(e.key){if("pagedown"===e.key.toLowerCase())return!0}else if(34===e.keyCode)return!0;return!1},e.isEnd=function(e){if(e.key){if("end"===e.key.toLowerCase())return!0}else if(35===e.keyCode)return!0;return!1},e.isDelete=function(e){if(e.key){if("delete"===e.key.toLowerCase())return!0}else if(46===e.keyCode)return!0;return!1},e.isMeta=function(e){if(e.key){if("meta"===e.key.toLowerCase())return!0}else if(91===e.keyCode)return!0;return!1}}(e.Keyboard||(e.Keyboard={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(){function t(){var e=this;_classCallCheck(this,t),this.optimizedProps={},this.parse=function(t,n,r){e.optimizedProps={};var i=document.createElement("div"),a={};for(var o in r)if(r.hasOwnProperty(o)){var s=n[r[o]];s&&(a[o]=s)}var l=document.createElement("div");return l.innerHTML=t.textContent,e.parseRecursive(l,i,0,a,!0),{compiledElement:i,dependencyProps:e.optimizedProps,templateRedirect:e.getTemplateDirectId(i)}},this.parseRecursive=function(n,r,i,a,o){for(var s,l,u,c,d,f,h,m,p,v,g,C,w=!1,y=!0,b=i;b<n.childNodes.length;b++){var D=n.childNodes[b];if(D.nodeType===Node.COMMENT_NODE){var k=t.koIfRegex.exec(D.textContent),x=void 0;if(k)try{m=void 0===k[9]?void 0:JSON.parse(e.correctQuotes(k[9]))}catch(e){m=null,k=null}if(k&&(v=k[2],c=k[6],p=k[1],d=k[3]&&k[3].length%2!=0,f=k[3]&&k[3].length%2==0,h=k[8],g=k[5],C=k[4],g&&(x=a[g=g.substring(0,g.length-1)]),x?g&&((e.optimizedProps[g]=e.optimizedProps[g]||{})[c]=x.fixedValues[c]):x={fixedValues:{},allFields:{},variableFields:{}}),k){var I=void 0,F=!1,E=!1;"if"===p||"ifnot"===p?(s=!1,l=!1,y=!0,u=!1,w=!0):"elseif"===p?s&&(l?F=!0:u&&(I=!0)):"else"===p&&(s&&l&&(F=!0),y&&w&&(E=!0),w=!1);var V=c&&(x.fixedValues.hasOwnProperty(c)||!x.allFields.hasOwnProperty(c));V&&(E=!0),F||E||!o||(I?r.appendChild(document.createComment(" ko if"+v)):r.appendChild(D.cloneNode(!1)));var _=x.fixedValues[c];if(C){var S=C.substring(0,C.length-1);_=e.execFunc(S,_)}d&&(_=!_),f&&(_=!!_);var P=!1;if("else"===p)P=!l;else if(!F)if(V){s=!0;var O=!h&&void 0!==_&&!!_||"=="===h&&_==m||"==="===h&&_===m||"!="===h&&_!=m||"!=="===h&&_!==m;"ifnot"===p&&(O=!O),O&&(P=!0)}else s=!1;b=e.parseRecursive(n,r,b+1,a,o&&!F&&(!E||P)),V||F||E||!o||r.appendChild(document.createComment(" /ko ")),u="if"===p,P&&(l=!0),E||(y=!1),c=null}else{if(t.koEndRegex.test(D.textContent))break;t.koStartRegex.test(D.textContent)?(o&&r.appendChild(D.cloneNode(!1)),b=e.parseRecursive(n,r,b+1,a,o),o&&r.appendChild(document.createComment(" /ko "))):o&&r.appendChild(D.cloneNode(!1))}}else if(o)if(D.nodeType===Node.TEXT_NODE)r.appendChild(D.cloneNode(!1));else if(D.nodeType===Node.ELEMENT_NODE){var A=D.cloneNode(!1);e.parseRecursive(D,A,0,a,o),r.appendChild(A)}}return b},this.correctQuotes=function(e){return e&&e.startsWith("'")&&(e=e.trim()).endsWith("'")&&(e='"'+e.substring(1,e.length-1)+'"'),e}}return _createClass(t,[{key:"execFunc",value:function(t,n){for(var r=t.split("."),i=window,a=0;a<r.length;a++)if(!(i=i[r[a]]))return e.PageManager.logError("Function "+t+" doesn't exist"),null;return"function"!=typeof i?(e.PageManager.logError("Object "+t+" isn't a function"),null):i(n)}},{key:"getTemplateDirectId",value:function(e){for(var n=null,r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(i.nodeType===Node.COMMENT_NODE){var a=t.templateRegex.exec(i.textContent);if(a){if(n)return null;var o=a[1]||a[2],s=a[3],l=a[4]||a[5];if(l!==s)return null;n={templateName:o,commandName:s,nextCommandName:l}}else if(!(a=t.koStartRegex.exec(i.textContent))){if(!n)return null;if(!(a=t.koEndRegex.exec(i.textContent)))return null}}else{if(i.nodeType!==Node.TEXT_NODE)return null;if(!t.emptyRegex.exec(i.textContent))return null}}return n}}]),t}();n.koIfRegex=/^\s*ko\s+(if|elseif|ifnot|else)(:\s*(!+)?\s*((?:[\w$.])*\()?((?:[\w$]+\.)+)(\w+)(\))?\s*(?:(===|==|!=|!==)\s*(.*))?)?\s*$/,n.koStartRegex=/\s*ko\s+/,n.koEndRegex=/\s*\/ko\s+/,n.emptyRegex=/\s*/,n.templateRegex=/^\s*ko\s+template:\s*\{\s*name:\s*\$root\.templateName\((?:(?:"(\w+)")|(?:'(\w+)')),\s*null,\s*([\w$]+),\s*(?:(?:"([\w$]+)")|(?:'([\w$]+)'))\)\s*\}\s*$/,t.KoPrecompiler=n}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){!function(e){var t={en:"gb"};e.getFlagCode=function(e){var n;return e=e.toLowerCase(),null!==(n=t[e])&&void 0!==n?n:e}}(e.LanguageUtil||(e.LanguageUtil={}))}(e.Utilities||(e.Utilities={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){t.createMessage=function(e){return new r(e)};var n,r=function(){function r(e){if(_classCallCheck(this,r),this.isVisible=ko.observable(!1),this.isLoading=ko.observable(!1),this.titleObservable=ko.observable(""),this.contentObservable=ko.observable(""),this.links=[],this.linksObservable=ko.observableArray(),this.commands=ko.observableArray([]),this.iconObservable=ko.observable(),this.showCloseButton=!0,this.showCloseButtonObservable=ko.observable(!0),this.cssClass=ko.observable(""),this.contentTemplateObservable=ko.observable(""),this.panelVmObservable=ko.observable(),this.imageUrl="",this.imageUrlObservable=ko.observable(""),this.showToggleButton=!1,this.showToggleButtonObservable=ko.observable(!1),this.showToggleContent=ko.observable(!0),this.isInited=!1,e){var i={initialState:!0,isLoading:ko.observable(!1),title:"",content:"",list:ko.observableArray(),type:n.Info,icon:t.IconType.Information,showCloseButton:!0,links:[],commands:[],contentTemplate:null,panelVm:null,cssClass:null,messages:ko.observableArray(),showToggleButton:!1,showToggleContent:!0},a=Object.assign(Object.assign({},i),e),o=[a.initialState,a.title,a.content,a.list,a.type,a.icon,a.showCloseButton,a.links,a.commands,a.contentTemplate,a.panelVm,a.cssClass,a.messages,a.showToggleButton,a.showToggleContent];this.initInternal.apply(this,o)}}return _createClass(r,[{key:"update",value:function(e){if(e){var t=Object.assign({},this),n=Object.assign(Object.assign(Object.assign({},t),{initialState:this.isVisible()}),e),r=[n.initialState,n.title,n.content,n.list,n.type,n.icon,n.showCloseButton,n.links,n.commands,n.contentTemplate,n.panelVm,n.cssClass,n.messages,n.showToggleButton,n.showToggleContent];this.initInternal.apply(this,r)}}},{key:"init",value:function(t,n,r,i,a,o,s){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],c=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0,h=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,p=arguments.length>14?arguments[14]:void 0;this.isInited&&e.PageManager.logTiming&&e.PageManager.logError("MessagePanel.init() should not be called twice."),this.isInited=!0,this.initInternal(t,n,r,i,a,o,s,l,u,c,d,f,h,m,p)}},{key:"initInternal",value:function(t,n,r,i,a,o,s){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],c=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0,f=arguments.length>11?arguments[11]:void 0,h=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,p=arguments.length>14?arguments[14]:void 0;this.isVisible(!1),ko.isObservable(t)?this.isVisible=t:this.isVisible(t),this.title=n,ko.isObservable(n)?this.titleObservable=n:this.titleObservable(n),this.content=r,ko.isObservable(r)?this.contentObservable=r:this.contentObservable(r),this.messages=h,this.list=i,this.type=a,this.cssClass(this.getTypeCssClass()+(f?" "+f:"")),o&&e.Client.isKnownIconType(o)?(this.icon=o,this.iconObservable(o),this.imageUrl=null,this.imageUrlObservable(null)):(this.icon=null,this.iconObservable(null),this.imageUrl=o,this.imageUrlObservable(o)),this.showCloseButton=s,this.showCloseButtonObservable(s),m&&(this.showToggleButton=m),p&&this.showToggleContent(p),this.linksObservable(this.links=l||[]),ko.isObservable(u)?this.commands=u:this.commands(u),c&&(this.contentTemplate=c,this.contentTemplateObservable(c),ko.isObservable(d)?this.panelVmObservable=d:this.panelVmObservable(d||{}))}},{key:"getTypeCssClass",value:function(){return this.type===n.Error?"cs-error":this.type===n.Success?"cs-success":this.type===n.Warning?"cs-warning":this.type===n.Info?"cs-info":(this.type,n.Neutral,"cs-neutral")}},{key:"close",value:function(){this.isVisible(!1)}},{key:"show",value:function(){this.isVisible(!0)}},{key:"startLoading",value:function(){this.isLoading(!0)}},{key:"endLoading",value:function(){this.isLoading(!1)}},{key:"toggle",value:function(){this.showToggleContent(!this.showToggleContent())}}]),r}();t.MessagePanel=r,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.Warning=2]="Warning",e[e.Info=3]="Info",e[e.Neutral=4]="Neutral"}(n=t.MessagePanelType||(t.MessagePanelType={}))}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n;!function(e){e[e.stringValue=1]="stringValue",e[e.numberValue=2]="numberValue",e[e.intDecValue=3]="intDecValue"}(n=t.MultiModeNumberFieldInitMode||(t.MultiModeNumberFieldInitMode={}));var r=function(){function t(r){var i=this;_classCallCheck(this,t),this.isEmpty=ko.pureComputed((function(){return!i.stringValue()})),this.updateOnBlur=!1,this.updateAfterDelay=!1,this.sepReplacer=1.1.toLocaleString().charAt(1),this.initMode=r&&r.initMode||n.stringValue,this.numberValue=r&&r.numberValue||e.Client.sourcedObservable(0),this.stringValue=r&&r.stringValue||e.Client.sourcedObservable(""),this.integerPart=r&&r.integerPart||e.Client.sourcedObservable(""),this.decimalPart=r&&r.decimalPart||e.Client.sourcedObservable(""),this.updateOnBlur=!!(null==r?void 0:r.updateOnBlur),this.updateAfterDelay=!!(null==r?void 0:r.updateAfterDelay),this.init()}return _createClass(t,[{key:"init",value:function(){this.createBindings()}},{key:"createBindings",value:function(){var e,t,r,i=this,a=this.integerPart,o=this.decimalPart;switch(e=ko.computed({read:function(){var e=parseFloat(a()+(o()?"."+o():""));return isNaN(e)?null:e},write:function(e){var t=/[eE]/.test(""+e)?Number(e).toFixed(20).replace(/0*$/,""):""+e,n=(t=isNaN(e)||null===e?"":t).indexOf(".");n>0?(a(t.substring(0,n)),o(t.substring(n+1))):(a(t),o(""))},owner:this}).extend({deferred:!0}),t=ko.computed({read:function(){return""+a()+(o()?i.sepReplacer+o():"")},write:function(e){var t=(""+e).indexOf(i.sepReplacer);t>0?(a(e.substring(0,t)),o(e.substring(t+1))):(a(e),o(""))},owner:this}),this.numberValue.subscribe(e),e.subscribe(this.numberValue),this.stringValue.subscribe(t),t.subscribe(this.stringValue),ko.unwrap(this.initMode)){case n.numberValue:e(null===(r=ko.unwrap(e))?null:Number(r));break;case n.stringValue:t(r=(r=ko.unwrap(t))?r.replace(".",this.sepReplacer):r)}}}]),t}();t.MultiModeNumberFieldViewModel=r}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=this;t.AppIdParameter="appId",function(e){e[e.Back=0]="Back",e[e.Next=1]="Next"}(t.HistoryMode||(t.HistoryMode={}));var r,i=[],a={},o={},s={},l=0,u=[],c={},d=[],f=[],h=!1,m=0;t.isLoaded=!1;var p=[],v=[],g=[],C=-1,w=!1,y=[],b=!1,D={};t.editMode=!1,t.isMobile=!1,t.isApp=!1,t.isTablet=!1,t.isEditZone=!1,t.isAuthenticated=!1,t.isOnBehalfOf=!1,t.isFixedOnBehalfOf=!1,t.hasPatient=!1,t.tokenId="",t.webRelativeUrl=null,t.siteRelativeUrl=null,t.csIconsPath=null,t.product=null,t.historySupported=!1,t.tz="",t.lang="",t.isBrowserEnrolled=!1,t.serverIdleTimeout=15,t.requestDigestValidity=0,t.knockoutPrecompile=!0,t.logTiming=!1,t.hideHeader=!1,t.poll=!1,t.portalType="Unknown",t.lastRequest=new Date,t.requestDigestDate=new Date,t.isPatientOriented=!1,t.isKioskOriented=!1,t.isCaregiverOriented=!1,t.loadingType="default",t.loadingConfiguration={},t.buttonLoaderClass=" spinner autobar",t.DialogPopupRootId="csModalDialogRoot",t.contentWrapperSelector=".cs-content-wrapper",t.dialogTemplate="";var k=[];function x(e){return D[e]}function I(){p.splice(0),v.splice(0),window.onbeforeunload=null}t.navigatingAway=!1,t.isOffline=!1,t.isFrame=!1,t.preInit=function(){var n;window.addEventListener("error",(function(e){try{if(e&&e.error&&e.error.stack){var n=e.error;t.logError(n.stack)}else e&&e.message&&t.logError(e.message)}catch(e){t.logLocal(e)}})),window.addEventListener("beforeunload",(function(){e.PageManager.navigatingAway=!0})),window.addEventListener("offline",(function(){e.PageManager.isOffline=!0})),window.addEventListener("online",(function(){e.PageManager.isOffline=!1})),"true"===(null===(n=document.querySelector("html"))||void 0===n?void 0:n.getAttribute("cs_frame"))&&(t.isFrame=!0)},t.getService=x,t.withService=function(e,n){var r=x(e);r?n(r):t.logError("Pagemanager service "+e+" isn't registered.")},t.ensureService=function(e,t){return D[e]||(D[e]=t())},t.disableNotifyPageUnload=I;var F=window.location.href;function E(){window.setTimeout((function(){if(w&&!t.isFrame&&window.location.href===F){var n="IsAuthenticated";"ChipSoft.CarePortal"===t.product&&(n="Authentication/"+n);var r=e.Client.ajaxRequest(e.Client.combinePath(t.webRelativeUrl,n),void 0,{noRequestDigest:!0});r.then((function(n){if(w&&window.location.href===F)if(n&&!n.authenticated)I(),n.signOut&&n.signOut.action?e.Client.signIn(n.signOut):window.location.href=t.siteRelativeUrl;else{if(n&&n.sessionChanged)return I(),void _();E()}})),r.catch((function(t){e.PageManager.logError(t),w&&E()}))}}),1e4)}t.init=function(){var n=e.Client.parseQueryParameters();"1"===n.logTiming&&(t.logTiming=!0);var r=n["zp-embed"];"webview"!==r&&"none"!==r||sessionStorage.setItem("zp-embed",r),t.hideHeader="webview"===sessionStorage.getItem("zp-embed"),t.hideHeader&&document.body.classList.add("cs-hide-header"),B(),window.addEventListener("beforeunload",(function(t){!e.PageManager.editMode&&0===v.length&&p.length>0&&(t.returnValue="Weet u zeker dat u deze pagina wilt verlaten? De ingevulde gegevens zullen niet worden opgeslagen.")})),window.addEventListener("popstate",(function(n){if(h)if(C<0)window.history.go(-1);else if(n.state&&n.state.hasOwnProperty("isCSPageManagerState")&&!0===n.state.isCSPageManagerState&&g[C]){var r=n.state,i=g[C],a=0;if(r.stateIndex<i.stateIndex)C--;else{if(r.stateIndex===i.stateIndex)return void window.history.go(-1);i=g[++C],a=1}if(i&&i.componentId){var o=t.getComponentById(i.componentId);if(!o)throw new Error("Invalid component: "+i.componentId);var s=o.viewModel;if(s.popstate&&"function"==typeof s.popstate)s.popstate(a,i.data)}}else{var l=g[C];if(-1!==--C)return void window.history.go(-1);0===v.length&&p.length>0?e.PageManager.confirm("Bevestiging pagina verlaten","Weet u zeker dat u deze pagina wilt verlaten? De ingevulde gegevens zullen niet worden opgeslagen.",(function(){p.splice(0,p.length),window.history.go(-1)}),(function(){var e={isCSPageManagerState:!0,componentId:l.componentId,stateIndex:C,stateId:l.stateId};C++,window.history.pushState(e,document.title)})):window.history.go(-1)}})),b=!0,[].concat(y).forEach((function(e){e()})),t.resumeIsAuthenticated()},t.stopIsAuthenticated=function(){w=!1},t.resumeIsAuthenticated=function(){!t.isEditZone&&t.isAuthenticated&&t.poll&&(w=!0,E())},t.pollIsAuthenticatedActive=function(){return w},t.onInit=function(e){b?e():y.push(e)};var V,_=function(){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,i;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==(r=document.querySelector("#s4-bodyContainer"))){n.next=3;break}return n.abrupt("return");case 3:return r.classList.add("__warning-text-mask"),i=function(){window.location.href=t.siteRelativeUrl},n.next=7,e.PageManager.alert("",t.sessionChangedWarning,void 0,i);case 7:case"end":return n.stop()}}),n)})))},S=function(){return++l+""};!function(e){e[e.Viewless=0]="Viewless",e[e.KnockOut=1]="KnockOut"}(V||(V={}));t.addInitializerPromise=function(e){k.push(e)};var P=function(){jQuery(".cs-module").each((function(r,i){var a=jQuery(i).attr("data-cs-module"),o=JSON.parse(a),s=function(r,i){return function(a){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var o,s,l,u,c,d,f,h,m;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.logTime(r.module),((o=window.ChipSoft=e).ViewModelBases=o.ViewModelBases||{})[r.settingViewModelName]=o.Core.SettingViewModelBase,n.next=5,o.ModuleManager.import(r.module);case 5:s=n.sent;try{(l=new s[r.vmClassName](r.viewParams)).clientId=a.clientId,l.uniqueId=r.uniqueId+"_"+a.instanceId,l.componentInstanceId=a.instanceId,l.componentInstance=Object.assign({},a),Object.defineProperty(l.componentInstance,"element",{enumerable:!1,writable:!0}),Object.defineProperty(l.componentInstance,"creator",{enumerable:!1,writable:!0}),u=r.requestInfo,l.requestInfo=new e.Core.RequestInfo(u.pageUrl,u.componentId,u.webRelativeUrl,u.extra),r.templateId&&(l.templateId=r.templateId),c=_createForOfIteratorHelper(r.templates);try{for(c.s();!(d=c.n()).done;)f=d.value,l.registerTemplate(f.name,f.id)}catch(e){c.e(e)}finally{c.f()}h=l.templateName("initLoadingRegistration",!1),m="init_"+h+"_loadingRegistration",window.hasOwnProperty(m)&&window[m](l),i===V.KnockOut&&ko.applyBindings(l,a.element),r.isEditor&&(l.editorId=r.editorId),r.componentId?e.PageManager.registerComponentViewModel(r.componentId,l):e.PageManager.registerComponent({viewModel:l,id:null,title:null,type:null}),l.init(),t.logTimeEnd(r.module)}catch(t){e.PageManager.logError(t)}case 7:case"end":return n.stop()}}),n)})))}}(o,jQuery(i).hasClass("cs-ko-module")?V.KnockOut:V.Viewless);t.initComponent(o.componentId,o.rootId,s)}))};t.initComponents=function(){P()},t.initComponent=function(r,i,l){t.logTime(r);var u=a[r],c={isCreated:!1,create:null,clientId:i||"cs_viewless_clientid_"+S(),pageComponent:u,rootElement:i?document.getElementById(i):null,dispose:null};if(c.create=function(e){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.isCreated){t.next=10;break}return c.isCreated=!0,t.next=4,Promise.all(k);case 4:if(!((n=l(e))instanceof Promise)){t.next=8;break}return t.next=8,n;case 8:t.next=11;break;case 10:throw new Error("Component "+c.pageComponent.title+" ("+c.pageComponent.id+") is already created");case 11:case"end":return t.stop()}}),t)})))},c.dispose=function(){if(c.isCreated){var n=c.pageComponent,i=n?n.viewModel:null;e.ClientConnectionManager.removeConsumerCallbacks(r),t.removeComponentViewModel(r),c.isCreated=!1,i&&i.dispose()}},o[r]=c,u&&s[u.id])jQuery(c.rootElement).parent().addClass("cs-d-none"),jQuery(c.rootElement).remove();else{var d={creator:c,delete:function(){throw new Error("Static components can't be deleted")},element:c.rootElement,instanceId:S(),clientId:i};c.create(d)}t.onNextLoad((function(){t.logTimeEnd(r)}))},t.initComponentOnLoad=function(e,n,r){jQuery((function(){t.initComponent(e,n,r)}))},t.getComponentCreator=function(e){return o[e]},t.getComponentCreators=function(e){return e.filter((function(e){return!!o[e]})).map((function(e){return o[e]})).sort((function(e,t){return e.pageComponent.zoneIndex-t.pageComponent.zoneIndex}))},t.instantiateComponent=function(e,t){var n=S(),r=e.clientId+"_"+n,i=null;if(e.rootElement){var a=document.createElement("div"),o=e.pageComponent;o&&(a.className="cs-wp-state-instantiating-v2 "+o.cssClassName+(o.showBorder?" cs-wp-chrome-border":" cs-wp-chrome-noborder")+(o.showTitle?" cs-wp-chrome-title":" cs-wp-chrome-notitle"),a.setAttribute("data-title",o.title)),t.appendChild(a),(i=e.rootElement.cloneNode(!0)).id=r,a.appendChild(i)}return{creator:e,instanceId:n,clientId:r,element:i,delete:function(){i&&i.parentElement.removeChild(i),e.dispose()}}},t.logLocal=function(e){console&&console.log&&console.log(e)};var O,A=new Set,T=new Set,R=new Set;t.logVerbose=function(n){var r;if(t.logLocal(n),(!e.PageManager.navigatingAway&&!e.PageManager.isOffline||0!==(null===(r=null==n?void 0:n.xhr)||void 0===r?void 0:r.readyState))&&(n&&n===Object(n)&&(n=JSON.stringify(n,null,4)),t.webRelativeUrl)){var i=e.Client.combinePath(t.webRelativeUrl,"/_vti_bin/ChipSoft/DiagnosticsService.svc/","PostVerboseMessage"),a=e.Client.parseQueryParameters();a[t.AppIdParameter]&&(i=e.Client.addQueryParameter(i,t.AppIdParameter,a[t.AppIdParameter],0)),A.has(n)||(A.add(n),e.Client.ajaxRequest(i,{logMessage:n,pageUrl:window.location.href,userAgent:window.clientInformation?window.clientInformation.userAgent:null,isComponentActionError:!1},{noRequestDigest:!0}).then((function(e){e&&e.IsServiceCallSucceeded||t.logLocal("Failed to send browser information")})).catch((function(e){t.logLocal(e)})))}},t.logInformation=function(n){var r;if(t.logLocal(n),(!e.PageManager.navigatingAway&&!e.PageManager.isOffline||0!==(null===(r=null==n?void 0:n.xhr)||void 0===r?void 0:r.readyState))&&(n&&n===Object(n)&&(n=JSON.stringify(n,null,4)),t.webRelativeUrl)){var i=e.Client.combinePath(t.webRelativeUrl,"/_vti_bin/ChipSoft/DiagnosticsService.svc/","PostInformationMessage"),a=e.Client.parseQueryParameters();a[t.AppIdParameter]&&(i=e.Client.addQueryParameter(i,t.AppIdParameter,a[t.AppIdParameter],0)),T.has(n)||(T.add(n),e.Client.ajaxRequest(i,{logMessage:n,pageUrl:window.location.href,userAgent:window.clientInformation?window.clientInformation.userAgent:null,isComponentActionError:!1},{noRequestDigest:!0}).then((function(e){e&&e.IsServiceCallSucceeded||t.logLocal("Failed to send browser information")})).catch((function(e){t.logLocal(e)})))}},t.logError=function(n){var r,i,a,o;if(n&&t.logLocal(n),!e.PageManager.navigatingAway&&!e.PageManager.isOffline||0!==(null===(r=null==n?void 0:n.xhr)||void 0===r?void 0:r.readyState)){var s,l=n;if(l.xhr&&0===l.xhr.readyState&&0===l.xhr.status)t.logInformation(l);else if(n instanceof ErrorEvent?n=n.error&&n.error.stack?(s=n.error).stack:n.message?n.message:"<ErrorEvent>":n instanceof Error?(s=n,n=n.stack?n.stack:n.message?n.message:"<Error>"):n&&n===Object(n)&&(n=JSON.stringify(n,null,4)),e.Client.isComponentRequestError(s)&&(n=(null===(i=s.fault)||void 0===i?void 0:i.reason)+"\nof type '"+(null===(o=null===(a=s.fault)||void 0===a?void 0:a.detail)||void 0===o?void 0:o.$type)+"'\nat component request action '"+s.request.header.action+"'\n"+n),t.webRelativeUrl){var u=e.Client.combinePath(t.webRelativeUrl,"/_vti_bin/ChipSoft/DiagnosticsService.svc/","PostErrorMessage"),c=e.Client.parseQueryParameters();c[t.AppIdParameter]&&(u=e.Client.addQueryParameter(u,t.AppIdParameter,c[t.AppIdParameter],0)),"Script error."===n||R.has(n)||(R.add(n),e.Client.ajaxRequest(u,{logMessage:n,pageUrl:window.location.href,userAgent:window.clientInformation?window.clientInformation.userAgent:null,isComponentActionError:e.Client.isComponentRequestError(s)},{noRequestDigest:!0}).then((function(e){e&&e.IsServiceCallSucceeded||t.logLocal("Failed to send browser information")})).catch((function(e){t.logLocal(e)})))}}},t.now=function(){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,i,a,o;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.webRelativeUrl){n.next=2;break}throw new Error("No webRelativeUrl");case 2:if(!(r=O)){n.next=5;break}return n.abrupt("return",new Date(r));case 5:return i=e.Client.combinePath(t.webRelativeUrl,"/_vti_bin/ChipSoft/DiagnosticsService.svc/","Now"),(a=e.Client.parseQueryParameters())[t.AppIdParameter]&&(i=e.Client.addQueryParameter(i,t.AppIdParameter,a[t.AppIdParameter],0)),n.next=10,e.Client.ajaxRequest(i,{},{noRequestDigest:!0});case 10:return o=n.sent,r=O=e.Core.dateFromIsoDateString(o),setTimeout((function(){O=null}),0),n.abrupt("return",new Date(r));case 14:case"end":return n.stop()}}),n)})))},t.ensureCsRoot=function(){var e=document.getElementById(t.DialogPopupRootId);e||(e=jQuery.parseHTML("<div id='"+t.DialogPopupRootId+"' class='csFixedRoot'></div>")[0],(jQuery(t.contentWrapperSelector).length?jQuery(t.contentWrapperSelector).first():jQuery(document.body)).append(e));return jQuery(e)};var N=function(){if(!t.$dialogTemplate){var e=jQuery.parseHTML(t.dialogTemplate);if(1!==e.length||!jQuery(e[0]).is(".csDialogRoot"))throw new Error("cs-dialog.cshtml: expected 1 .csDialogRoot element, actual root elements: "+e.length);t.$dialogTemplate=jQuery(e)}return t.$dialogTemplate};t.createNewDialogRoot=function(e){var n=t.$dialogTemplate?t.$dialogTemplate.clone():N().clone();return e.append(n),n},t.createNewLayerIdx=function(e){var t=2,n=2;return e.children().each((function(e,r){var i=parseInt(jQuery(r).data("zindex"),10),a=parseInt(jQuery(r).data("dialogid"),10);i&&i>t&&(t=i),a&&a>n&&(n=a)})),[t+1,n+1]},t.getDialogData=function(e,n){var r=t.$dialogTemplate?t.$dialogTemplate.data(e):N().data(e);return r&&n&&r.hasOwnPropery(n)?r[n]:r},t.alert=function(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new Promise((function(s,l){o.title=n,o.message=r,o.zIndex=null!=i?i:o.zIndex;var u,c=new e.Core.DialogOptions(o);null===c.commands()||c.commands().length||((u=new e.Core.DialogCommand).isDefault(!0),u.callback=function(){a&&a(),s(!0)},u.title=t.getDialogData("i8Confirm")||"Ok",c.commands.push(u));var d=new e.Core.DialogViewModel(c);d.resolve=s,d.reject=l,d.showDialog()}))},t.confirm=function(r,i,a,o,s){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return new Promise((function(u,c){l.title=r,l.message=i,l.zIndex=null!=s?s:l.zIndex;var d=new e.Core.DialogOptions(l);if(null===d.commands()||d.commands().length)d.onClose=function(){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0);case 1:case"end":return e.stop()}}),e)})))};else{var f=new e.Core.DialogCommand;f.title=t.getDialogData("i8Confirm")||"Ok",f.callback=function(){a&&a(),u(!0)},f.isDefault(!0),d.commands.push(f);var h=new e.Core.DialogCommand;h.title=t.getDialogData("i8Cancel")||"Annuleren",h.callback=function(){o&&o(),u(!1)},d.commands.push(h)}var m=new e.Core.DialogViewModel(d);m.resolve=u,m.showDialog()}))},t.showWebpartDialog=function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var a,o,s,l,u,c,d,f,h=this;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=new e.Core.DialogOptions(i),void 0===i.showClose&&a.showClose(!0),null===a.commands()||a.commands().length||a.showClose()||((o=new e.Core.DialogCommand).title=t.getDialogData("i8Confirm")||"Ok",o.isDefault(!0),a.commands.push(o)),(s=new e.Core.DialogViewModel(a)).init(),l=t.getComponentCreators(r),u=[],c=jQuery(s.rootHtmlElement()).find(".csDialogContent")[0],d=0;case 9:if(!(d<l.length)){n.next=17;break}return f=t.instantiateComponent(l[d],c),u.push(f),n.next=14,l[d].create(f);case 14:d++,n.next=9;break;case 17:return s.onClose=function(){return __awaiter(h,void 0,void 0,_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.forEach((function(e){e.delete()})),!i.onClose){e.next=4;break}return e.next=4,i.onClose();case 4:case"end":return e.stop()}}),e)})))},s.showDialog(),n.abrupt("return",s);case 20:case"end":return n.stop()}}),n)})))};var M=function(n){_inherits(i,n);var r=_createSuper(i);function i(n,a,o){var s;if(_classCallCheck(this,i),(s=r.call(this,o)).templateNameString=n,s.viewModel=a,s.showOk=!1,s.showCancel=!1,s.okTitle=t.getDialogData("i8Confirm")||"Ok",s.cancelTitle=t.getDialogData("i8Cancel")||"Annuleren",s.showOk){var l=new e.Core.DialogCommand;l.title=s.okTitle,l.isDefault(!0),l.callback=function(e){s.onOk&&s.onOk(),e(!0)},s.commands.push(l)}if(s.showCancel){var u=new e.Core.DialogCommand;u.title=s.cancelTitle,u.callback=function(e){s.onCancel&&s.onCancel(),e(!1)},s.commands.push(u)}return s.showOk||s.showCancel||void 0!==o.showClose||s.showClose(!0),s}return _createClass(i)}(e.Core.DialogOptions);t.KoTemplateDialogOptions=M,t.createKoTemplateDialog=function(t){var r,i={closeDialog:function(e){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=3;break}return t.next=3,r(e);case 3:case"end":return t.stop()}}),t)})))},openDialog:null,dialogVm:null};return i.openDialog=function(){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var a=this;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,o){var s=new e.Core.DialogViewModel(t);s.resolve=n,s.reject=o,i.dialogVm=s,r=function(e){return __awaiter(a,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.closeDialog(e);case 2:n(e);case 3:case"end":return t.stop()}}),t)})))},s.init();var l=jQuery.parseHTML("<div class='csDialogContent csDialogTemplateWrap'>{{#template: { name: $root.templateName("+JSON.stringify(t.templateNameString)+") } /}}</div>");jQuery(s.rootHtmlElement()).find(".csDialogContent").replaceWith(l),ko.applyBindings(t.viewModel,l[0]),s.showDialog()})));case 1:case"end":return n.stop()}}),n)})))},i};var j=_createClass((function e(t,n){_classCallCheck(this,e),this.templateName=t,this.viewModel=n}));t.KoTemplateFullScreenDialogOptions=j,t.createFullScreenKoTemplateDialog=function(r){var i,a=!1,o={closeDialog:function(e){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=3;break}return t.next=3,i(e);case 3:case"end":return t.stop()}}),t)})))},openDialog:null},s=null;return r.viewModel instanceof e.Core.DialogTemplateViewModelBase&&(s=r.viewModel),s&&(s.dialogController=o),o.openDialog=function(){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function e(){var n=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){if(a)throw new Error("Dialog already opened.");a=!0;var l=t.ensureCsRoot(),u=jQuery('<div class="csDialogFullScreenRoot">{{#template: { name: $root.templateName('+JSON.stringify(r.templateName)+") } /}}</div>");l.append(u);var c=t.createNewLayerIdx(l)[0];u.css("zIndex",c),i=function(t){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null==s||s.onClosing(),(null==r?void 0:r.onClosing)&&r.onClosing(t),null==s||s.dispose(),u.remove(),(null==r?void 0:r.onClosed)&&r.onClosed(t),n.next=7,null==s?void 0:s.onClosed();case 7:e(t);case 8:case"end":return n.stop()}}),n)})))},r.viewModel.setRootHtmlElement(u[0]),ko.applyBindings(r.viewModel,u[0]),null==s||s.onOpened()})));case 1:case"end":return e.stop()}}),e)})))},o},t.registerNotifyPageUnload=function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return p.push(e),e},t.unregisterNotifyPageUnload=function(e){var t=p.indexOf(e);t>-1&&p.splice(t,1)},t.registerDontNotifyPageUnload=function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return v.push(e),e},t.unregisterDontNotifyPageUnload=function(e){var t=v.indexOf(e);t>-1&&v.splice(t,1)},t.historyResetState=function(e){g.splice(C+1)},t.historyPushState=function(e,n){if(t.historySupported){++C<g.length&&t.historyResetState(e);var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),i={isCSPageManagerState:!0,componentId:e,stateIndex:C,stateId:r};window.history.pushState(i,document.title),g.push({data:n,title:document.title,stateIndex:C,stateId:r,componentId:e})}},t.registerFormActionHandler=function(e){u.push(e)},t.isFormActionSupported=function(e){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,r;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=u.length-1;case 1:if(!(n>=0)){t.next=10;break}return r=u[n],t.next=5,r.isFormActionSupported(e);case 5:if(!t.sent){t.next=7;break}return t.abrupt("return",!0);case 7:n--,t.next=1;break;case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t)})))},t.canExecuteFormAction=function(e,t){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,i;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=u.length-1;case 1:if(!(r>=0)){n.next=15;break}return i=u[r],n.next=5,i.isFormActionSupported(e);case 5:if(n.t0=n.sent,!n.t0){n.next=10;break}return n.next=9,i.canExecuteFormAction(e,t);case 9:n.t0=n.sent;case 10:if(!n.t0){n.next=12;break}return n.abrupt("return",!0);case 12:r--,n.next=1;break;case 15:return n.abrupt("return",!1);case 16:case"end":return n.stop()}}),n)})))},t.executeFormAction=function(e,t){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){var r,i,a;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=!1,i=u.length-1;case 2:if(!(i>=0)){n.next=16;break}return a=u[i],n.next=6,a.isFormActionSupported(e);case 6:if(n.t0=n.sent,!n.t0){n.next=11;break}return n.next=10,a.executeFormAction(e,t);case 10:n.t0=n.sent;case 11:if(!n.t0){n.next=13;break}r=!0;case 13:i--,n.next=2;break;case 16:return n.abrupt("return",r);case 17:case"end":return n.stop()}}),n)})))},t.notifyFormActionStateChanged=function(e){if(c.hasOwnProperty(e))for(var t=c[e],n=0;n<t.length;n++){t[n].callback.call(null)}},t.unsubscribeFormActionStateChanged=function(e,t){if(c.hasOwnProperty(e))for(var n=c[e].length-1;n>=0;n--)c[e][n].id===t&&c[e].splice(n,1)},t.subscribeFormActionStateChanged=function(e,t){c.hasOwnProperty(e)||(c[e]=[]);var n={id:"",callback:function(){}};return n.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),n.callback=t,c[e].push(n),n.id},t.onLoad=function(e){t.isLoaded?e():t.onNextLoad(e)},t.onNextLoad=function(e){null==r&&(r=ko.observable(!1)),r.subscribe(e)},t.onAfterCurrentActions=function(e){t.onNextLoad(e),t.notifyLoading((function(){return null}))},t.notifyLoadStart=function(){m++},t.notifyLoadEnd=function(){--m<0&&console.warn("Loadingcounter went below zero. notifyLoadStart/notifyLoadEnd calls aren't in sync."),B()};var B=function(){r&&0===m&&setTimeout((function(){0===m&&(t.isLoaded=!0,r&&(r.notifySubscribers(!0),r=null))}),0)};t.notifyLoading=function(e){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.notifyLoadStart(),n.prev=1,n.next=4,e();case 4:return n.abrupt("return",n.sent);case 5:return n.prev=5,t.notifyLoadEnd(),n.finish(5);case 8:case"end":return n.stop()}}),n,null,[[1,,5,8]])})))},t.subscribeComponentViewModelRegistered=function(e){d.push({callback:e})},t.subscribeComponentViewModelRemoved=function(e){f.push({callback:e})},t.subscribeViewModelRegisteredForComponentById=function(t,n){var r=e.PageManager.getComponentById(t);if(!r)throw new Error("component with id '"+t+"' is not registered");r.viewModel?n.call(null,r):d.push({callback:function(e){e.id===t&&n.call(null,e)}})},t.subscribeViewModelRemovedForComponentById=function(t,n){if(!e.PageManager.getComponentById(t))throw new Error("component with id '"+t+"' is not registered");f.push({callback:function(e){e.id===t&&n.call(null,e)}})},t.subscribeViewModelRegisteredForComponentByTitle=function(t,n){var r=e.PageManager.getComponentByTitle(t);if(!r)throw new Error("component with title '"+t+"' is not registered");r.viewModel?n.call(null,r):d.push({callback:function(e){e.title===t&&n.call(null,e)}})},t.registerComponent=function(n){if(null!==n.id){if(e.PageManager.getComponentById(n.id))throw new Error("component with id '"+n.id+"' is already registered");a[n.id]=n}i.push(n),n.ownedComponentIds=n.ownedComponentIds||[];var r,o=_createForOfIteratorHelper(n.ownedComponentIds);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(!n.id)throw new Error("A component cannot own other components without an id.");if(s[l])throw new Error("Component with id '"+l+"' ('"+n.title+"') is registered for multiple owners. Change the settings so at most one webpart uses this webpart for one purpose.");s[l]=n.id,t.editMode||jQuery('div[id^="MSOZoneCell_WebPart"][id$="_'+l+'"]').hide()}}catch(e){o.e(e)}finally{o.f()}L.forEach((function(e){e(n)}))},t.registerEditorComponent=function(t){if(!t.id)throw new Error("An editor component should have a id.");var n=t.id.lastIndexOf("$");if(n<=0)throw new Error("Editor component id '".concat(t.id,"' is not an editor id."));if(e.PageManager.getComponentById(t.id))throw new Error("component with id '"+t.id+"' is already registered");if(a[t.id]=t,i.push(t),t.ownedComponentIds)throw new Error("An editor component should not own other components.");if(s[t.id])throw new Error("Component with id '"+t.id+" is registered for multiple owners.");s[t.id]=t.id.substring(0,n),L.forEach((function(e){e(t)}))};var L=[];t.onComponentRegistered=function(e){i.forEach((function(t){e(t)})),L.push(e)},t.registerComponentViewModel=function(n,r){var i=e.PageManager.getComponentById(n);if(!i)throw new Error("component with id '"+n+"' is not registered");i.viewModel=r,h||(h=!0,window.history&&"function"==typeof window.history.pushState&&(t.historySupported=!0),t.historySupported&&t.historyPushState(null,{initialEntry:!0}));for(var a=0;a<d.length;a++){d[a].callback.call(null,i)}},t.removeComponentViewModel=function(t){var n=e.PageManager.getComponentById(t);if(n){n.viewModel=null;for(var r=0;r<f.length;r++){f[r].callback.call(null,n)}}},t.getComponentById=function(e){if(!e)throw new Error("Invalid id: "+e);var t=a[e];return t||null},t.getComponentByTitle=function(e){for(var t=0;t<i.length;t++)if(i[t].title===e)return i[t];return null},t.getAllComponents=function(){return i.slice()},t.logTime=function(e){t.logTiming&&window.console&&console.time&&console.time(e)},t.logTimeEnd=function(e){t.logTiming&&window.console&&console.timeEnd&&console.timeEnd(e)};var U={};t.getExtraData=function(e){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function t(){var n;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=U[e])){t.next=6;break}if(!n.resolved){t.next=4;break}return t.abrupt("return",n.value);case 4:t.next=9;break;case 6:(n={value:void 0,promise:void 0,resolved:!1,resolver:void 0}).promise=new Promise((function(e){n.resolver=e})),U[e]=n;case 9:return t.next=11,n.promise;case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})))},t.setExtraData=function(e,t){var n=U[e];n?(n.resolved=!0,n.value=t,n.resolver&&n.resolver(t)):(n={value:t,promise:null,resolved:!0,resolver:void 0},U[e]=n)},t.getMainWindow=function(){for(var e,t,n,r=window;(null===(e=r.ChipSoft.PageManager)||void 0===e?void 0:e.isFrame)&&(null===(n=null===(t=r.parent)||void 0===t?void 0:t.ChipSoft)||void 0===n?void 0:n.PageManager);)r=r.parent;return r}}(e.PageManager||(e.PageManager={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t,n,r,i,a,o,s,l,u,c,d,f,h){var m,p,v,g,C;!function(e){e.itemCssClass="itemCssClass",e.class="class"}(t.ViewCssAttr||(t.ViewCssAttr={})),function(e){e.cssClass="cssClass",e.headerCssClass="headerCssClass",e.fieldCssClass="fieldCssClass"}(m=t.FieldCssAttr||(t.FieldCssAttr={})),function(e){e.cssClass="cssClass",e.headerCssClass="headerCssClass",e.commandCssClass="commandCssClass",e.disabledCommandCssClass="disabledCommandCssClass"}(p=t.CommandCssAttr||(t.CommandCssAttr={})),function(e){e[e.Item=0]="Item",e[e.Command=1]="Command"}(v=t.NodeType||(t.NodeType={})),function(e){e[e.ColWidth=0]="ColWidth",e[e.ColWidthPct=1]="ColWidthPct",e[e.ShrinkToFit=2]="ShrinkToFit",e[e.IconPosition=3]="IconPosition",e[e.IconColor=4]="IconColor",e[e.Icon=5]="Icon",e[e.FieldLabel=6]="FieldLabel",e[e.WordBreak=7]="WordBreak",e[e.WhiteSpace=8]="WhiteSpace",e[e.FontWeight=9]="FontWeight",e[e.FontStyle=10]="FontStyle",e[e.TextAlign=11]="TextAlign",e[e.FontColor=12]="FontColor",e[e.BackgroundColor=13]="BackgroundColor"}(g=t.ItemUtilGroup||(t.ItemUtilGroup={})),function(e){e[e.Color=0]="Color",e[e.Icon=1]="Icon",e[e.IconPosition=2]="IconPosition",e[e.CommandStyle=3]="CommandStyle",e[e.CommandSize=4]="CommandSize",e[e.Extra=5]="Extra"}(C=t.CommandUtilGroup||(t.CommandUtilGroup={})),t.CssClassMap={byFieldType:(h={},_defineProperty(h,v.Item,{ColumnWidth_xxs:{desc:"xxs",group:g.ColWidth,classes:_defineProperty({},m.headerCssClass,["cs-col-w-xxs"])},ColumnWidth_xs:{desc:"xs",group:g.ColWidth,classes:_defineProperty({},m.headerCssClass,["cs-col-w-xs"])},ColumnWidth_s:{desc:"s",group:g.ColWidth,classes:_defineProperty({},m.headerCssClass,["cs-col-w-sm"])},ColumnWidth_m:{desc:"m",group:g.ColWidth,classes:_defineProperty({},m.headerCssClass,["cs-col-w-md"])},ColumnWidth_l:{desc:"l",group:g.ColWidth,classes:_defineProperty({},m.headerCssClass,["cs-col-w-lg"])},ColumnWidth_xl:{desc:"xl",group:g.ColWidth,classes:_defineProperty({},m.headerCssClass,["cs-col-w-xl"])},ColumnWidth_xxl:{desc:"xxl",group:g.ColWidth,classes:_defineProperty({},m.headerCssClass,["cs-col-w-xxl"])},ShrinkToFit_shrinkToFit:{desc:"shrinkToFit",group:g.ShrinkToFit,classes:(n={},_defineProperty(n,m.cssClass,["cs-cell-shrink-to-fit"]),_defineProperty(n,m.headerCssClass,["cs-cell-shrink-to-fit"]),n)},WordBreak_noWordBreaks:{desc:"noWordBreaks",group:g.WordBreak,classes:(r={},_defineProperty(r,m.fieldCssClass,["cs-cell-nobreak"]),_defineProperty(r,m.headerCssClass,["cs-cell-nobreak"]),r)},WordBreak_allowWordBreaks:{desc:"allowWordBreaks",group:g.WordBreak,classes:(i={},_defineProperty(i,m.fieldCssClass,["cs-cell-breakword"]),_defineProperty(i,m.headerCssClass,["cs-cell-breakword"]),i)},WhiteSpace_noWrap:{desc:"noWrap",group:g.WhiteSpace,classes:(a={},_defineProperty(a,m.fieldCssClass,["cs-cell-nowrap"]),_defineProperty(a,m.headerCssClass,["cs-cell-nowrap"]),a)},WhiteSpace_normal:{desc:"normal",group:g.WhiteSpace,classes:(o={},_defineProperty(o,m.fieldCssClass,["cs-cell-normal"]),_defineProperty(o,m.headerCssClass,["cs-cell-normal"]),o)},WhiteSpace_pre:{desc:"pre",group:g.WhiteSpace,classes:(s={},_defineProperty(s,m.fieldCssClass,["cs-cell-pre"]),_defineProperty(s,m.headerCssClass,["cs-cell-pre"]),s)},WhiteSpace_preLine:{desc:"preLine",group:g.WhiteSpace,classes:(l={},_defineProperty(l,m.fieldCssClass,["cs-cell-preline"]),_defineProperty(l,m.headerCssClass,["cs-cell-preline"]),l)},WhiteSpace_preWrap:{desc:"preWrap",group:g.WhiteSpace,classes:(u={},_defineProperty(u,m.fieldCssClass,["cs-cell-prewrap"]),_defineProperty(u,m.headerCssClass,["cs-cell-prewrap"]),u)},IconPosition_start:{desc:"start",group:g.IconPosition,classes:_defineProperty({},m.fieldCssClass,["cs-fields-icon-start"])},IconPosition_end:{desc:"end",group:g.IconPosition,classes:_defineProperty({},m.fieldCssClass,["cs-fields-icon-end"])},IconPosition_center:{desc:"center",group:g.IconPosition,classes:_defineProperty({},m.fieldCssClass,["cs-fields-icon"])},IconPosition_squaredIcon:{desc:"squared icon",group:g.IconPosition,classes:(c={},_defineProperty(c,m.fieldCssClass,["cs-fields-icon"]),_defineProperty(c,m.cssClass,["cs-cell-squared-icon"]),c)},IconPosition_roundedIcon:{desc:"rounded icon",group:g.IconPosition,classes:(d={},_defineProperty(d,m.fieldCssClass,["cs-fields-icon"]),_defineProperty(d,m.cssClass,["cs-cell-rounded-icon"]),d)},IconSize_smallIcon:{desc:"small rounded icon",group:g.IconPosition,classes:(f={},_defineProperty(f,m.fieldCssClass,["cs-fields-icon"]),_defineProperty(f,m.cssClass,["cs-cell-sm-rounded-icon"]),f)}}),_defineProperty(h,v.Command,{}),h)};var w=[{groupName:g.Icon,targetFields:[m.fieldCssClass],values:e.Client.IconType},{groupName:g.FontWeight,targetFields:[m.fieldCssClass],values:{lighter:"cs-font-weight-extralight",light:"cs-font-weight-light",normal:"cs-font-weight-normal",bold:"cs-font-weight-semibold",bolder:"cs-font-weight-bold",extrabold:"cs-font-weight-extrabold"}},{groupName:g.FontStyle,targetFields:[m.fieldCssClass],values:{capitalize:"cs-text-capitalize",capitalizeFirstLetter:"cs-text-capitalize-first",italic:"cs-font-italic",lowercase:"cs-text-lowercase",underline:"cs-text-decoration-underline",underlinedashed:"cs-text-decoration-underline-dashed",uppercase:"cs-text-uppercase",monospace:"cs-text-monospace",addSpaceAfter:"cs-addspace-after",addSpaceBefore:"cs-addspace-before"},extraData:{allowSelectMultiple:!0}},{groupName:g.TextAlign,targetFields:[m.fieldCssClass],values:{left:"cs-text-left",right:"cs-text-right",center:"cs-text-center",justify:"cs-text-justify"}},{groupName:g.FontColor,targetFields:[m.fieldCssClass],values:{primary:"cs-color-primary",secondary:"cs-color-secondary",minor:"cs-color-minor",info:"cs-color-info",warning:"cs-color-warning",success:"cs-color-success",danger:"cs-color-danger"}},{groupName:g.BackgroundColor,targetFields:[m.fieldCssClass],values:{primary:"cs-color-bg-primary cs-color-contrast-primary",secondary:"cs-color-bg-secondary cs-color-contrast-secondary",minor:"cs-color-bg-minor cs-color-contrast-minor",info:"cs-color-bg-info cs-color-contrast-info",warning:"cs-color-bg-warning cs-color-contrast-warning",success:"cs-color-bg-success cs-color-contrast-success",danger:"cs-color-bg-danger cs-color-contrast-danger"}},{groupName:g.FieldLabel,targetFields:[m.cssClass],values:{neutral:"cs-cell-statuslabel-neutral",info:"cs-cell-statuslabel-info",warning:"cs-cell-statuslabel-warning",success:"cs-cell-statuslabel-success",error:"cs-cell-statuslabel-error"}},{groupName:g.IconColor,targetFields:[m.fieldCssClass],values:{primary:"cs-color-icon-primary",secondary:"cs-color-icon-secondary",minor:"cs-color-icon-minor",info:"cs-color-icon-info",warning:"cs-color-icon-warning",success:"cs-color-icon-success",danger:"cs-color-icon-danger"}},{groupName:g.ColWidthPct,targetFields:[m.headerCssClass],values:{0:"cs-w-0",10:"cs-w-10",125:"cs-w-12_5",20:"cs-w-20",25:"cs-w-25",30:"cs-w-30",40:"cs-w-40",50:"cs-w-50",60:"cs-w-60",70:"cs-w-70",75:"cs-w-75",80:"cs-w-80",90:"cs-w-90",100:"cs-w-100"}}],y=function(e,n){var r,i,a=_createForOfIteratorHelper(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;for(var s in o.values)if(o.values.hasOwnProperty(s)){var l=o.groupName,u=s,c=o.values[s],d={desc:null,group:null,classes:{},extraData:{}};d.desc=u,d.group=l,d.extraData.allowSelectMultiple=(null===(r=null==o?void 0:o.extraData)||void 0===r?void 0:r.allowSelectMultiple)||!1;var f,h=_createForOfIteratorHelper(o.targetFields);try{for(h.s();!(f=h.n()).done;){var m=f.value;d.classes[m]=c.split(" ")}}catch(e){h.e(e)}finally{h.f()}var p=n===v.Command?C[l]:g[l];t.CssClassMap.byFieldType[n][p+"_"+s]||(t.CssClassMap.byFieldType[n][p+"_"+s]=Object.assign({},d))}}}catch(e){a.e(e)}finally{a.f()}};y([{groupName:C.Color,targetFields:[p.commandCssClass],values:{default:"cs-btn-default",minor:"cs-btn-minor",primary:"cs-btn-primary",secondary:"cs-btn-secondary",success:"cs-btn-success",info:"cs-btn-info",warning:"cs-btn-warning",danger:"cs-btn-danger"}},{groupName:C.CommandStyle,targetFields:[p.commandCssClass],values:{clear:"cs-btn-clear",outline:"cs-btn-outline"}},{groupName:C.IconPosition,targetFields:[p.commandCssClass],values:{start:"cs-btn-icon-start",end:"cs-btn-icon-end",only:"cs-btn-icon-only"}},{groupName:C.CommandSize,targetFields:[p.commandCssClass],values:{small:"cs-btn-small",large:"cs-btn-large"}},{groupName:C.Extra,targetFields:[p.commandCssClass],values:{paging:"cs-btn-paging",error:"cs-btn-has-error"}},{groupName:C.Icon,targetFields:[p.commandCssClass],values:e.Client.IconType}],v.Command),y(w,v.Item)}(e.PageManager||(e.PageManager={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n,r,i,a,o,s,l,u;!function(e){var t="e4d73330-1151-440a-860f-fcf2cae5632c";e.unappend=function(e){e.parentElement.removeChild(e)},e.append=function(e,n){n.id=t,e.appendChild(n);var r=e.querySelector("#".concat(t));return r.id="",r},e.browserCheck=function(e){var t=window.navigator.userAgent;if("IE"===e)return t.indexOf("MSIE")>0||null!==t.match(/Trident.*rv:11\./)},e.kioskCheck=function(){var e=null!==document.querySelector("body.cs-theme-kiosk"),t=null!==document.querySelector("link[href*='/ChipSoft/css/print.css']");return e||t}}(n||(n={})),function(e){e.clean=function(e){for(var t=e.cloneNode(!0),n=0,r=["id","webpartid","data-bind"];n<r.length;n++){var i,a=r[n],o=_createForOfIteratorHelper(t.querySelectorAll("[".concat(a,"]")));try{for(o.s();!(i=o.n()).done;){i.value.removeAttribute(a)}}catch(e){o.e(e)}finally{o.f()}}var s,l=_createForOfIteratorHelper(t.querySelectorAll("script"));try{for(l.s();!(s=l.n()).done;){var u=s.value;u.parentElement.removeChild(u)}}catch(e){l.e(e)}finally{l.f()}var c,d=_createForOfIteratorHelper(t.querySelectorAll("div.ms-clear, div[style*='display: none;']"));try{for(d.s();!(c=d.n()).done;){var f=c.value;f.parentElement.removeChild(f)}}catch(e){d.e(e)}finally{d.f()}return t}}(r||(r={})),function(e){var t=function(){var e=document.createElement("div");return e.classList.add("cs-print-header"),e.appendChild(function(){var e=document.createElement("div"),t=document.createElement("img"),n=document.querySelector(".cs-logo-image img");return t.src=n.src,e.classList.add("cs-print-header-logo"),e.appendChild(t),e}()),e.appendChild(function(){var e=document.createElement("div");e.classList.add("cs-print-header-patient");var t=document.querySelector(".cs-patient-info-container div[id]");if(!t)return e;var n=t.querySelector(".cs-formtable");return n&&e.appendChild(n.cloneNode(!0)),e}()),e};e.build=function(e){for(var n,r=document.createElement("div"),i=0,a=["cs-print-template","__page-".concat(e)];i<a.length;i++){var o=a[i];r.classList.add(o)}return r.appendChild(t()),r.appendChild(((n=document.createElement("div")).classList.add("cs-print-content"),n)),document.body.appendChild(r),r}}(i||(i={})),function(e){var t={matrix:".cs-lab-matrix",table:"table"};function i(e){var t=r.clean(e),n=r.clean(e);return e.classList.add("__print-hidden"),t.classList.add("cs-print-clone"),n.classList.add("cs-print-clone"),[t,n]}var a=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(e){var t=i(e.webpart),n=this.breakpoint(t[0],e.space);return void 0===n?[t[0],void 0]:(t[1].classList.add("cs-print-broken-table"),this.deleteRows(t,n),t)}},{key:"getSpace",value:function(e,t){return e-120-t.querySelector(".cs-viewheadertr").clientHeight}},{key:"breakpoint",value:function(e,t){var r,i=document.querySelector(".cs-print-template .cs-print-content"),a=n.append(i,e),o=this.getSpace(t,a),s=0,l=_createForOfIteratorHelper(a.querySelectorAll("tbody tr:not(.hidden)"));try{for(l.s();!(r=l.n()).done;){if((o-=r.value.clientHeight)<=0)return n.unappend(a),s;s++}}catch(e){l.e(e)}finally{l.f()}n.unappend(a)}},{key:"deleteRows",value:function(e,t){var n={},r=function(e){var t=new RegExp(/[0-9]+/g);return e.getAttribute("class").match(t)[0]},i=function(e){return e.classList.contains("cs-viewheadertr")?e.nextElementSibling:e},a=function(a){var o,s=e["upper"===a?0:1],l=s.querySelectorAll("tbody > tr[class^='group-'][class$='-items']:not(.hidden), tbody > tr.cs-viewheadertr"),u=l.length,c=_createForOfIteratorHelper(s.querySelectorAll("tbody"));try{for(c.s();!(o=c.n()).done;){var d=o.value,f=d.querySelector("tr[class^='group-'][class$='-items']");f&&(n[r(f)]=d)}}catch(e){c.e(e)}finally{c.f()}if("upper"===a)for(var h=t;h<u;h++)n[r(i(l[h]))].removeChild(l[h]);else if("lower"===a)for(var m=0;m<=t-1;m++)n[r(i(l[m]))].removeChild(l[m])};a("upper"),a("lower")}}]),e}()),o=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(e){var t=i(e.webpart),n=this.breakpoint(t[0],e.space);return void 0===n?[t[0],void 0]:(t[1].classList.add("cs-print-broken-table"),this.deleteRows(t,n),t)}},{key:"getSpace",value:function(e,t){return e-120-t.querySelector(".cs-viewheadertr").clientHeight}},{key:"breakpoint",value:function(e,t){var r,i=document.querySelector(".cs-print-template .cs-print-content"),a=n.append(i,e),o=this.getSpace(t,a),s=0,l=_createForOfIteratorHelper(a.querySelectorAll("tbody tr.cs-item-row"));try{for(l.s();!(r=l.n()).done;){if((o-=r.value.clientHeight)<=0)return n.unappend(a),s;s++}}catch(e){l.e(e)}finally{l.f()}n.unappend(a)}},{key:"deleteRows",value:function(e,t){var n=function(n){var r=e["upper"===n?0:1].querySelector("tbody"),i=r.querySelectorAll("tr.cs-item-row"),a=r.childElementCount;if("upper"===n)for(var o=t;o<a;o++)r.removeChild(i[o]);else if("lower"===n)for(var s=0;s<=t-1;s++)r.removeChild(i[s])};n("upper"),n("lower")}}]),e}());e.breakables=[".cs-table-container table","table.cs-form-table",".cs-table-commands-container table",".cs-lab-matrix"],e.init=function(e){switch(function(e){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];if(e.querySelectorAll(t[i]).length>0)return i}}(e.webpart)){case"table":return o.init(e);case"matrix":return a.init(e);default:return}}}(a||(a={})),function(e){var t,o,s,l={minRows:4,safezone:180,breakmodifier:.25},u=function(){return t.querySelector(".cs-print-content")};function c(e){var t=a.init({webpart:e,space:o});t&&(t[0]=n.append(u(),t[0]),void 0!==t[1]?(f(),o<=h(t[1])?c(t[1]):(t[1]=n.append(u(),t[1]),o-=t[1].clientHeight)):o-=h(t[0]))}function d(e){e.classList.add("__print-hidden");var t=r.clean(e);t.classList.remove("__print-hidden"),t.classList.add("cs-print-clone"),t=n.append(u(),t),o-=t.clientHeight}function f(){s++,t=i.build(s),o=t.clientHeight-l.safezone}function h(e){var t,i=r.clean(e);return t=(i=n.append(u(),i)).clientHeight,n.unappend(i),t}e.build=function(e){if(s=1,t=i.build(s),o=t.clientHeight-l.safezone,void 0!==e){var n,r,u,m,p=_createForOfIteratorHelper(e);try{for(p.s();!(n=p.n()).done;){var v=n.value,g=h(v),C=(r=v,u=g,m=void 0,m=function(){var e,t=_createForOfIteratorHelper(a.breakables);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(r.querySelectorAll("".concat(n)).length>0)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}(),o<=u&&o>u*l.breakmodifier&&!0===m);o<=g&&!C&&f(),o>g?d(v):c(v)}}catch(e){p.e(e)}finally{p.f()}}}}(o||(o={})),function(t){t.show=function(){e.PageManager.alert("",e.PageManager.printWarning)}}(s||(s={})),function(e){var t=1100;function n(e){var n=e.querySelectorAll("table");if(0===n.length||n.length>1)return!1;for(var r=n[0].querySelectorAll("tbody tr.cs-item-row"),i=n[0].querySelector("thead tr.cs-viewheadertr"),a=i?i.clientHeight:0,o=0;o<r.length;o++){if(r[0].clientHeight+a>=t)return!1}return!0}function r(){var e=document.querySelector("#s4-bodyContainer"),t=Array.from(e.querySelectorAll(".ms-webpart-chrome:not(.cs-hidewp), .cs-webpart:not(.cs-wp-state-hidden)"));return t.length>0?t:void 0}e.hasUnbreakableWPs=function(){var e,t=_createForOfIteratorHelper(r());try{for(t.s();!(e=t.n()).done;){if(!n(e.value))return!0}}catch(e){t.e(e)}finally{t.f()}return!1},e.initNoTemplate=function(e){e?document.body.classList.add("cs-notemplate-print"):document.body.classList.remove("cs-notemplate-print")},e.init=function(e,t){if(t){if(e)return document.body.classList.add("cs-pre-print"),void o.build(r());document.body.classList.remove("cs-pre-print"),function(){var e,t=_createForOfIteratorHelper(document.querySelectorAll(".cs-print-template"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.parentElement.removeChild(n)}}catch(e){t.e(e)}finally{t.f()}var r,i=_createForOfIteratorHelper(document.querySelectorAll(".__print-hidden"));try{for(i.s();!(r=i.n()).done;)r.value.classList.remove("__print-hidden")}catch(e){i.e(e)}finally{i.f()}}()}else s.show()}}(l=t.Printing||(t.Printing={})),function(e){var t=!n.browserCheck("IE"),r=n.kioskCheck;function i(){l.hasUnbreakableWPs()?l.initNoTemplate(!0):l.init(!0,t)}function a(){var e;l.hasUnbreakableWPs()?l.initNoTemplate(!1):(l.init(!1,t),"function"==typeof Event?e=new Event("resize"):(e=document.createEvent("Event")).initEvent("resize",!1,!1),window.dispatchEvent(e))}e.init=function(){r()?document.body.classList.add("cs-kiosk-print"):(window.addEventListener("beforeprint",i),window.addEventListener("afterprint",a))}}(u||(u={})),window.addEventListener("load",u.init)}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=_createClass((function e(t,n,r,i){_classCallCheck(this,e),this.page=t,this.componentId=n,this.siteRelativeUrl=r,this.extraQuery=i||{}}));e.RequestInfo=t}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(){function t(e,n){_classCallCheck(this,t),this.vm=n,this.serviceBase=e}return _createClass(t,[{key:"action",value:function(e,t){return this.serviceBase.action(e,t)}},{key:"objectAction",value:function(e,t){return this.serviceBase.objectAction(e,t)}},{key:"collectionAction",value:function(e,t){return this.serviceBase.collectionAction(e,t)}},{key:"withLoader",value:function(e){return new a(this,e,this.vm)}},{key:"withButtonLoader",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.PageManager.buttonLoaderClass;return new o(this,t,n,this.vm)}},{key:"notNull",value:function(){return new s(this,this.vm,!1)}},{key:"allowNull",value:function(){return new s(this,this.vm,!0)}},{key:"handleError",value:function(e){return new i(this,this.vm,e)}}]),t}(),r=function(e){_inherits(r,e);var n=_createSuper(r);function r(e,t){var i;return _classCallCheck(this,r),(i=n.call(this,null,t)).componentActionRequest=e,i}return _createClass(r,[{key:"action",value:function(e,t){var n=this;return function(r){return __awaiter(n,void 0,void 0,_regeneratorRuntime().mark((function n(){return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.componentActionRequest(e,r,null==t?void 0:t.allowNull,null==t?void 0:t.onError));case 1:case"end":return n.stop()}}),n,this)})))}}},{key:"objectAction",value:function(e,n){var r=this;return function(i){return __awaiter(r,void 0,void 0,_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t.ExchangeObjectHolder,r.next=3,this.componentActionRequest(e,i,null==n?void 0:n.allowNull,null==n?void 0:n.onError);case 3:return r.t1=r.sent,r.abrupt("return",r.t0.createOrDefault.call(r.t0,r.t1));case 5:case"end":return r.stop()}}),r,this)})))}}},{key:"collectionAction",value:function(e,n){var r=this;return function(i){return __awaiter(r,void 0,void 0,_regeneratorRuntime().mark((function r(){return _regeneratorRuntime().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t.ExchangeCollectionHolder,r.next=3,this.componentActionRequest(e,i,null==n?void 0:n.allowNull,null==n?void 0:n.onError);case 3:return r.t1=r.sent,r.abrupt("return",r.t0.createOrDefault.call(r.t0,r.t1));case 5:case"end":return r.stop()}}),r,this)})))}}}]),r}(n);t.ComponentRequestServiceProxy=r;var i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),a=t.call(this,e,r),i?ko.isObservable(i)?a.handler=function(){i(!0)}:a.handler=i:a.handler=function(){var e,t;null===(t=(e=r).isError)||void 0===t||t.call(e,!0)},a}return _createClass(n,[{key:"extend",value:function(e){var t=this,n=(e=e||{}).onError;return e.onError=function(){var e;null==n||n(),null===(e=t.handler)||void 0===e||e.call(t)},e}},{key:"action",value:function(e,t){return this.serviceBase.action(e,this.extend(t))}},{key:"objectAction",value:function(e,t){return this.serviceBase.objectAction(e,this.extend(t))}}]),n}(n),a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,i){var a;return _classCallCheck(this,n),(a=t.call(this,e,i)).loadingId=r,a}return _createClass(n,[{key:"action",value:function(e,t){var n=this.serviceBase.action(e,t);return this.loadify(n)}},{key:"objectAction",value:function(e,t){var n=this.serviceBase.objectAction(e,t);return this.loadify(n)}},{key:"loadify",value:function(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return __awaiter(t,void 0,void 0,_regeneratorRuntime().mark((function t(){var n,i=this;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.vm.execLoading((function(){return __awaiter(i,void 0,void 0,_regeneratorRuntime().mark((function t(){var i;return _regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.apply(this,r),t.next=3,i;case 3:n=t.sent;case 4:case"end":return t.stop()}}),t,this)})))}),this.loadingId);case 2:return t.abrupt("return",n);case 3:case"end":return t.stop()}}),t,this)})))}}}]),n}(n),o=function(t){_inherits(r,t);var n=_createSuper(r);function r(t,i){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.PageManager.buttonLoaderClass,s=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,r),(a=n.call(this,t,s)).commandNode=i,a.loadingButtonClass=o,a}return _createClass(r,[{key:"action",value:function(e,t){var n=this.serviceBase.action(e,t),r=this.commandNode;if(r.attr&&r.attr.name&&r&&r.nav.parent&&r.nav.parent.commandRef){var i=r.nav.parent.commandRef,a=r.attr.name;return this.loadifyButton(n,i,a,this.loadingButtonClass)}return n}},{key:"objectAction",value:function(e,t){var n=this.serviceBase.objectAction(e,t),r=this.commandNode;if(r&&r.attr&&r.attr.name&&r.nav.parent&&r.nav.parent.commandRef){var i=r.nav.parent.commandRef,a=r.attr.name;return this.loadifyButton(n,i,a,this.loadingButtonClass)}return n}},{key:"loadifyButton",value:function(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.PageManager.buttonLoaderClass;return function(){for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return __awaiter(i,void 0,void 0,_regeneratorRuntime().mark((function e(){var i,s=this;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vm.withButtonLoader((function(){return __awaiter(s,void 0,void 0,_regeneratorRuntime().mark((function e(){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.apply(this,o),e.next=3,n;case 3:i=e.sent;case 4:case"end":return e.stop()}}),e,this)})))}),n,r,a);case 2:return e.abrupt("return",i);case 3:case"end":return e.stop()}}),e,this)})))}}}]),r}(n),s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,n),(i=t.call(this,e,r)).doAllowNull=a,i}return _createClass(n,[{key:"action",value:function(e,t){return void 0===(t=t||{}).allowNull&&(t.allowNull=this.doAllowNull),this.serviceBase.action(e,t)}},{key:"objectAction",value:function(e,t){return void 0===(t=t||{}).allowNull&&(t.allowNull=this.doAllowNull),this.serviceBase.objectAction(e,t)}},{key:"collectionAction",value:function(e,t){return void 0===(t=t||{}).allowNull&&(t.allowNull=this.doAllowNull),this.serviceBase.collectionAction(e,t)}}]),n}(n)}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=function(){function e(t,n){_classCallCheck(this,e),this.allowedDecSeperators="[\\.,]",this.sepReplacer=1.1.toLocaleString().charAt(1),this.selectionCache={start:0,end:0},this.sender={},this.fieldEl=jQuery(t),this.numberField=n}return _createClass(e,[{key:"init",value:function(){var e=this;this.lastValidVal="",jQuery((function(){e.updateInternal()})),this.numberField.numberValue.notifySubscribers(this.numberField.numberValue()),this.numberField.stringValue.notifySubscribers(this.numberField.stringValue()),this.numberField.stringValue.subscribe(this.updateInternal.bind(this)),this.fieldEl.on("input",(function(){return e.validate(void 0,!0)})),this.numberField.updateOnBlur&&this.fieldEl.on("blur",(function(){return e.validate()})),this.fieldEl.on("keydown paste",(function(){return e.cacheSelection()})),this.numberField instanceof n&&this.numberField.placeholder?(this.fieldEl.attr("placeholder",this.numberField.placeholder()),this.numberField.placeholder.subscribe((function(t){e.fieldEl.attr("placeholder",t)}))):this.fieldEl.attr("placeholder","0")}},{key:"update",value:function(e){this.numberField.stringValue(e),this.updateInternal()}},{key:"updateInternal",value:function(){this.numberField.stringValue.source()!==this.sender&&this.validate(this.numberField.stringValue())&&(this.lastValidVal=""+this.numberField.stringValue(),this.fieldEl.val(this.lastValidVal))}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0===e?""+this.fieldEl.val():e,r=new RegExp("^(-{0,1})(\\d"+(t?"*":"+")+")("+this.allowedDecSeperators+"){0,1}(\\d*)$"),i=n.match(r);return i?(i[3]&&i[3]!==this.sepReplacer&&(n=n.replace(new RegExp(this.allowedDecSeperators),this.sepReplacer),this.fieldEl.val(n),this.fieldEl.setSelection(this.selectionCache.start+1,this.selectionCache.start+1)),this.updateFields(n,t),this.lastValidVal=n,!0):("-"!==(n=this.lastValidVal)||t||(n=""),this.updateFields(n,t),this.fieldEl.val(n),this.fieldEl.setSelection(this.selectionCache.start,this.selectionCache.end),!1)}},{key:"updateFields",value:function(e,t){var n=this,r=this.sender;clearTimeout(this.updateTimeout),t?this.numberField.updateAfterDelay?this.updateTimeout=setTimeout((function(){n.numberField.stringValue(e,r)}),1e3):this.numberField.updateOnBlur||this.numberField.stringValue(e,r):this.numberField.updateOnBlur&&this.numberField.stringValue(e,r)}},{key:"cacheSelection",value:function(){var e=$(event.target);return this.selectionCache=e.getSelection(),!0}}]),e}();e.SingleInputNumberField=t;var n=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this,e)).placeholder=null==e?void 0:e.placeholder,r}return _createClass(n)}(e.MultiModeNumberFieldViewModel);e.SingleInputNumberFieldViewModel=n}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=_createClass((function e(){_classCallCheck(this,e)}));t.charCode0="0".charCodeAt(0),t.charCode9="9".charCodeAt(0),t.format=function(e){for(var n,r,i="",a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];for(var l=0;l<e.length;l++){var u=f(l);if("}"===u){if("}"!==f(l+1))throw new Error("Formatter string isn't valid: "+e);i+="}",l++}else if("{"!==u)i+=u;else{if("{"===f(l+1))i+="{",l++;else{l++;for(var c="";l<e.length&&(n=l,r=void 0,(r=e.charCodeAt(n))>=t.charCode0&&r<=t.charCode9)&&"}"!==f(l);)c+=f(l),l++;if(l>=e.length||"}"!==f(l))throw new Error("Formatter string isn't valid: "+e);var d=Number(c);if(isNaN(d))throw new Error("Formatter string isn't valid. Use strings like 'aap {0} noot {1} mies {2}.'");if(d>=o.length)throw new Error("Too little parameters supplied for formatstring: "+e);i+=String(o[d])}}}return i;function f(t){return t<e.length?e.charAt(t):""}},e.StringUtil=t}(e.Utilities||(e.Utilities={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t,n=_createClass((function e(){_classCallCheck(this,e),this.isOpen=ko.observable(),this.isActive=ko.observable()}));e.TabData=n,function(e){e[e.Tab=1]="Tab",e[e.Accordion=2]="Accordion"}(t=e.TabViewRenderMode||(e.TabViewRenderMode={}));var r=_createClass((function e(n,r){var i=this;_classCallCheck(this,e),this.tabs=ko.observableArray(),this.currentTabIndex=ko.observable(-1),this.hasMultipleTabs=ko.computed((function(){return i.tabs().length>1})),this.initKoTemplate=function(){if(i.renderMode===t.Tab)i.koTemplateId="tabViewTabMode";else{if(i.renderMode!==t.Accordion)throw new Error("No template known for renderMode "+i.koTemplateId);i.koTemplateId="tabViewAccordionMode"}},this.addTab=function(e){i.tabs.push(e),1===i.tabs().length&&i.currentTabIndex()<0&&i.setActiveTab(e)},this.getActiveTab=function(){return i.currentTabIndex()>=0?i.getTab(i.currentTabIndex()):null},this.getTab=function(e){return i.tabs()[e]},this.tabClick=function(e){if(e.isActive())for(var t=i.tabs(),n=0;n<t.length;n++)t[n].isOpen(!t[n].isOpen());else{i.setActiveTab(e);for(var r=i.tabs(),a=0;a<r.length;a++)r[a].isOpen(!1)}},this.getTabIndex=function(e){return i.tabs.indexOf(e)},this.getActiveTabIndex=function(){return i.currentTabIndex()},this.setActiveTab=function(e){var n=i.getActiveTab();n!==e?(null!=n&&n.isActive(!1),e.isActive(!0),i.currentTabIndex(i.getTabIndex(e)),null!=e.tabSelected&&e.tabSelected()):i.renderMode===t.Accordion&&n.isActive(!n.isActive())},this.renderMode=n,this.initKoTemplate()}));e.TabViewBase=r;var i=function(e){_inherits(r,e);var n=_createSuper(r);function r(e){return _classCallCheck(this,r),n.call(this,t.Accordion,e)}return _createClass(r)}(r);e.AccordionView=i;var a=function(e){_inherits(r,e);var n=_createSuper(r);function r(e){return _classCallCheck(this,r),n.call(this,t.Tab,e)}return _createClass(r)}(r);e.TabView=a}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=_createClass((function e(t){var n=this;_classCallCheck(this,e),this.createBindings=function(){jQuery(n.timeUpHoursButton).on("click",(function(){n.moveTimeRoller(n.timeUpHoursButton,!0)})),jQuery(n.timeDownHoursButton).on("click",(function(){n.moveTimeRoller(n.timeDownHoursButton,!1)})),jQuery(n.timeUpMinutesButton).on("click",(function(){n.moveTimeRoller(n.timeUpMinutesButton,!0)})),jQuery(n.timeDownMinutesButton).on("click",(function(){n.moveTimeRoller(n.timeDownMinutesButton,!1)})),jQuery(n.hoursSelector).on("change",(function(){n.changeHourMinutSelect()})),jQuery(n.minutesSelector).on("change",(function(){n.changeHourMinutSelect()})),jQuery(n.input_field).on("input",(function(){n.timeInputHandling()})).on("keydown",(function(e){n.timeKeyDownHandling(e)})).on("blur",(function(){n.timeBlurHandling()}));jQuery(n.timeInputWrapper).on("click",".cs-set-time-button",(function(e){e.stopPropagation();var t=jQuery(n.timeInputWrapper).find(".cs-set-time-container");if(jQuery(".cs-set-time-container:visible").not(t).hide(),jQuery(".cs-customDateInput .cal-container:visible").hide(),t.toggle(),jQuery(document).off("click.cs-timepicker"),t.is(":visible")){var r=n.input_field.value.split(":"),i=r[0],a=r[1];i&&a&&(jQuery(n.hoursSelector).val(i),jQuery(n.minutesSelector).val(a)),jQuery(document).on("click.cs-timepicker",(function(e){0===jQuery(e.target).closest(jQuery(n.timeInputWrapper)).length&&(jQuery(".cs-set-time-container").hide(),jQuery(document).off("click.cs-timepicker"))}))}}))},this.changeHourMinutSelect=function(){var e=jQuery(n.hoursSelector).val()+":"+jQuery(n.minutesSelector).val();n.input_field.value=e,jQuery(n.input_field).trigger("blur")},this.moveTimeRoller=function(e,t){var r,i,a,o;if(!0===t?(i=jQuery(e).next().children(),a=jQuery(i).find("option").length,r=jQuery(i).prop("selectedIndex")+1):(i=jQuery(e).prev().children(),a=jQuery(i).find("option").length,r=jQuery(i).prop("selectedIndex")-1),r<0?jQuery(i).prop("selectedIndex",a-1):r>a-1?jQuery(i).prop("selectedIndex",0):jQuery(i).prop("selectedIndex",r),-1!==jQuery(i).attr("class").indexOf("minutes")){var s=jQuery(n.hoursSelector).val();null===s&&(s="00"),o=s+":"+jQuery(i).val()}else{var l=jQuery(n.minutesSelector).val();null===l&&(l="00"),o=jQuery(i).val()+":"+l}n.input_field.value=o,jQuery(n.input_field).trigger("change"),jQuery(n.input_field).trigger("blur")},this.timeInputHandling=function(){n.selectionCache=jQuery(n.input_field).focus().getSelection();var e=!0,t=n.input_field.value.replace(/[^\d:-]/g,"");t!==n.input_field.value&&(e=!1);var r=t.split(":").length-1,i=t.split(":"),a=i[0],o=i[1];8!==n.charCode&&46!==n.charCode&&(a||(a="00"),o||(o="00"));var s=n.selectionCache.start;2===s&&2!==r&&(s=3),n.input_field.value=a&&o?a.slice(0,2)+":"+o.slice(0,2):t,!1===e&&s--,jQuery(n.input_field).setSelection(s),jQuery(n.input_field).trigger("change")},this.timeKeyDownHandling=function(e){n.charCode=e.which||e.keyCode;var t=jQuery(n.input_field).focus().getSelection().start;8===n.charCode&&":"===n.input_field.value.charAt(t-1)&&jQuery(n.input_field).setSelection(t-1)},this.timeBlurHandling=function(){var e=n.input_field.value.split(":"),t=e[0],r=e[1];r&&t&&(1===t.length&&(t="0"+t),1===r.length&&(r="0"+r),n.input_field.value=t+":"+r);!1===/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/.test(n.input_field.value)&&(jQuery(n.input_field).prop("required")||n.input_field.value)?jQuery(n.input_field).addClass("invalid"):jQuery(n.input_field).removeClass("invalid"),jQuery(n.input_field).trigger("change")},this.populateMinutes=function(){for(var e,t=0;t<=59;t++)(e=t)<10&&(e="0"+e),jQuery(n.minutesSelector).append(jQuery("<option></option>").attr("value",e).text(e))},this.populateHours=function(){for(var e,t=0;t<=23;t++)(e=t)<10&&(e="0"+e),jQuery(n.hoursSelector).append(jQuery("<option></option>").attr("value",e).text(e))},this.input_field=document.getElementById(t),jQuery(this.input_field).attr("type","text"),this.input_field.placeholder="00:00";this.input_field.insertAdjacentHTML("afterend","<span class='cs-set-time-button cs-icon-clock'></span>\n                <div class='cs-set-time-container'>\n                    <div class='time-rotator time-roller-hours'>\n                        <div class='time-up-hours cs-icon-caret-up'>\n                        </div>\n                        <div class='time-input-roll input-roll-hours'>\n                            <select class='cs-time-select-hours'>\n                            </select>\n                        </div>\n                        <div class='time-down-hours cs-icon-caret-down'>\n                        </div>\n                    </div>\n                    <div class='time-rotator time-roller-minutes'>\n                        <div class='time-up-minutes cs-icon-caret-up'>\n                        </div>\n                        <div class='time-input-roll input-roll-minutes'>\n                            <select class='cs-time-select-minutes'>\n                            </select>\n                        </div>\n                        <div class='time-down-minutes cs-icon-caret-down'>\n                        </div>\n                    </div>\n                </div>"),this.timeInputWrapper=this.input_field.parentNode,this.minutesSelector=this.timeInputWrapper.getElementsByClassName("cs-time-select-minutes"),this.hoursSelector=this.timeInputWrapper.getElementsByClassName("cs-time-select-hours"),this.timeUpHoursButton=this.timeInputWrapper.getElementsByClassName("time-up-hours"),this.timeDownHoursButton=this.timeInputWrapper.getElementsByClassName("time-down-hours"),this.timeUpMinutesButton=this.timeInputWrapper.getElementsByClassName("time-up-minutes"),this.timeDownMinutesButton=this.timeInputWrapper.getElementsByClassName("time-down-minutes"),this.populateMinutes(),this.populateHours(),this.createBindings()}));e.timepicker=function(e){return new t(e)}}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(t){_inherits(r,t);var n=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=n.apply(this,arguments)).expanded=ko.observable(!1),e.collapsed=ko.pureComputed((function(){return!e.expanded()}),_assertThisInitialized(e)),e.commands=ko.observableArray([]),e._initialized=!1,e}return _createClass(r,[{key:"init",value:function(e,t,n,r){this.parent=t,n?this.clientId=n:t&&(this.clientId=t.clientId),r?this.uniqueId=r:t&&(this.uniqueId=t.uniqueId),this._initialized||(this.registerCommand("commands.expand",this.expand.bind(this)),this.registerCommand("commands.collapse",this.collapse.bind(this)),this._initialized=!0),this.toggle(e),this.expanded(e)}},{key:"expand",value:function(e,t,n,r){this.toggle(!0),this.expanded(!0)}},{key:"collapse",value:function(e,t,n,r){this.toggle(!1),this.expanded(!1)}},{key:"toggle",value:function(t){var n={};n[e.Views.CommandRefNodeAttributes.commandCssClass]="cs-togglebutton";var r={};r[e.Views.CommandRefNodeAttributes.commandCssClass]="cs-togglebutton cs-togglebutton-expanded",this.createCommandNodeFromProperties(this.commands,[{isEnabled:!0,visible:!t,name:"commands.expand",properties:this.expandCommand,attr:n},{isEnabled:!0,visible:t,name:"commands.collapse",properties:this.collapseCommand,attr:r}])}}]),r}(e.Core.ViewModelBase);t.TogglePanel=n}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=function(){function e(){_classCallCheck(this,e),this.observable=ko.observable(),this.subscriptions=[]}return _createClass(e,[{key:"trigger",value:function(e){this.observable(Object.assign({},e))}},{key:"onTrigger",value:function(e){var t=this,n=this.observable.subscribe(e);return this.subscriptions.push(n),{dispose:function(){n.dispose(),t.subscriptions.indexOf(n)>=0&&t.subscriptions.splice(t.subscriptions.indexOf(n))}}}},{key:"dispose",value:function(){this.subscriptions.forEach((function(e){e.dispose()})),this.subscriptions=[]}}]),e}();e.UserSurveyHost=t}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(){function e(){_classCallCheck(this,e),this._validators=[]}return _createClass(e,[{key:"validators",get:function(){return this._validators}},{key:"addValidator",value:function(e){this._validators.push(e)}},{key:"getResource",value:function(e){return this._resources[e]}}],[{key:"Create",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.Validators,i=new e;i._resources=t.Resources;var l,d=_createForOfIteratorHelper(r);try{for(d.s();!(l=d.n()).done;){var f=l.value,h=f.$type.split(",")[0],m=void 0;if("ChipSoft.SharePoint.Validation.Validators.RequiredStringValidator"===h&&(m=new a(f)),"ChipSoft.SharePoint.Validation.Validators.NumericStringValidator"===h)m=new s(f);else if("ChipSoft.SharePoint.Validation.Validators.NumericStringCompareValidator"===h)m=new u(f);else if("ChipSoft.SharePoint.Validation.Validators.NumericStringRangeValidator"===h)m=new c(f);else if("ChipSoft.SharePoint.Validation.Validators.StringLengthValidator"===h)m=new o(f);else if(n)throw new Error("Unsupported validator type: "+h);m&&i.addValidator(m)}}catch(e){d.e(e)}finally{d.f()}return i}}]),e}();t.ValidationModel=n;var r,i=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,t),this.values={},this.valuesRetrievers=[],this.getValue=function(e){var t=n.values[e];if(void 0!==t)return t();var r,i=_createForOfIteratorHelper(n.valuesRetrievers);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(!a.namespce||e.startsWith(a.namespce)){var o=a.namespce?e.substring(a.namespce.length):e,s=a.retriever();if(s){var l=s(o);if(void 0!==l)return l}}}}catch(e){i.e(e)}finally{i.f()}throw new Error("Key ".concat(e," not found"))},this.keyMapper=null!=r?r:function(e){return e.ResourceFile+"/"+e.ResourceName},this.validationModel=e}return _createClass(t,[{key:"bindValue",value:function(e,t){this.values[e]=t}},{key:"bindValueRetriever",value:function(e,t){this.valuesRetrievers.push({namespce:t,retriever:e})}},{key:"bindPostValuesRetriever",value:function(e,t){this.bindValueRetriever((function(){var t=e();return function(e){if(t){var n=t.Fields.Items.find((function(t){return t.Name===e}));return void 0===n?void 0:n.Value}}}),t)}},{key:"validate",value:function(){var t,n=this,r=[],i={getResource:function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return e.Utilities.StringUtil.format(n.validationModel.getResource(n.keyMapper(t)),i)},getValue:this.getValue},a=_createForOfIteratorHelper(this.validationModel.validators);try{for(a.s();!(t=a.n()).done;){var o=t.value.validate(i);r.push.apply(r,o)}}catch(e){a.e(e)}finally{a.f()}return r}},{key:"addValidator",value:function(e){this.validationModel.addValidator(e)}}],[{key:"Create",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new t(n.Create(e,i),r)}}]),t}();t.ValidationExecutor=i,function(e){e.Equal="Equal",e.NotEqual="NotEqual",e.GreaterThan="GreaterThan",e.GreaterThanEqual="GreaterThanEqual",e.LessThan="LessThan",e.LessThanEqual="LessThanEqual"}(r||(r={}));var a=function(){function e(t){_classCallCheck(this,e),this.descriptor=t}return _createClass(e,[{key:"validate",value:function(e){return e.getValue(this.descriptor.Input.Key).trim().length>0?[]:[e.getResource(this.descriptor.ErrorMessageRequiredField)]}}]),e}();t.RequiredStringValidator=a;var o=function(){function e(t){_classCallCheck(this,e),this.descriptor=t}return _createClass(e,[{key:"validate",value:function(e){return e.getValue(this.descriptor.Input.Key).trim().length<=this.descriptor.MaxLength?[]:[e.getResource(this.descriptor.ErrorMessageTooLong,this.descriptor.MaxLength)]}}]),e}();t.StringLengthValidator=o;var s=function(){function e(t){_classCallCheck(this,e),this.descriptor=t}return _createClass(e,[{key:"validate",value:function(e){var t=e.getValue(this.descriptor.Input.Key).trim();t.startsWith("-")&&(t=t.substring(1));var n=t.split(/[,.]/);if(n.length>2)return[e.getResource(this.descriptor.ErrorMessageNotAValidNumber)];for(var r=n[0],i=0;i<r.length;i++)if(r.charCodeAt(i)<"0".charCodeAt(0)||r.charCodeAt(i)>"9".charCodeAt(0))return[e.getResource(this.descriptor.ErrorMessageNotAValidNumber)];if(1===n.length)return[];for(var a=n[1],o=a.length;o>0&&"0"===a[o-1];)o--;for(var s=0;s<o;s++)if(a[s]<"0"||a[s]>"9")return[e.getResource(this.descriptor.ErrorMessageNotAValidNumber)];return o>this.descriptor.Decimals?[e.getResource(this.descriptor.ErrorMessageTooManyDecimals,this.descriptor.Decimals)]:[]}}]),e}();t.NumericStringValidator=s;var l=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getStringValueAsNumber",value:function(e,t){var n=(t.getValue(e)||"").trim();return""===(n=n.replace(",","."))||null==n?0:parseFloat(n)}}]),e}(),u=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).descriptor=e,r}return _createClass(n,[{key:"validate",value:function(e){var t=this,n=this.getStringValueAsNumber(this.descriptor.Input.Key,e),i=this.getStringValueAsNumber(this.descriptor.CompareTo.Key,e);return function(){if(t.descriptor.CompareOperator===r.Equal)return n===i;if(t.descriptor.CompareOperator===r.GreaterThan)return n>i;if(t.descriptor.CompareOperator===r.GreaterThanEqual)return n>=i;if(t.descriptor.CompareOperator===r.LessThan)return n<i;if(t.descriptor.CompareOperator===r.LessThanEqual)return n<=i;if(t.descriptor.CompareOperator===r.NotEqual)return n!==i;throw new Error("Unsupported comparator: "+t.descriptor.CompareOperator)}()?[]:[e.getResource(this.descriptor.ErrorMessageValueDoesNotCompare)]}}]),n}(l);t.NumericStringCompareValidator=u;var c=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),(r=t.call(this)).descriptor=e,r}return _createClass(n,[{key:"validate",value:function(e){var t=this.getStringValueAsNumber(this.descriptor.Input.Key,e);return t>this.descriptor.Max?[e.getResource(this.descriptor.ErrorMessageTooHigh,this.descriptor.Max)]:t<this.descriptor.Min?[e.getResource(this.descriptor.ErrorMessageTooLow,this.descriptor.Min)]:[]}}]),n}(l);t.NumericStringRangeValidator=c}(e.Validation||(e.Validation={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n;!function(e){e[e.View=0]="View",e[e.Item=1]="Item",e[e.ViewField=2]="ViewField",e[e.ViewCommand=3]="ViewCommand",e[e.ItemField=4]="ItemField",e[e.ItemCommand=5]="ItemCommand"}(n=t.ViewDataModelCreatorType||(t.ViewDataModelCreatorType={})),function(e){e[e.None=0]="None",e[e.Header=1]="Header",e[e.Field=2]="Field"}(t.FieldHeaderType||(t.FieldHeaderType={}));var r=_createClass((function e(){_classCallCheck(this,e)}));t.ViewDataModelCreatorParentContext=r;var i=function(){function e(t,n){_classCallCheck(this,e),this.callDefaultModelCreator=!0,this._node=t,this._model=n}return _createClass(e,[{key:"setModelProperty",value:function(e,t,n){return void 0===n||!0===n?(this._model.hasOwnProperty(e)?this._model[e](t):this._model[e]=ko.observable(t),this._model[e]):(this._model[e]=t,null)}},{key:"setModelPropertyIfUnset",value:function(e,t,n){this._model[e]||this.setModelProperty(e,t,n)}},{key:"addComputedProperty",value:function(e,t){var n=this;if(this._model.hasOwnProperty(e))throw new Error("A property with name '"+e+"' is already defined. A computed property can only be defined once.");var r=this._model,i=ko.pureComputed((function(){return t.call(r,n._node)}),this._model);return this._model[e]=i,i}}]),e}();t.ViewDataModelCreatorContext=i;var a=function(){function t(){_classCallCheck(this,t),this.items={}}return _createClass(t,[{key:"getProvider",value:function(e){return this.items[e]}},{key:"addProvider",value:function(t,n){if(this.items[t])throw e.PageManager.logError("A live value provider for prefix ".concat(t," is already registered.")),new Error("A live value provider for prefix ".concat(t," is already registered."));this.items[t]=n}}]),t}();t.LiveValueProviders=a;var o=_createClass((function e(){_classCallCheck(this,e)}));o.canSelect="canSelect",o.selected="selected",o.highlighted="highlighted",o.expanded="expanded",o.expandFunction="expandFunction",o.customExpandFunction="customExpandFunction",o.selectFunction="selectFunction",o.customSelectFunction="customSelectFunction",t.DefaultItemNodeModelProperties=o;var s=_createClass((function e(){_classCallCheck(this,e)}));s.showLabelColumn="showLabelColumn",s.labelColumnWidth="labelColumnWidth",s.labelStyle="labelStyle",s.noDataPolicy="noDataPolicy",s.noResultText="noResultText",t.DefaultItemModelProperties=s;var l=_createClass((function e(){_classCallCheck(this,e)}));function u(e,t){if(!e||!e.views)return null;for(var n=0;n<e.views.length;n++){var r=e.views[n];if(r.definition.ViewVersion.ClassId===t.ClassId&&r.definition.ViewVersion.Mode===t.Mode&&r.definition.ViewVersion.Uri===t.Uri&&r.definition.ViewVersion.Version===t.Version)return r}return null}function c(e,t,n,r){if(n&&"/"!==n[0]&&"~"!==n[0]){if(t&&t.Uri&&"~"!==t.Uri[0]){var i=t.Uri.lastIndexOf("/");i>=0&&(n=t.Uri.substring(0,i+1)+n)}}else if("~inline"===n)throw new Error("do NOT call findSubView for inline views");if(n&&"/"!==n[0]&&"~"!==n[0]&&(n="/"+n),!e||!e.views)return null;for(var a=0;a<e.views.length;a++){var o=e.views[a];if(o.definition.ViewVersion.ClassId===r&&o.definition.ViewVersion.Mode===t.Mode&&o.definition.ViewVersion.Uri===n)return o}return null}function d(e){return SparkMD5.hash(e.ClassId+e.Mode+e.Uri+e.Version)}function f(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.ClassId!==t.ClassId)return!1;if(e.ObjectIds.length!==t.ObjectIds.length)return!1;for(var n=0;n<e.ObjectIds.length;n++)if(e.ObjectIds[n]!==t.ObjectIds[n])return!1;return!0}function h(e,t,n,r,i,a,o){return v(e,t,n,r,i,a.Prefix,a.Value,o)[0]}function m(e,t,n,r,i,a,o,s){return a.Prefix?v(e,t,n,r,i,a.Prefix,a.Input,s)[0]:{ValueType:o,Value:a.Value}}function p(e){return e?{ValueType:e.valueType,Value:e.value}:null}function v(e,t,n,r,i,a,o,s){if(!a)return[{ValueType:"String",Value:o},null];var l=a+":"+o,u=null;if(n&&r){if(u=r.getField(n,l),t.itemScopedViewData)for(var c=0;c<t.itemScopedViewData.length;c++){var h=t.itemScopedViewData[c];if(h.Key.ExtraKey===n.ExtraKey&&f(h.Key.ObjectId,n.ObjectId)){if(h.Value.hasOwnProperty(l))return[p(h.Value[l]),u];break}}if(u&&u.Value)return[u.Value,u]}var m={ClassId:"~virtual",ObjectIds:[d(i.ViewVersion)]};if(e.viewData)for(var g=0;g<e.viewData.length;g++){var C=e.viewData[g];if(""===C.Key.ExtraKey&&f(C.Key.ObjectId,m)){if(C.Value.hasOwnProperty(l))return[p(C.Value[l]),u];break}}var w=a.toLowerCase();if(s){var y=s.getProvider(a);if(y){var b=y.provideLiveValue({currentObject:n,exchangeUtil:r,key:a,value:o});if(null!==b)return[b,null]}}if("const"===w)return[{ValueType:"String",Value:o},null];if("bool"===w){var D=null;if("true"===o)D=!0;else if("false"===o)D=!1;else if(null!=o&&0!==o.length&&"null"!==o)throw new Error("Invalid value '"+o+"' for bool.");return[{ValueType:"Boolean",Value:D},null]}if("int"===w||"long"===w){var k=null;if(null!=o&&0!==o.length&&"null"!==o){if(isNaN(o))throw new Error("Invalid value '"+o+"' for "+w+".");var x=+o;if(x%1!=0)throw new Error("Invalid value '"+o+"' for "+w+".");k=x}return[{ValueType:"int"===w?"Integer":"Integer64",Value:k},null]}if("double"===w){var I=null;if(null!=o&&0!==o.length&&"null"!==o){if(isNaN(o))throw new Error("Invalid value '"+o+"' for double.");I=+o}return[{ValueType:"Float",Value:I},null]}if("parm"===w&&o){var F,E=o.indexOf(":"),V="view",_=null;if(E>=0)if("command"===(V=o.substring(0,E))||"objectfield"===V||"viewcommand"===V||"viewfield"===V){var S=o.indexOf(":",E+1);if(!S)return[null,null];F=o.substring(S+1),_=o.substring(E+1,S)}else F=o.substring(E+1);else F=o;if("view"===V||"viewcommand"===V||"viewfield"===V){if(e&&e.parameters&&e.parameters.hasOwnProperty(V))if(_){var P=e.parameters[V];if(P.ts&&P.ts.hasOwnProperty(_)&&P.ts[_].hasOwnProperty(F))return[p(P.ts[_][F]),null]}else{var O=e.parameters[V];if(O.nts&&O.nts.hasOwnProperty(F))return[p(O.nts[F]),null]}}else if("object"===V||"objectfield"===V){if(n&&t&&t.parameters&&t.parameters.hasOwnProperty(V))if(_){var A=t.parameters[V],T=null;if(A.ts||A.ts.hasOwnProperty(_))for(var R=0;R<A.ts[_].length;R++){var N=A.ts[_][R];if(N.Key.ExtraKey===n.ExtraKey&&f(N.Key.ObjectId,n.ObjectId)){T=N.Value;break}}if(T&&T.hasOwnProperty(F))return[p(T[F]),null]}else{var M=t.parameters[V],j=null;if(M.nts)for(var B=0;B<M.nts.length;B++){var L=M.nts[B];if(L.Key.ExtraKey===n.ExtraKey&&f(L.Key.ObjectId,n.ObjectId)){j=L.Value;break}}if(j&&j.hasOwnProperty(F))return[p(j[F]),null]}}else if("command"===V&&i&&i.Commands){for(var U,W=0;W<i.Commands.Items.length;W++)if(i.Commands.Items[W].Name===_){U=i.Commands.Items[W];break}if(U&&"Object"===U.Scope&&n&&t&&t.parameters&&t.parameters.hasOwnProperty(V)){var Q=t.parameters[V],q=null;if(Q.ts||Q.ts.hasOwnProperty(_))for(var H=0;H<Q.ts[_].length;H++){var Y=Q.ts[_][H];if(Y.Key.ExtraKey===n.ExtraKey&&f(Y.Key.ObjectId,n.ObjectId)){q=Y.Value;break}}if(q&&q.hasOwnProperty(F))return[p(q[F]),null]}}if(i&&i.ParameterBindings){for(var z=function(e){if("view"===e)return"View";if("viewfield"===e)return"ViewField";if("viewcommand"===e)return"ViewCommand";if("collection"===e)return"Collection";if("object"===e)return"Object";if("objectfield"===e)return"ObjectField";if("command"===e)return"Command";if(e)throw new Error("Unsupported parameter scope: "+e);return null}(V),K=null,$=0;$<i.ParameterBindings.Items.length;$++){var G=i.ParameterBindings.Items[$];if(G.Name===F&&G.Scope===z&&(_&&_===G.ScopeTarget||!_&&!G.ScopeTarget)){K=G;break}}if(K)return v(e,t,n,r,i,K.Prefix,K.Value,s)}if(l.startsWith("mfield:")){var Z=o.indexOf(":",8),J=o.indexOf(":",Z+1);return v(e,t,n,r,i,o.substring(Z+1,J),o.substring(J+1),s)}}else{if(l.startsWith("mfield:")){var X=o.indexOf(":",8),ee=o.indexOf(":",X+1);return v(e,t,n,r,i,o.substring(X+1,ee),o.substring(ee+1),s)}var te=n&&r&&t,ne=!1;if((l.startsWith("field:")||l.startsWith("expr:")||l.startsWith("self:")||l.startsWith("zp:puburl:")||l.startsWith("zp:externalLinkTargetForField:"))&&(ne=!0),(te||!ne)&&l.startsWith("mfield:")){var re=o.indexOf(":",8),ie=o.indexOf(":",re+1);return v(e,t,n,r,i,o.substring(re+1,ie),o.substring(ie+1),s)}}return[null,null]}function g(e,t,n){return w(e.Prefix,e.Value,t,n)}function C(e,t,n){return w(e.Prefix,e.Input,t,n)}function w(e,t,n,r){var i={resolved:!1,view:null};return e&&"self"===e.toLowerCase()&&t?(i.resolved=!0,i.view=c(n,r,t,r.ClassId),i):i}function y(e,t){return e.Prefix?e.Prefix+":"+e.Input:t?t+":"+e.Value:e.Value}function b(e,t,n){n?e.call(n,t):e(t)}function D(e,t){if(!e)return null;if(!0!==t&&"Z"===e[e.length-1])throw new Error("UTC date, expected local date.");var n=-1,r=-1;if("Z"===e[e.length-1]){r=e.length-1;for(var i=e.length-1;i>=0;i--){var a=e[i];if("T"===a||"t"===a){n=i;break}if("+"===a)throw new Error("Unexpected ISO date format: "+e);if("-"===a)throw new Error("Unexpected ISO date format: "+e)}}else for(var o=e.length-1;o>=0;o--){var s=e[o];if("T"===s||"t"===s){n=o;break}("+"===s||"-"===s)&&(r=o)}if(n<0)throw new Error("Unexpected ISO date format: "+e);var l=e.substring(0,n),u=r<0?e.substring(n+1):e.substring(n+1,r),c=l.split("-"),d=u.split(":");if(3!==c.length||3!==d.length)throw new Error("Unexpected ISO date format: "+e);var f=d[2],h="0",m=d[2].indexOf(".");return m>=0&&(f=d[2].substring(0,m),h=d[2].substring(m+1).substring(0,3)),[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10),parseInt(d[0],10),parseInt(d[1],10),parseInt(f,10),parseInt(h,10)]}function k(e){if(!e)return null;var t=D(e,!1);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5],t[6])}function x(e){if(!e)return null;if(isNaN(e.getTime()))throw new Error("Invalid date");var t=e.getFullYear(),n=e.getMonth(),r=e.getDate();function i(e){return e<10?"0"+e:e}var a=("000"+t).slice(-4)+"-"+i(n+1)+"-"+i(r)+"T"+i(e.getHours())+":"+i(e.getMinutes())+":"+i(e.getSeconds());return e.getMilliseconds()>0&&(a+="."+("00"+e.getMilliseconds()).slice(-3)),a}function I(e){if(e&&"Z"===e[e.length-1])throw new Error("UTC date, expected local date.");if(N(e))return"";var t=D(e,!1);return("000"+t[0]).slice(-4)+"-"+("0"+t[1]).slice(-2)+"-"+("0"+t[2]).slice(-2)}function F(e){if(e&&"Z"===e[e.length-1])throw new Error("UTC date, expected local date.");if(N(e))return"";var t=D(e,!1);return("000"+t[0]).slice(-4)+"-"+("0"+t[1]).slice(-2)+"-"+("0"+t[2]).slice(-2)}function E(e){if(e&&"Z"===e[e.length-1])throw new Error("UTC date, expected local date.");if(N(e))return"00:00";var t=D(e,!1);return("0"+t[3]).slice(-2)+":"+("0"+t[4]).slice(-2)}function V(e){if(e&&"Z"===e[e.length-1])throw new Error("UTC date, expected local date.");if(N(e))return"00:00";var t=D(e,!1);return("0"+t[3]).slice(-2)+":"+("0"+t[4]).slice(-2)}function _(t,n){if(!t&&!n)return void 0===t||void 0===n?e.ConstDateHolder.csEmptyDate:e.ConstDateHolder.csEmptyDT;var r=101;void 0!==t&&void 0!==n||(r=102);var i=0,a=1,o=0,s=0,l=0;if(t){var u=t.split("-");if(3!==u.length)throw new Error("Invalid date input value: "+t);r=parseInt(u[0],10),i=parseInt(u[1],10)-1,a=parseInt(u[2],10)}if(n){var c=n.split(":");if(2===c.length)o=parseInt(c[0],10),s=parseInt(c[1],10);else{if(3!==c.length)throw new Error("Invalid time input value: "+n);o=parseInt(c[0],10),s=parseInt(c[1],10),l=parseInt(c[2],10)}}return e.ConstDate.tryCreate(r,i,a,o,s,l)}function S(e,t){var n;return e||t?null===(n=_(e,t))||void 0===n?void 0:n.toMutableDate():void 0===e||void 0===t?R.Date.csEmptyDate:R.Date.csEmptyDT}function P(e,t){if(!e&&!t)return void 0===e||void 0===t?R.csEmptyDate:R.csEmptyDT;var n=101,r=0,i=1,a=0,o=0,s=0;if(void 0!==e&&void 0!==t||(n=102),e){var l=e.split("-");if(3!==l.length)throw new Error("Invalid date input value: "+e);n=parseInt(l[0],10),r=parseInt(l[1],10)-1,i=parseInt(l[2],10)}if(t){var u=t.split(":");if(2===u.length)a=parseInt(u[0],10),o=parseInt(u[1],10);else{if(3!==u.length)throw new Error("Invalid time input value: "+t);a=parseInt(u[0],10),o=parseInt(u[1],10),s=parseInt(u[2],10)}}return x(new Date(n,r,i,a,o,s,0))}function O(e,t){if(null==e)return!1===t?"":"0";var n=e.toFixed(16),r=n.indexOf(".");return r<0?n||"0":n.substring(0,r)||"0"}function A(e,t){if(null==e)return!1===t?"":"0";var n=e.toString();if(/[eE]/.test(n)){for(var r=(n=e.toFixed(16)).length-1;r>=0&&"0"===n[r];)r--;n=n.substring(0,r+1)}var i=n.indexOf(".");return i<0?"":n.substring(i+1)||"0"}l.showColumnHeaders="showColumnHeaders",l.noResultsText="noResultsText",l.pagerPosition="pagerPosition",l.noDataPolicy="noDataPolicy",l.showPageSpan="showPageSpan",l.selectable="selectable",l.isLoading="isLoading",l.multiselect="multiselect",l.singleselect="singleselect",l.selectCommand="selectCommand",l.selectCommandEnabled="selectCommandEnabled",l.selectCommandNode="selectCommandNode",l.highlightable="highlightable",l.addEmptyItem="addEmptyItem",l.emptyItemText="emptyItemText",l.commandsColumnCaption="commandsColumnCaption",l.expanderOpenCaption="expanderOpenCaption",l.expanderCloseCaption="expanderCloseCaption",l.mainRowTemplate="mainRowTemplate",l.beforeRowTemplate="beforeRowTemplate",l.afterRowTemplate="afterRowTemplate",l.lastRowTemplate="lastRowTemplate",l.expanderRowTemplate="expanderRowTemplate",t.DefaultListModelProperties=l,t.findView=u,t.areObjectIdsEqual=f,t.getPartsFromIsoDateString=D,t.constDateFromIsoDateString=function(t){return e.ConstDate.tryCreate(k(t))},t.dateFromIsoDateString=k,t.dateToIsoDateString=x,t.dateInputValueFromDateValue=I,t.dateInputValueFromDateTimeValue=F,t.dateInputValueFromDate=function(e){if(e&&isNaN(e.getTime()))throw new Error("Invalid date");return N(e)?"":e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)},t.dateValueFromInputAsDate=function(e){return e?S(e,void 0):R.Date.csEmptyDate},t.dateValueFromInput=function(e){return e?P(e,void 0):R.csEmptyDate},t.timeInputValueFromTimeValue=E,t.timeInputValueFromDateTimeValue=V,t.timeInputValueFromDate=function(e){if(e&&isNaN(e.getTime()))throw new Error("Invalid date");return N(e)?"00:00":("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)},t.timeValueFromInputAsDate=function(e){return e?S(void 0,e):R.Date.csEmptyDate},t.timeValueFromInput=function(e){return e?P(void 0,e):R.csEmptyDate},t.dateTimeValueFromInputAsConstDate=_,t.dateTimeValueFromInputAsDate=S,t.dateTimeValueFromInput=P,t.integerInputValueFromFieldValue=O,t.decimalInputValueFromFieldValue=A;var T,R=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"csEmptyDT",get:function(){return e.Core.dateToIsoDateString(e.Core.SharedConstants.Date.csEmptyDT)}},{key:"csEmptyDate",get:function(){return e.Core.dateToIsoDateString(e.Core.SharedConstants.Date.csEmptyDate)}},{key:"csBODate",get:function(){return e.Core.dateToIsoDateString(e.Core.SharedConstants.Date.csBODate)}},{key:"csEODate",get:function(){return e.Core.dateToIsoDateString(e.Core.SharedConstants.Date.csEODate)}},{key:"csSQLBODate",get:function(){return e.Core.dateToIsoDateString(e.Core.SharedConstants.Date.csSQLBODate)}}]),t}();function N(e){return!e||(e instanceof Date?e.getTime()===R.Date.csEmptyDate.getTime()||e.getTime()===R.Date.csEmptyDT.getTime()||e.getTime()===R.Date.csBODate.getTime()||e.getTime()===R.Date.csEODate.getTime()||e.getTime()===R.Date.csSQLBODate.getTime():e===R.csEmptyDate||e===R.csEmptyDT||e===R.csBODate||e===R.csEODate||e===R.csSQLBODate)}function M(e){return e?"true":"false"}function j(e){var t=new r;return t.currentCollection=e.currentCollection,t.currentObject=e.currentObject,t.exchangeUtil=e.exchangeUtil,t.path=e.path,t.view=e.view,t}function B(e,t,n,r){for(var i={Attributes:{IgnoreCase:!1,Items:[],Locked:!0},Commands:{IgnoreCase:!1,Items:[],Locked:!0},Fields:{IgnoreCase:!0,Items:[],Locked:!0},Id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),Locked:!0,ParameterBindings:{IgnoreCase:!1,Items:[],Locked:!0},ViewType:"None",ViewVersion:{ClassId:r,Mode:t.Name,Uri:"~inline",Version:e.ViewVersion.Version}},a=0,o=0;o<n.Items.length;o++){var s=n.Items[o];s.Visible&&(!1===s.Visible.Value||s.Visible.Prefix&&"bool"===s.Visible.Prefix.toLowerCase()&&"false"===s.Visible.Input)||a++,i.Fields.Items.push(s)}return 1===a&&i.ParameterBindings.Items.push({Name:"ShowColumnHeaders",Prefix:"bool",Value:"false",Scope:"View",ScopeTarget:null}),i}function L(e,t,n,r){if(t.InlineSubViewData&&r){if(t.InlineSubViewData.Items.hasOwnProperty(r))return{definition:B(e,t,t.InlineSubViewData.Items[r],r),templateName:null};if(t.InlineSubViewData.Items.hasOwnProperty(""))return{definition:B(e,t,t.InlineSubViewData.Items[""],r),templateName:null}}if(t.SubViews&&r&&t.SubViews.Items.hasOwnProperty(r)){var i=t.SubViews.Items[r];return c(n,e.ViewVersion,i,r)}if(t.DefaultSubView){var a=t.DefaultSubView;return c(n,e.ViewVersion,a,r)}return null}function U(e,t){return t&&t.ViewVersion&&t.ViewVersion.Uri&&"~"!==t.ViewVersion.Uri[0]?t:e}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o="cs-grid-"+(a?a+"-":"");return"".concat(o,"x-").concat(e[0]+t," ").concat(o,"y-").concat(e[1]+n," ").concat(o,"w-").concat(e[2]+r," ").concat(o,"h-").concat(e[3]+i)}function Q(t){var n,r,i,a,o,s,l,u,c,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.PageManager.NodeType.Item;if(t.attr.utilityCssClass){var f,h=_createForOfIteratorHelper(t.attr.utilityCssClass.split(" "));try{for(h.s();!(f=h.n()).done;){var m=f.value,p=null===(n=e.PageManager.CssClassMap.byFieldType[d][m])||void 0===n?void 0:n.classes;if(p)for(var v=0,g=Object.entries(p);v<g.length;v++){var C=_slicedToArray(g[v],2),w=C[0],y=C[1];t.attr[w]=(null!==(r=t.attr[w])&&void 0!==r?r:"")+" "+y.join(" ")}}}catch(e){h.e(e)}finally{h.f()}}if(t.attr.fieldGridPos){var b=t.attr.fieldGridPos.split(",").map((function(e){return parseInt(e,10)}));if(4===b.length&&!b.some(isNaN))if(t.attr.fieldHeaderType===e.Core.FieldHeaderType.Field+""){var D=W(b,1,1,0,0),k=W(b,1,1,0,0,"md"),x=b;x[3]=1;var I=W(x,1,0,0,0);x[2]=1;var F=W(x,0,1,0,0,"md");t.attr.cssClass="".concat(null!==(i=t.attr.cssClass)&&void 0!==i?i:""," ").concat(D," ").concat(k),t.attr.headerCssClass="".concat(null!==(a=t.attr.headerCssClass)&&void 0!==a?a:""," ").concat(I," ").concat(F)}else if(t.attr.inExpander)if(t.attr.fieldHeaderType===e.Core.FieldHeaderType.Header+""){var E=W(b,1,0,0,0),V=_toConsumableArray(b);V[2]=1,V[3]=1;var _=W(V,0,0,0,0);t.attr.cssClass="".concat(null!==(l=t.attr.cssClass)&&void 0!==l?l:""," ").concat(E),t.attr.headerCssClass="".concat(null!==(u=t.attr.headerCssClass)&&void 0!==u?u:""," ").concat(_)}else{var S=W(b,1,1);t.attr.cssClass="".concat(null!==(c=t.attr.cssClass)&&void 0!==c?c:""," ").concat(S)}else{var P=W(b,1,1),O=_toConsumableArray(b),A=W(O,1,0,0,0);O[3]=1,O[2]=1;var T=W(O,0,1,0,0,"md");t.attr.cssClass="".concat(null!==(o=t.attr.cssClass)&&void 0!==o?o:""," ").concat(P),t.attr.headerCssClass="".concat(null!==(s=t.attr.headerCssClass)&&void 0!==s?s:""," ").concat(A," ").concat(T)}}}function q(t,r,a,o,s,l,u,c,d,p,D,k,x,_){var S,P,R,N,B,W,q,H,G,Z,J,X,ee=new e.Views.ViewResultItemNode,ne={},re=new i(ee,ne);re.path=c,re.view=s,re.parentContext=x,re.currentObject=l,re.exchangeUtil=u,re.parentContext=x;var ie=j(re);ie.parentContext=x,$(ee,t.viewResult,c,"item",d,p,t,D),$(ee.fields,ee,c+".fields","fields",-1,p,t,D),$(ee.commands,ee,c+".commands","commands",-1,p,t,D),ee.objectId=l.ObjectId;var ae=u.getObjectData(l);ae&&(ee.attr[e.Views.ViewResultItemNodeAttributes.validationMessage]=ae.ValidationMessage,ee.attr[e.Views.ViewResultItemNodeAttributes.isValid]=ae.IsValid);for(var oe=ee.commands.commandRef(),se=function(){var e=s.Attributes.Items[le];if((null===(S=e.Name)||void 0===S?void 0:S.startsWith("xmlns:"))||(null===(P=e.Name)||void 0===P?void 0:P.startsWith("viewLock:")))return 1;if("itemCssClass"===e.Name||"itemStyle"===e.Name){var t=h(r,a,l,u,s,e,_);ee.attr[e.Name]=Y(t,(function(){return g(e,r,o.ViewVersion)}),r,a,o,ee,e.Name,p,D,k,ie,_)}},le=0;le<s.Attributes.Items.length;le++)se();var ue=null;if(a.commands){for(var ce=0;ce<a.commands.length;ce++){var de=a.commands[ce];if(de.Key.ExtraKey===l.ExtraKey&&f(l.ObjectId,de.Key.ObjectId)){ue=de.Value;break}}if(ue)for(var fe=0;fe<ue.length;fe++)if("Selection"===ue[fe].scope){for(var he=!1,me=0;me<s.Commands.Items.length;me++){s.Commands.Items[me].Name===ue[fe].name&&(he=!0)}if(!he){var pe=new e.Views.ItemCommandNode;$(pe,ee.commands,c+".commands.commandRef["+(oe.length+fe)+"]","commandRef",oe.length+fe,p,t,D),pe.attr[e.Views.CommandRefNodeAttributes.name_]=ue[fe].name,pe.attr[e.Views.CommandRefNodeAttributes.scope]=ue[fe].scope,pe.attr[e.Views.CommandRefNodeAttributes.isEnabled]=ue[fe].enabled,pe.attr[e.Views.CommandRefNodeAttributes.visible]=!1,pe.attr[e.Views.CommandRefNodeAttributes.isFirstCommand]=!1,pe.attr[e.Views.CommandRefNodeAttributes.isLastCommand]=!1,pe.attr[e.Views.CommandRefNodeAttributes.isFirstCommandOfScope]=!1,pe.attr[e.Views.CommandRefNodeAttributes.isLastCommandOfScope]=!1;var ve=function(){if(ue[fe].Attributes.Items.hasOwnProperty(ge)){var e=ue[fe].Attributes.Items[ge];if((null===(R=e.Name)||void 0===R?void 0:R.startsWith("xmlns:"))||(null===(N=e.Name)||void 0===N?void 0:N.startsWith("viewLock:")))return 1;var t=h(r,a,l,u,s,e,_);pe.attr[e.Name]=Y(t,(function(){return g(e,r,o.ViewVersion)}),r,a,o,pe,e.Name,p,D,k,ie,_)}};for(var ge in ue[fe].Attributes.Items)ve();var Ce=pe.attr[e.Views.CommandRefNodeAttributes.targetPage];pe.attr[e.Views.CommandRefNodeAttributes.isEmptyTargetPage]=e.Client.isEmptyTargetPage(Ce),ee.commands.commandRef.push(pe)}}}for(var we=function(){var n=s.Commands.Items[ye];if("Object"===n.Scope||"Selection"===n.Scope){var i=new e.Views.ItemCommandNode;$(i,ee.commands,c+".commands.commandRef["+(oe.length+ye)+"]","commandRef",oe.length+ye,p,t,D),i.attr[e.Views.CommandRefNodeAttributes.name_]=n.Name,i.attr[e.Views.CommandRefNodeAttributes.scope]=n.Scope,i.attr[e.Views.CommandRefNodeAttributes.isEnabled]=!1,i.attr[e.Views.CommandRefNodeAttributes.visible]=!1,i.attr[e.Views.CommandRefNodeAttributes.isFirstCommand]=!1,i.attr[e.Views.CommandRefNodeAttributes.isLastCommand]=!1,i.attr[e.Views.CommandRefNodeAttributes.isFirstCommandOfScope]=!1,i.attr[e.Views.CommandRefNodeAttributes.isLastCommandOfScope]=!1;for(var d=!1,f=!1,v=function(){var t=n.Attributes.Items[w];if((null===(B=t.Name)||void 0===B?void 0:B.startsWith("xmlns:"))||(null===(W=t.Name)||void 0===W?void 0:W.startsWith("viewLock:")))return 1;t.Name===e.Views.CommandRefNodeAttributes.isEnabled?d=!0:t.Name===e.Views.CommandRefNodeAttributes.visible&&(f=!0);var c=h(r,a,l,u,s,t,_);i.attr[t.Name]=Y(c,(function(){return g(t,r,o.ViewVersion)}),r,a,o,i,t.Name,p,D,k,ie,_)},w=0;w<n.Attributes.Items.length;w++)v();K(i.attr,e.Views.CommandRefNodeAttributes.displayName,Y(m(r,a,l,u,s,n.Caption,"String",_),(function(){return C(n.Caption,r,o.ViewVersion)}),r,a,o,i,e.Views.CommandRefNodeAttributes.displayName,p,D,k,ie,_)),K(i.attr,e.Views.CommandRefNodeAttributes.confirmationMessage,Y(m(r,a,l,u,s,n.ConfirmationMessage,"String",_),(function(){return C(n.ConfirmationMessage,r,o.ViewVersion)}),r,a,o,i,e.Views.CommandRefNodeAttributes.confirmationMessage,p,D,k,ie,_)),K(i.attr,e.Views.CommandRefNodeAttributes.disabledImageUrl,Y(m(r,a,l,u,s,n.DisabledImageUrl,"ImageUrl",_),(function(){return C(n.DisabledImageUrl,r,o.ViewVersion)}),r,a,o,i,e.Views.CommandRefNodeAttributes.disabledImageUrl,p,D,k,ie,_)),K(i.attr,e.Views.CommandRefNodeAttributes.imageUrl,Y(m(r,a,l,u,s,n.ImageUrl,"ImageUrl",_),(function(){return C(n.ImageUrl,r,o.ViewVersion)}),r,a,o,i,e.Views.CommandRefNodeAttributes.imageUrl,p,D,k,ie,_)),K(i.attr,e.Views.CommandRefNodeAttributes.displayTemplate,Y(m(r,a,l,u,s,n.DisplayTemplate,"String",_),(function(){return C(n.DisplayTemplate,r,o.ViewVersion)}),r,a,o,i,e.Views.CommandRefNodeAttributes.displayTemplate,p,D,k,ie,_));var y=!1;if(ue)for(var b=0;b<ue.length;b++)if(ue[b].name===n.Name&&ue[b].scope===n.Scope){var x=ue[b].enabled;null!==x||d||(x=!0),null!==x?i.attr[e.Views.CommandRefNodeAttributes.isEnabled]=x:x=i.attr[e.Views.CommandRefNodeAttributes.isEnabled];var I=!1;if(!0===x){if(D&&D.getCommandIsEnabled){var F=D.getCommandIsEnabled(n.Name,i);F&&(i.attr[e.Views.CommandRefNodeAttributes.isEnabled]=F)}}else!0===i.attr[e.Views.CommandRefNodeAttributes.hideWhenDisabled]&&(I=!0);var E=!I&&ue[b].visible;if(null!==E||f||(E=!0),null!==E?i.attr[e.Views.CommandRefNodeAttributes.visible]=E:E=i.attr[e.Views.CommandRefNodeAttributes.visible],!0===E){if(D&&D.getCommandVisible){var V=D.getCommandVisible(n.Name,i);V&&(i.attr[e.Views.CommandRefNodeAttributes.visible]=V)}for(var S=t.nav.viewNode.viewCommands.commandRef,P=0;P<S.length;P++){var O=S[P];if(O.attr.name===n.Name){O.attr.visible=!0;break}}}var A=function(){if(ue[b].Attributes.Items.hasOwnProperty(T)){var e=ue[b].Attributes.Items[T];if((null===(q=e.Name)||void 0===q?void 0:q.startsWith("xmlns:"))||(null===(H=e.Name)||void 0===H?void 0:H.startsWith("viewLock:")))return 1;var t=h(r,a,l,u,s,e,_);i.attr[e.Name]=Y(t,(function(){return g(e,r,o.ViewVersion)}),r,a,o,i,e.Name,p,D,k,ie,_)}};for(var T in ue[b].Attributes.Items)A();y=!0;break}y||(i.attr[e.Views.CommandRefNodeAttributes.visible]=!1,i.attr[e.Views.CommandRefNodeAttributes.isEnabled]=!1),i.attr[e.Views.CommandRefNodeAttributes.isEmptyTargetPage]=e.Client.isEmptyTargetPage(i.attr[e.Views.CommandRefNodeAttributes.targetPage]),ee.commands.commandRef.push(i)}},ye=0;ye<s.Commands.Items.length;ye++)we();for(var be={},De=-1,ke=-1,xe=0;xe<oe.length;xe++){var Ie=oe[xe];Ie.attr[e.Views.CommandRefNodeAttributes.visible]&&(-1===De&&(De=xe),ke=xe,be.hasOwnProperty(Ie.attr[e.Views.CommandRefNodeAttributes.scope])?be[Ie.attr[e.Views.CommandRefNodeAttributes.scope]][1]=xe:be[Ie.attr[e.Views.CommandRefNodeAttributes.scope]]=[xe,xe])}for(var Fe in-1!==De&&(oe[De].attr[e.Views.CommandRefNodeAttributes.isFirstCommand]=!0),-1!==ke&&(oe[ke].attr[e.Views.CommandRefNodeAttributes.isLastCommand]=!0),be)be.hasOwnProperty(Fe)&&(oe[be[Fe][0]].attr[e.Views.CommandRefNodeAttributes.isFirstCommandOfScope]=!0,oe[be[Fe][1]].attr[e.Views.CommandRefNodeAttributes.isLastCommandOfScope]=!0);for(var Ee=0;Ee<oe.length;Ee++){var Ve=oe[Ee],_e=Ve.attr[e.Views.CommandRefNodeAttributes.name_];Q(Ve,e.PageManager.NodeType.Command);var Se={},Pe=new i(Ve,Se);if(Pe.parentContext=ie,Pe.path=Ve.nav.path,Pe.exchangeUtil=u,Pe.currentCollection=re.currentCollection,Pe.currentObject=re.currentObject,Pe.modelType=n.ItemCommand,Pe.modelTarget=_e,Pe.view=s,a&&a.parameters&&a.parameters.hasOwnProperty("command")&&a.parameters.command.ts&&a.parameters.command.ts.hasOwnProperty(_e)){for(var Oe=null,Ae=0;Ae<a.parameters.command.ts[_e].length;Ae++){var Te=a.parameters.command.ts[_e][Ae];if(Te.Key.ExtraKey===l.ExtraKey&&f(l.ObjectId,Te.Key.ObjectId)){Oe=Te.Value;break}}if(Oe)for(var Re in Oe)Oe.hasOwnProperty(Re)&&(Se.hasOwnProperty(Re)||(Se[Re]=ko.observable(Oe[Re].value)))}if(s.ParameterBindings)for(var Ne=0;Ne<s.ParameterBindings.Items.length;Ne++){var Me=s.ParameterBindings.Items[Ne];if("Command"===Me.Scope&&Me.ScopeTarget===_e){var je=m(r,a,re.currentObject,re.exchangeUtil,s,{Prefix:Me.Prefix,Input:Me.Value,Value:Me.Value},"String",_);je&&!Se.hasOwnProperty(Me.Name)&&(Se[Me.Name]=ko.observable(je.Value))}}k&&b(k,Pe,D),Ve.itemCommandModel=Se}for(var Be=!1,Le=function(){var d=s.Fields.Items[Ue],x=new e.Views.ItemFieldNode;$(x,ee.fields,c+".fields."+d.Name,d.Name,Ue,p,t,D),x.attr[e.Views.ItemFieldNodeAttributes.name_]=d.Name;var S=y(d.FieldPath,"field"),P=!1,R=null;if(l&&u&&(R=u.getLastObjectsForFieldPath(l,S))&&R.itemCount>1&&(P=!0),P){for(var N=function(){var e=d.Attributes.Items[j];if((null===(G=e.Name)||void 0===G?void 0:G.startsWith("xmlns:"))||(null===(Z=e.Name)||void 0===Z?void 0:Z.startsWith("viewLock:")))return 0;if(R.singleField&&("required"===e.Name||"length"===e.Name||"fieldType"===e.Name||"lookupDisplayFields"===e.Name||"lookupPrimaryDisplayField"===e.Name))return 0;var t=h(r,a,null,null,s,e,_);x.attr[e.Name]=Y(t,(function(){return g(e,r,o.ViewVersion)}),r,null,o,x,e.Name,p,D,k,ie,_)},j=0;j<d.Attributes.Items.length;j++)N();if(Q(x,e.PageManager.NodeType.Item),K(x.attr,"fieldPath",R.fieldPath),K(x.attr,"columnHeader",Y(m(r,null,null,null,s,d.ColumnHeader,"String",_),(function(){return C(d.ColumnHeader,r,o.ViewVersion)}),r,null,o,x,"columnHeader",p,D,k,ie,_)),K(x.attr,"tooltip",Y(m(r,null,null,null,s,d.Tooltip,"String",_),(function(){return C(d.Tooltip,r,o.ViewVersion)}),r,null,o,x,"tooltip",p,D,k,ie,_)),K(x.attr,"visible",Y(m(r,null,null,null,s,d.Visible,"Boolean",_),(function(){return C(d.Visible,r,o.ViewVersion)}),r,null,o,x,"visible",p,D,k,ie,_)),!0===x.attr.visible)for(var B=t.nav.viewNode.viewFields.fieldRef,W=0;W<B.length;W++)B[W].attr.name===d.Name&&(B[W].attr.visible=!0,B[W].attr.hasNonEmptyValues=!0);x.attr[e.Views.ItemFieldNodeAttributes.fieldType]="Collection",x.attr[e.Views.ItemFieldNodeAttributes.type_]="Collection",K(x.attr,"editable",!1),K(x.attr,"isValid",null),K(x.attr,"validationMessage",null),x.attr[e.Views.ItemFieldNodeAttributes.value]=R.collection,x.attr[e.Views.ItemFieldNodeAttributes.valueIsEmpty]=!1;var q=L(o,d,r,R.collection.ClassId);if(!q&&R.singleField){var H=Object.assign({},d);H.FieldPath={Prefix:null,Value:R.singleField},q={definition:{Attributes:{IgnoreCase:!1,Items:[],Locked:!0},Commands:{IgnoreCase:!1,Items:[],Locked:!0},Fields:{IgnoreCase:!0,Items:[H],Locked:!0},Id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),Locked:!0,ParameterBindings:{IgnoreCase:!1,Items:[{Name:"ShowColumnHeaders",Prefix:"bool",Value:"false",Scope:"View",ScopeTarget:null}],Locked:!0},ViewType:"None",ViewVersion:{ClassId:R.collection.ClassId,Mode:d.Name,Uri:"~inline",Version:"0.0.0.0"}},templateName:"listTemplate"}}var z={};q&&(x.view=te(T.List,r,a,U(o,q.definition),q.definition,R.collection,u,x,c+".fields."+d.Name+".view","view",-1,p,D,k,ie,_),z.viewTemplate=q.templateName);var ne=new i(x,z);ne.parentContext=ie,ne.path=x.nav.path,ne.exchangeUtil=u,ne.currentCollection=re.currentCollection,ne.currentObject=re.currentObject,ne.modelType=n.ItemField,ne.modelTarget=d.Name,ne.view=s,k&&b(k,ne,D),x.itemFieldModel=z}else{for(var ae=function(){var e=d.Attributes.Items[oe];if((null===(J=e.Name)||void 0===J?void 0:J.startsWith("xmlns:"))||(null===(X=e.Name)||void 0===X?void 0:X.startsWith("viewLock:")))return 1;var t=h(r,a,l,u,s,e,_);x.attr[e.Name]=Y(t,(function(){return g(e,r,o.ViewVersion)}),r,a,o,x,e.Name,p,D,k,ie,_)},oe=0;oe<d.Attributes.Items.length;oe++)ae();if(Q(x),K(x.attr,"fieldPath",y(d.FieldPath,null)),K(x.attr,"columnHeader",Y(m(r,a,l,u,s,d.ColumnHeader,"String",_),(function(){return C(d.ColumnHeader,r,o.ViewVersion)}),r,a,o,x,"columnHeader",p,D,k,ie,_)),K(x.attr,"tooltip",Y(m(r,a,l,u,s,d.Tooltip,"String",_),(function(){return C(d.Tooltip,r,o.ViewVersion)}),r,a,o,x,"tooltip",p,D,k,ie,_)),K(x.attr,"visible",Y(m(r,a,l,u,s,d.Visible,"Boolean",_),(function(){return C(d.Visible,r,o.ViewVersion)}),r,a,o,x,"visible",p,D,k,ie,_)),!0===x.attr.visible)for(var se=t.nav.viewNode.viewFields.fieldRef,le=0;le<se.length;le++)se[le].attr.name===d.Name&&(se[le].attr.visible=!0);var ue=x.attr[e.Views.ItemFieldNodeAttributes.fieldType];x.attr[e.Views.ItemFieldNodeAttributes.type_]=ue;var ce=S.indexOf(":"),de=v(r,a,l,u,s,S.substring(0,ce),S.substring(ce+1),_);if(d.Name.startsWith("$mfield.")){var fe=d.Name.indexOf(".",8),he=de[0].Value,me=new e.Utilities.ExchangeUtil(he);de=v(r,a,he,me,s,"field",d.Name.substring(fe+1),_)}var pe=!1;!0===d.ReadOnly||!1===d.ReadOnly?pe=!d.ReadOnly:de[1]&&de[1].FieldData&&(pe=!de[1].FieldData.ReadOnly),K(x.attr,"editable",pe),K(x.attr,"isValid",de[1]&&de[1].FieldData&&(!0===de[1].FieldData.IsValid||!1===de[1].FieldData.IsValid)?de[1].FieldData.IsValid:null),!0===x.attr[e.Views.ItemFieldNodeAttributes.visible]&&!1===x.attr[e.Views.ItemFieldNodeAttributes.isValid]&&(Be=!0);var ve=null;de[1]&&de[1].FieldData&&de[1].FieldData.ValidationMessage&&(ve=de[1].FieldData.ValidationMessage),K(x.attr,"validationMessage",ve);var ge=de[0];x.attr[e.Views.ItemFieldNodeAttributes.value]=ge?ge.Value:null,ge&&(ue=ge.ValueType,x.attr[e.Views.ItemFieldNodeAttributes.type_]=ue);var Ce=x.attr[e.Views.ItemFieldNodeAttributes.fieldTypeOverride];Ce&&(ue=Ce,x.attr[e.Views.ItemFieldNodeAttributes.type_]=Ce);var we=null;if(!pe&&ge)if("String"===ue||"Memo"===ue||"ImageUrl"===ue)we=!ge.Value;else if("Time"===ue||"DateTime"===ue||"Date"===ue)we=e.Core.isEmptyDate(ge.Value);else if("Object"===ue){var ye=ge.Value;we=!ye||e.Core.isNullOrVoid(ye.ObjectId)}else if("Collection"===ue){var be=ge.Value;we=!be||!be.Items||0===be.Items.length}if(x.attr[e.Views.ItemFieldNodeAttributes.valueIsEmpty]=we,!1===we)for(var De=t.nav.viewNode.viewFields.fieldRef,ke=0;ke<De.length;ke++)De[ke].attr.name===d.Name&&(De[ke].attr.hasNonEmptyValues=!0);else if(!0===we)for(var xe=t.nav.viewNode.viewFields.fieldRef,Ie=0;Ie<xe.length;Ie++)xe[Ie].attr.name===d.Name&&!0!==xe[Ie].attr.hasNonEmptyValues&&(xe[Ie].attr.hasNonEmptyValues=!1);if(pe){var Fe=ge?ge.Value:null;if("Date"===ue){var Ee=ko.observable(I(Fe));x.attr[e.Views.ItemFieldNodeAttributes.dateInputValue]=Ee}else if("Time"===ue)x.attr[e.Views.ItemFieldNodeAttributes.timeInputValue]=ko.observable(E(Fe));else if("DateTime"===ue)x.attr[e.Views.ItemFieldNodeAttributes.dateInputValue]=ko.observable(F(Fe)),x.attr[e.Views.ItemFieldNodeAttributes.timeInputValue]=ko.observable(V(Fe));else if("Boolean"===ue)x.attr[e.Views.ItemFieldNodeAttributes.inputValue]=ko.observable(M(Fe));else if("Integer"===ue||"Integer64"===ue)x.attr[e.Views.ItemFieldNodeAttributes.integerInputValue]=ko.observable(O(Fe,x.attr[e.Views.ItemFieldNodeAttributes.required]));else if("Float"===ue)x.attr[e.Views.ItemFieldNodeAttributes.integerInputValue]=ko.observable(O(Fe,x.attr[e.Views.ItemFieldNodeAttributes.required])),x.attr[e.Views.ItemFieldNodeAttributes.decimalInputValue]=ko.observable(A(Fe,x.attr[e.Views.ItemFieldNodeAttributes.required]));else if("String"===ue||"Memo"===ue||"ImageUrl"===ue){var Ve=!0===x.attr[e.Views.ItemFieldNodeAttributes.rtfToHtml],_e=!0===x.attr[e.Views.ItemFieldNodeAttributes.cdfToHtml];Ve||_e||(x.attr[e.Views.ItemFieldNodeAttributes.inputValue]=ko.observable(Fe))}else if("Object"===ue){var Se=ge.Value,Pe=x.attr[e.Views.ItemFieldNodeAttributes.inputInitialValueField];e.Core.isNullOrVoid(Se.ObjectId)||Pe||(Pe=Se.ObjectId.ObjectIds.join(","));var Oe=Se?new e.Core.KeyValuePair("hixobjref:"+JSON.stringify(Se.ObjectId),null!=Pe?Pe:""):null;x.attr[e.Views.ItemFieldNodeAttributes.inputValue]=ko.observable(Oe)}else if("Collection"===ue){var Ae=ge.Value,Te=[];if(Ae){var Re=x.attr[e.Views.ItemFieldNodeAttributes.selectionDisplayValueField];u.enumerateCollection(Ae,(function(t){var n=null,r=!1;if(!e.Core.isNullOrVoid(t.ObjectId)&&Re){var i=u.getField(t,Re);i&&i.Value&&("String"===i.Value.ValueType||"Memo"===i.Value.ValueType)&&(n=i.Value.Value,r=!0)}r||(n=t.ObjectId.ObjectIds.join(","));var a=new e.Core.KeyValuePair("hixobjref:"+JSON.stringify(t.ObjectId),null!=n?n:"");Te.push(a)}))}x.attr[e.Views.ItemFieldNodeAttributes.inputValue]=ko.observable(Te)}}var Ne={};if(ge&&ge.Value&&"Object"===ge.ValueType){var Me=ge.Value;if(Me&&Me.ObjectId&&Me.ObjectId.ClassId){var je=w(S.substring(0,ce),S.substring(ce+1),r,o.ViewVersion);if(je.resolved)je.view&&(x.view=te(T.Item,r,a,U(o,je.view.definition),je.view.definition,Me,u,x,c+".fields."+d.Name+".view","view",-1,p,D,k,ie,_),Ne.viewTemplate=je.view.templateName);else{var Le=L(o,d,r,Me.ObjectId.ClassId);Le&&(x.view=te(T.Item,r,a,U(o,Le.definition),Le.definition,Me,u,x,c+".fields."+d.Name+".view","view",-1,p,D,k,ie,_),Ne.viewTemplate=Le.templateName)}}}if(ge&&ge.Value&&"Collection"===ge.ValueType){var We=ge.Value;if(We&&We.ClassId){var Qe=w(S.substring(0,ce),S.substring(ce+1),r,o.ViewVersion);if(Qe.resolved)x.view=te(T.List,r,a,U(o,Qe.view.definition),Qe.view.definition,We,u,x,c+".fields."+d.Name+".view","view",-1,p,D,k,ie,_),Ne.viewTemplate=Qe.view.templateName;else{var qe=L(o,d,r,We.ClassId);qe&&(x.view=te(T.List,r,a,U(o,qe.definition),qe.definition,We,u,x,c+".fields."+d.Name+".view","view",-1,p,D,k,ie,_),Ne.viewTemplate=qe.templateName)}}}var He=new i(x,Ne);if(He.parentContext=ie,He.path=x.nav.path,He.exchangeUtil=u,He.currentCollection=re.currentCollection,He.currentObject=re.currentObject,He.modelType=n.ItemField,He.modelTarget=d.Name,He.view=s,a&&a.parameters&&a.parameters.hasOwnProperty("objectfield")&&a.parameters.objectfield.ts&&a.parameters.objectfield.ts.hasOwnProperty(d.Name)){for(var Ye=null,ze=0;ze<a.parameters.objectfield.ts[d.Name].length;ze++){var Ke=a.parameters.objectfield.ts[d.Name][ze];if(Ke.Key.ExtraKey===l.ExtraKey&&f(l.ObjectId,Ke.Key.ObjectId)){Ye=Ke.Value;break}}if(Ye)for(var $e in Ye)Ye.hasOwnProperty($e)&&(Ne.hasOwnProperty($e)||(Ne[$e]=ko.observable(Ye[$e].value)))}if(s.ParameterBindings)for(var Ge=0;Ge<s.ParameterBindings.Items.length;Ge++){var Ze=s.ParameterBindings.Items[Ge];if("ObjectField"===Ze.Scope&&Ze.ScopeTarget===d.Name){var Je=m(r,a,re.currentObject,re.exchangeUtil,s,{Prefix:Ze.Prefix,Input:Ze.Value,Value:Ze.Value},"String",_);Je&&!Ne.hasOwnProperty(Ze.Name)&&(Ne[Ze.Name]=ko.observable(Je.Value))}}k&&b(k,He,D),x.itemFieldModel=Ne}ee.fields[d.Name]=x},Ue=0;Ue<s.Fields.Items.length;Ue++)Le();if(ee.attr[e.Views.ViewResultItemNodeAttributes.hasNonValidViewFields]=Be,a&&a.parameters&&a.parameters.hasOwnProperty("object")&&a.parameters.object.nts){for(var We=null,Qe=0;Qe<a.parameters.object.nts.length;Qe++){var qe=a.parameters.object.nts[Qe];if(qe.Key.ExtraKey===l.ExtraKey&&f(l.ObjectId,qe.Key.ObjectId)){We=qe.Value;break}}if(We)for(var He in We)We.hasOwnProperty(He)&&(ne.hasOwnProperty(He)||(ne[He]=ko.observable(We[He].value)))}if(s.ParameterBindings)for(var Ye=0;Ye<s.ParameterBindings.Items.length;Ye++){var ze=s.ParameterBindings.Items[Ye];if("Object"===ze.Scope&&!ze.ScopeTarget){var Ke=m(r,a,re.currentObject,re.exchangeUtil,s,{Prefix:ze.Prefix,Input:ze.Value,Value:ze.Value},"String",_);Ke&&!ne.hasOwnProperty(ze.Name)&&(ne[ze.Name]=ko.observable(Ke.Value))}}k?(re.modelType=n.Item,b(k,re,D),re.callDefaultModelCreator&&z(ne)):z(ne),ee.itemModel=ne,t.viewResult.item.push(ee)}function H(e){return"[object Array]"!==Object.prototype.toString.call(e)}function Y(t,n,r,i,a,o,s,l,c,d,f,h){if(!t)return null;if("Object"===t.ValueType){var m=t.Value,p=n();if(p.resolved){if(p.view){var v=e.Utilities.ExchangeUtil.isRootObject(m)?new e.Utilities.ExchangeUtil(m):f.exchangeUtil;return te(T.Item,r,i,U(a,p.view.definition),p.view.definition,m,v,o,o.nav.path+".attr."+s,s,-1,l,c,d,f,h)}}else if(m&&m.ViewVersion&&H(m.ViewVersion)){var g=u(r,m.ViewVersion);if(g){var C=e.Utilities.ExchangeUtil.isRootObject(m)?new e.Utilities.ExchangeUtil(m):f.exchangeUtil;return te(T.Item,r,i,U(a,g.definition),g.definition,m,C,o,o.nav.path+".attr."+s,s,-1,l,c,d,f,h)}}return null}if("Collection"===t.ValueType){var w=t.Value,y=n();if(y.resolved){var b=e.Utilities.ExchangeUtil.isRootObject(w)?new e.Utilities.ExchangeUtil(w):f.exchangeUtil;return te(T.List,r,i,U(a,y.view.definition),y.view.definition,w,b,o,o.nav.path+".attr."+s,s,-1,l,c,d,f,h)}if(w&&w.ViewVersion&&H(w.ViewVersion)){var D=u(r,w.ViewVersion);if(D){var k=e.Utilities.ExchangeUtil.isRootObject(w)?new e.Utilities.ExchangeUtil(w):f.exchangeUtil;return te(T.List,r,i,U(a,D.definition),D.definition,w,k,o,o.nav.path+".attr."+s,s,-1,l,c,d,f,h)}}return null}return t.Value}function z(e){e.hasOwnProperty(o.selected)||(e[o.selected]=ko.observable(!1)),e.hasOwnProperty(o.highlighted)||(e[o.highlighted]=ko.observable(!1)),e.hasOwnProperty(o.expanded)||(e[o.expanded]=ko.observable(!1)),e.hasOwnProperty(o.expandFunction)||(e[o.expandFunction]=function(t){e[o.expanded](!e[o.expanded]()),e[o.customExpandFunction]&&e[o.customExpandFunction](t)}),e.hasOwnProperty(o.selectFunction)||(e[o.selectFunction]=function(t){e[o.selected](!e[o.selected]()),e[o.customSelectFunction]&&e[o.customSelectFunction](t)}),e.hasOwnProperty(o.canSelect)||(e[o.canSelect]=ko.observable(!0))}function K(e,t,n){e[t]=n}function $(e,t,n,r,i,a,o,s){e.nav.parent=t,e.nav.path=n,e.nav.propertyName=r,e.nav.index=i,e.nav.rootNode=a,e.nav.viewNode=o,e.nav.viewModel=s}function G(e,t){return e?e+"."+t:t}function Z(t,n,r,i,a,o){var s=new e.Views.ViewNode;return s.viewResult.attr[e.Views.ViewResultNodeAttributes.empty]=!0,s.viewResult.attr[e.Views.ViewResultNodeAttributes.maxVisibleItemCommands]=0,$(s,t,n,r,i,a||s,s,o),$(s.viewBehaviors,s,G(n,"viewBehaviors"),"viewBehaviors",-1,a||s,s,o),$(s.viewFields,s,G(n,"viewFields"),"viewFields",-1,a||s,s,o),$(s.viewCommands,s,G(n,"viewCommands"),"viewCommands",-1,a||s,s,o),$(s.viewResult,s,G(n,"viewResult"),"viewResult",-1,a||s,s,o),s}function J(e,t){t===T.Item?(e.hasOwnProperty(s.noResultText)||(e[s.noResultText]=ko.observable("")),e.hasOwnProperty(s.showLabelColumn)||(e[s.showLabelColumn]=ko.observable(!0)),e.hasOwnProperty(s.labelColumnWidth)||(e[s.labelColumnWidth]=ko.observable(100)),e.hasOwnProperty(l.noDataPolicy)||(e[l.noDataPolicy]=ko.observable("Default")),e.hasOwnProperty(s.labelStyle)||(e[s.labelStyle]=ko.pureComputed((function(){var t=e[s.labelColumnWidth]();return t>0?"width: "+t+"px;":""}),e))):t===T.List&&(e.hasOwnProperty(l.showColumnHeaders)||(e[l.showColumnHeaders]=ko.observable(!0)),e.hasOwnProperty(l.noResultsText)||(e[l.noResultsText]=ko.observable("")),e.hasOwnProperty(l.pagerPosition)||(e[l.pagerPosition]=ko.observable("None")),e.hasOwnProperty(l.noDataPolicy)||(e[l.noDataPolicy]=ko.observable("Default")),e.hasOwnProperty(l.showPageSpan)||(e[l.showPageSpan]=ko.observable("None")),e.hasOwnProperty(l.selectable)||(e[l.selectable]=ko.observable(!1)),e.hasOwnProperty(l.multiselect)||(e[l.multiselect]=ko.observable(!1)),e.hasOwnProperty(l.singleselect)||(e[l.singleselect]=ko.observable(!1)),e.hasOwnProperty(l.highlightable)||(e[l.highlightable]=ko.observable(!1)),e.hasOwnProperty(l.addEmptyItem)||(e[l.addEmptyItem]=ko.observable(!1)),e.hasOwnProperty(l.emptyItemText)||(e[l.emptyItemText]=ko.observable("")),e.hasOwnProperty(l.commandsColumnCaption)||(e[l.commandsColumnCaption]=ko.observable("")),e.hasOwnProperty(l.expanderOpenCaption)||(e[l.expanderOpenCaption]=ko.observable("")),e.hasOwnProperty(l.expanderCloseCaption)||(e[l.expanderCloseCaption]=ko.observable("")),e.rowGrid=ko.observable(),e.headerRowGrid=ko.observable([]),e.hasOwnProperty(l.mainRowTemplate)||(e[l.mainRowTemplate]=null),e.hasOwnProperty(l.beforeRowTemplate)||(e[l.beforeRowTemplate]=null),e.hasOwnProperty(l.afterRowTemplate)||(e[l.afterRowTemplate]=null),e.hasOwnProperty(l.lastRowTemplate)||(e[l.lastRowTemplate]=null),e.hasOwnProperty(l.expanderRowTemplate)||(e[l.expanderRowTemplate]=null),e.hasOwnProperty(l.isLoading)||(e[l.isLoading]=ko.observable(!1)))}function X(e){if("string"==typeof e){if("true"===e||"True"===e)return!0;if("false"===e||"False"===e)return!1}return e}function ee(t){if(!t)return"None";if("string"==typeof t){if("Top"===t)return"Top";if("Bottom"===t)return"Bottom";if("Both"===t)return"Both";if("None"===t)return"None";e.PageManager.logError("invalid value for page position: "+t)}return t}function te(t,r,a,o,s,l,w,D,k,x,I,F,E,V,_,S){var P,O,A,T,R,N,M,B,L,W,H,z,te,ne=Z(D,k,x,I,F,E),re={};s&&"~inline"!==s.ViewVersion.Uri&&((te=o?c(r,o.ViewVersion,s.ViewVersion.Uri,s.ViewVersion.ClassId):u(r,s.ViewVersion))&&(re.viewTemplate=te.templateName));var ie=new i(ne,re);ie.parentContext=_,ie.path=k,ie.exchangeUtil=w;var ae=!1;if(l&&l.hasOwnProperty("ClassId")&&l.hasOwnProperty("Items")?ie.currentCollection=l:l.hasOwnProperty("ObjectId")&&l.hasOwnProperty("ExtraKey")&&(ie.currentObject=l,ae=!0),ie.modelType=n.View,!r||!l||!s)return V&&b(V,ie,E),ie.callDefaultModelCreator&&J(re,t),ne.model=re,ne;ie.view=s;var oe=j(ie);oe.parentContext=_;var se=function(e,t){var n=function(e){return e};return"ShowLabelColumn"===e?(e="showLabelColumn",n=X):"ShowColumnHeaders"===e?(e="showColumnHeaders",n=X):"LabelColumnWidth"===e?e="labelColumnWidth":"noResultText"===e?e="NoResultText":"noResultsText"===e?e="NoResultsText":"pagerPosition"===e?(e="PagerPosition",n=ee):"AddEmptyItem"===e?(e="addEmptyItem",n=X):"EmptyItemText"===e?e="emptyItemText":"CommandsColumnCaption"===e?e="commandsColumnCaption":"ExpanderCloseCaption"===e?e="expanderCloseCaption":"ExpanderOpenCaption"===e&&(e="expanderOpenCaption"),{name:e,value:n(t.Value)}};if(r&&r.parameters&&r.parameters.hasOwnProperty("view")&&r.parameters.view.nts)for(var le in r.parameters.view.nts)if(r.parameters.view.nts.hasOwnProperty(le)){var ue=se(le,p(r.parameters.view.nts[le]));re.hasOwnProperty(ue.name)||(re[ue.name]=ko.observable(ue.value))}if(s.ParameterBindings)for(var ce=0;ce<s.ParameterBindings.Items.length;ce++){var de=s.ParameterBindings.Items[ce];if("View"===de.Scope&&!de.ScopeTarget){var fe=m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,{Prefix:de.Prefix,Input:de.Value,Value:de.Value},"String",S);if(fe){var he=se(de.Name,fe);re.hasOwnProperty(he.name)||(re[he.name]=ko.observable(he.value))}}}V&&b(V,ie,E),ie.callDefaultModelCreator&&J(re,t),ne.model=re;for(var me=function(){var e=s.Attributes.Items[pe];if((null===(P=e.Name)||void 0===P?void 0:P.startsWith("xmlns:"))||(null===(O=e.Name)||void 0===O?void 0:O.startsWith("viewLock:")))return 1;var t=h(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,e,S);ne.attr[e.Name]=Y(t,(function(){return g(e,r,o.ViewVersion)}),r,ae?a:null,o,ne,e.Name,F,E,V,oe,S)},pe=0;pe<s.Attributes.Items.length;pe++)me();if(r.behaviors)for(var ve=0;ve<r.behaviors.length;ve++){var ge=r.behaviors[ve],Ce=ne.viewBehaviors[ge.name]=new e.Views.ViewBehaviorNode;$(Ce,ne.viewBehaviors,G(k,"viewBehaviors."+ge.name),ge.name,-1,F||ne,ne,E);var we=function(){if(ge.Attributes.Items.hasOwnProperty(ye)){var e=ge.Attributes.Items[ye];if((null===(A=e.Name)||void 0===A?void 0:A.startsWith("xmlns:"))||(null===(T=e.Name)||void 0===T?void 0:T.startsWith("viewLock:")))return 1;var t=h(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,e,S);Ce.attr[e.Name]=Y(t,(function(){return g(e,r,o.ViewVersion)}),r,ae?a:null,o,Ce,e.Name,F,E,V,oe,S)}};for(var ye in ge.Attributes.Items)we()}for(var be=!1,De=s.Fields.Items.length-1;De>=0;De--){var ke=s.Fields.Items[De];if(ke.FieldPath.Prefix){var xe=v(r,null,null,null,s,ke.FieldPath.Prefix,ke.FieldPath.Input,S);if(xe[0]&&xe[0].Value&&"ChipSoft.PlatformServices.Client.Model.XPath.MultiFieldObject, ChipSoft.PlatformServices.Client.Model"===xe[0].Value.$type){var Ie;be||((s=Object.assign({},s)).Fields=Object.assign({},s.Fields),s.Fields.Items=_toConsumableArray(s.Fields.Items),be=!0);for(var Fe=[],Ee=xe[0].Value,Ve=0;Ve<Ee.injectedFields.length;Ve++){var _e=Object.assign({},ke);_e.Name="$mfield."+Ee.originalFieldName+"."+Ee.injectedFields[Ve],_e.ColumnHeader&&_e.ColumnHeader.Prefix&&(_e.ColumnHeader=Object.assign({},_e.ColumnHeader),_e.ColumnHeader.Input=Ee.originalFieldName+"."+Ee.injectedFields[Ve]+":"+_e.ColumnHeader.Prefix+":"+_e.ColumnHeader.Input,_e.ColumnHeader.Prefix="mfield"),_e.Tooltip&&_e.Tooltip.Prefix&&(_e.Tooltip=Object.assign({},_e.Tooltip),_e.Tooltip.Input=Ee.originalFieldName+"."+Ee.injectedFields[Ve]+":"+_e.Tooltip.Prefix+":"+_e.Tooltip.Input,_e.Tooltip.Prefix="mfield"),_e.Visible&&_e.Visible.Prefix&&(_e.Visible=Object.assign({},_e.Visible),_e.Visible.Input=Ee.originalFieldName+"."+Ee.injectedFields[Ve]+":"+_e.Visible.Prefix+":"+_e.Visible.Input,_e.Visible.Prefix="mfield"),_e.Attributes=Object.assign({},_e.Attributes),_e.Attributes.Items=_toConsumableArray(_e.Attributes.Items);for(var Se=0;Se<_e.Attributes.Items.length;Se++)if(!(null===(R=_e.Attributes.Items[Se].Name)||void 0===R?void 0:R.startsWith("xmlns:"))&&!(null===(N=_e.Attributes.Items[Se].Name)||void 0===N?void 0:N.startsWith("viewLock:"))&&_e.Attributes.Items[Se].Prefix){var Pe=Object.assign({},_e.Attributes.Items[Se]);Pe.Value=Ee.originalFieldName+"."+Ee.injectedFields[Ve]+":"+Pe.Prefix+":"+Pe.Value,Pe.Prefix="mfield"}Fe.push(_e)}(Ie=s.Fields.Items).splice.apply(Ie,[De,1].concat(Fe))}}}for(var Oe=function(){var t=s.Fields.Items[Ae],l=new e.Views.FieldRefNode;$(l,ne.viewFields,G(k,"viewFields.fieldRef["+Ae+"]"),"fieldRef",Ae,F||ne,ne,E),l.attr[e.Views.FieldRefNodeAttributes.name_]=t.Name;for(var u=function(){var e=t.Attributes.Items[c];if((null===(M=e.Name)||void 0===M?void 0:M.startsWith("xmlns:"))||(null===(B=e.Name)||void 0===B?void 0:B.startsWith("viewLock:")))return 1;var n=h(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,e,S);l.attr[e.Name]=Y(n,(function(){return g(e,r,o.ViewVersion)}),r,ae?a:null,o,l,e.Name,F,E,V,oe,S)},c=0;c<t.Attributes.Items.length;c++)u();Q(l),K(l.attr,"fieldPath",y(t.FieldPath,null)),K(l.attr,"columnHeader",Y(m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,t.ColumnHeader,"String",S),(function(){return C(t.ColumnHeader,r,o.ViewVersion)}),r,ae?a:null,o,l,"columnHeader",F,E,V,oe,S)),K(l.attr,"tooltip",Y(m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,t.Tooltip,"String",S),(function(){return C(t.Tooltip,r,o.ViewVersion)}),r,ae?a:null,o,l,"tooltip",F,E,V,oe,S)),K(l.attr,"visible",Y(m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,t.Visible,"Boolean",S),(function(){return C(t.Visible,r,o.ViewVersion)}),r,ae?a:null,o,l,"visible",F,E,V,oe,S)),l.attr[e.Views.FieldRefNodeAttributes.type_]=l.attr[e.Views.FieldRefNodeAttributes.fieldType],l.attr[e.Views.FieldRefNodeAttributes.hasNonEmptyValues]=null;var d={},f=new i(l,d);if(f.parentContext=oe,f.path=l.nav.path,f.exchangeUtil=w,f.currentCollection=ie.currentCollection,f.currentObject=ie.currentObject,f.modelType=n.ViewField,f.modelTarget=t.Name,f.view=s,r&&r.parameters&&r.parameters.hasOwnProperty("viewfield")&&r.parameters.viewfield.nts)for(var p in r.parameters.viewfield.nts)r.parameters.viewfield.nts.hasOwnProperty(p)&&(d.hasOwnProperty(p)||(d[p]=ko.observable(r.parameters.viewfield.nts[p].value)));if(s.ParameterBindings)for(var v=0;v<s.ParameterBindings.Items.length;v++){var D=s.ParameterBindings.Items[v];if("ViewField"===D.Scope&&D.ScopeTarget===t.Name){var x=m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,{Prefix:D.Prefix,Input:D.Value,Value:D.Value},"String",S);x&&!d.hasOwnProperty(D.Name)&&(d[D.Name]=ko.observable(x.Value))}}V&&b(V,f,E),l.fieldModel=d,ne.viewFields.fieldRef.push(l)},Ae=0;Ae<s.Fields.Items.length;Ae++)Oe();var Te={ClassId:"~virtual",ObjectIds:[d(s.ViewVersion)]},Re=null;if(a.commands)for(var Ne=0;Ne<a.commands.length;Ne++){var Me=a.commands[Ne];if(""===Me.Key.ExtraKey&&f(Te,Me.Key.ObjectId)){Re=Me.Value;break}}for(var je=function(){var t=s.Commands.Items[Be],n=new e.Views.CommandRefNode;$(n,ne.viewCommands,G(k,"viewCommands.commandRef["+Be+"]"),"commandRef",Be,F||ne,ne,E),n.attr[e.Views.CommandRefNodeAttributes.name_]=t.Name,n.attr[e.Views.CommandRefNodeAttributes.scope]=t.Scope,n.attr[e.Views.CommandRefNodeAttributes.isEnabled]=!1,n.attr[e.Views.CommandRefNodeAttributes.visible]=!1,n.attr[e.Views.CommandRefNodeAttributes.isFirstCommand]=!1,n.attr[e.Views.CommandRefNodeAttributes.isLastCommand]=!1,n.attr[e.Views.CommandRefNodeAttributes.isFirstCommandOfScope]=!1,n.attr[e.Views.CommandRefNodeAttributes.isLastCommandOfScope]=!1,Q(n,e.PageManager.NodeType.Command);for(var i=!1,l=!1,u=function(){var u=t.Attributes.Items[c];if((null===(L=u.Name)||void 0===L?void 0:L.startsWith("xmlns:"))||(null===(W=u.Name)||void 0===W?void 0:W.startsWith("viewLock:")))return 1;u.Name===e.Views.CommandRefNodeAttributes.isEnabled?i=!0:u.Name===e.Views.CommandRefNodeAttributes.visible&&(l=!0);var d=h(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,u,S);n.attr[u.Name]=Y(d,(function(){return g(u,r,o.ViewVersion)}),r,ae?a:null,o,n,u.Name,F,E,V,oe,S)},c=0;c<t.Attributes.Items.length;c++)u();if(K(n.attr,e.Views.CommandRefNodeAttributes.displayName,Y(m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,t.Caption,"String",S),(function(){return C(t.Caption,r,o.ViewVersion)}),r,ae?a:null,o,n,e.Views.CommandRefNodeAttributes.displayName,F,E,V,oe,S)),K(n.attr,e.Views.CommandRefNodeAttributes.confirmationMessage,Y(m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,t.ConfirmationMessage,"String",S),(function(){return C(t.ConfirmationMessage,r,o.ViewVersion)}),r,ae?a:null,o,n,e.Views.CommandRefNodeAttributes.confirmationMessage,F,E,V,oe,S)),K(n.attr,e.Views.CommandRefNodeAttributes.disabledImageUrl,Y(m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,t.DisabledImageUrl,"ImageUrl",S),(function(){return C(t.DisabledImageUrl,r,o.ViewVersion)}),r,ae?a:null,o,n,e.Views.CommandRefNodeAttributes.disabledImageUrl,F,E,V,oe,S)),K(n.attr,e.Views.CommandRefNodeAttributes.imageUrl,Y(m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,t.ImageUrl,"ImageUrl",S),(function(){return C(t.ImageUrl,r,o.ViewVersion)}),r,ae?a:null,o,n,e.Views.CommandRefNodeAttributes.imageUrl,F,E,V,oe,S)),K(n.attr,e.Views.CommandRefNodeAttributes.displayTemplate,Y(m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,t.DisplayTemplate,"String",S),(function(){return C(t.DisplayTemplate,r,o.ViewVersion)}),r,ae?a:null,o,n,e.Views.CommandRefNodeAttributes.displayTemplate,F,E,V,oe,S)),"Collection"===t.Scope||"Paging"===t.Scope){var d=!1;if(Re)for(var f=0;f<Re.length;f++)if(Re[f].name===t.Name&&Re[f].scope===t.Scope){var p=Re[f].enabled;if(null!==p||i||(p=!0),null!==p?n.attr[e.Views.CommandRefNodeAttributes.isEnabled]=p:p=n.attr[e.Views.CommandRefNodeAttributes.isEnabled],!0===p&&E&&E.getCommandIsEnabled){var v=E.getCommandIsEnabled(t.Name,n);v&&(n.attr[e.Views.CommandRefNodeAttributes.isEnabled]=v)}var w=Re[f].visible;if(null!==w||l||(w=!0),null!==w?n.attr[e.Views.CommandRefNodeAttributes.visible]=w:w=n.attr[e.Views.CommandRefNodeAttributes.visible],!0===w&&E&&E.getCommandVisible){var y=E.getCommandVisible(t.Name,n);y&&(n.attr[e.Views.CommandRefNodeAttributes.visible]=y)}var b=function(){if(Re[f].Attributes.Items.hasOwnProperty(D)){var e=Re[f].Attributes.Items[D];if((null===(H=e.Name)||void 0===H?void 0:H.startsWith("xmlns:"))||(null===(z=e.Name)||void 0===z?void 0:z.startsWith("viewLock:")))return 1;var t=h(r,a,null,null,s,e,S);n.attr[e.Name]=Y(t,(function(){return g(e,r,o.ViewVersion)}),r,a,o,n,e.Name,F,E,V,oe,S)}};for(var D in Re[f].Attributes.Items)b();d=!0;break}d||(n.attr[e.Views.CommandRefNodeAttributes.visible]=!1,n.attr[e.Views.CommandRefNodeAttributes.isEnabled]=!1),n.attr[e.Views.CommandRefNodeAttributes.isEmptyTargetPage]=e.Client.isEmptyTargetPage(n.attr[e.Views.CommandRefNodeAttributes.targetPage])}ne.viewCommands.commandRef.push(n)},Be=0;Be<s.Commands.Items.length;Be++)je();for(var Le={},Ue=-1,We=-1,Qe=0;Qe<ne.viewCommands.commandRef.length;Qe++){var qe=ne.viewCommands.commandRef[Qe];qe.attr[e.Views.CommandRefNodeAttributes.visible]&&(-1===Ue&&(Ue=Qe),We=Qe,Le.hasOwnProperty(qe.attr[e.Views.CommandRefNodeAttributes.scope])?Le[qe.attr[e.Views.CommandRefNodeAttributes.scope]][1]=Qe:Le[qe.attr[e.Views.CommandRefNodeAttributes.scope]]=[Qe,Qe])}for(var He in-1!==Ue&&(ne.viewCommands.commandRef[Ue].attr[e.Views.CommandRefNodeAttributes.isFirstCommand]=!0),-1!==We&&(ne.viewCommands.commandRef[We].attr[e.Views.CommandRefNodeAttributes.isLastCommand]=!0),Le)Le.hasOwnProperty(He)&&(ne.viewCommands.commandRef[Le[He][0]].attr[e.Views.CommandRefNodeAttributes.isFirstCommandOfScope]=!0,ne.viewCommands.commandRef[Le[He][1]].attr[e.Views.CommandRefNodeAttributes.isLastCommandOfScope]=!0);for(var Ye=0;Ye<ne.viewCommands.commandRef.length;Ye++){var ze=ne.viewCommands.commandRef[Ye],Ke=ze.attr[e.Views.CommandRefNodeAttributes.name_],$e={},Ge=new i(ze,$e);if(Ge.parentContext=oe,Ge.path=ze.nav.path,Ge.exchangeUtil=w,Ge.currentCollection=ie.currentCollection,Ge.currentObject=ie.currentObject,Ge.modelType=n.ViewCommand,Ge.modelTarget=Ke,Ge.view=s,r&&r.parameters&&r.parameters.hasOwnProperty("viewcommand")&&r.parameters.viewcommand.nts)for(var Ze in r.parameters.viewcommand.nts)r.parameters.viewcommand.nts.hasOwnProperty(Ze)&&($e.hasOwnProperty(Ze)||($e[Ze]=ko.observable(r.parameters.viewcommand.nts[Ze].value)));if(s.ParameterBindings)for(var Je=0;Je<s.ParameterBindings.Items.length;Je++){var Xe=s.ParameterBindings.Items[Je];if("ViewCommand"===Xe.Scope&&Xe.ScopeTarget===Ke){var et=m(r,ae?a:null,ae?ie.currentObject:null,ae?ie.exchangeUtil:null,s,{Prefix:Xe.Prefix,Input:Xe.Value,Value:Xe.Value},"String",S);et&&!$e.hasOwnProperty(Xe.Name)&&($e[Xe.Name]=ko.observable(et.Value))}}V&&b(V,Ge,E),ze.commandModel=$e}var tt=!0;if(l){if(l.hasOwnProperty("ClassId")&&l.hasOwnProperty("Items")){var nt=l;w.collectionItemCount(nt)>0&&(ne.viewResult.attr[e.Views.ViewResultNodeAttributes.empty]=!1,tt=!1,w.enumerateCollection(nt,(function(e,t){q(ne,r,a,U(o,s),s,e,w,G(k,"viewResult.item["+t.index+"]"),t.index,F||ne,E,V,oe,S)})))}else if(l.hasOwnProperty("ObjectId")&&l.hasOwnProperty("ExtraKey")){var rt=l;ne.viewResult.attr[e.Views.ViewResultNodeAttributes.empty]=!1,tt=!1,q(ne,r,a,U(o,s),s,rt,w,G(k,"viewResult.item[0]"),0,F||ne,E,V,oe,S)}for(var it=0,at=0;at<ne.viewCommands.commandRef.length;at++){var ot=ne.viewCommands.commandRef[at];"Object"!==ot.attr[e.Views.CommandRefNodeAttributes.scope]&&"Selection"!==ot.attr[e.Views.CommandRefNodeAttributes.scope]||ot.attr[e.Views.CommandRefNodeAttributes.visible]&&it++}ne.viewResult.attr[e.Views.ViewResultNodeAttributes.maxVisibleItemCommands]=it}for(var st=ne.viewFields.fieldRef,lt=0;lt<st.length;lt++)!0!==st[lt].attr.hideWhenEmpty||!1!==st[lt].attr.hasNonEmptyValues&&!tt||(st[lt].attr.visible=!1);var ut,ct=[],dt=[],ft=0,ht=_createForOfIteratorHelper(ne.viewFields.fieldRef);try{for(ht.s();!(ut=ht.n()).done;){var mt=ut.value,pt=mt.attr.inExpander?dt:ct;mt.attr.visible&&(mt.attr.columnIndex||0===mt.attr.columnIndex||(mt.attr.columnIndex=ft),ft++,pt[mt.attr.columnIndex]&&pt[mt.attr.columnIndex].length||(pt[mt.attr.columnIndex]=[]),pt[mt.attr.columnIndex].push(mt.attr.name))}}catch(e){ht.e(e)}finally{ht.f()}return re.rowGrid=ko.observableArray(ct.filter(Boolean)),re.expanderGrid=ko.observableArray(dt.filter(Boolean)),re.headerRowProps=[],re.headerRowGrid=ko.observable(re.rowGrid().map((function(t){var n=t.map((function(e){return ne.viewFields.fieldRef.find((function(t){return t.attr.name===e}))})),r=0,i=0;return n.forEach((function(t){t.attr.fieldHeaderType&&t.attr.fieldHeaderType!==e.Core.FieldHeaderType.Header+""||r++,t.attr.fieldHeaderType===e.Core.FieldHeaderType.Field+""&&i++})),re.headerRowProps.push({headerLabelCount:r,fieldLabelCount:i,totalLabelCount:r+i}),n}))),ne}R.Date={csEmptyDT:new Date(101,0,1,0,0,0,0),csEmptyDate:new Date(102,0,1,0,0,0,0),csBODate:new Date(200,0,1,0,0,0,0),csEODate:new Date(2999,11,31,0,0,0,0),csSQLBODate:new Date(1753,0,1,0,0,0,0)},t.SharedConstants=R,t.toISOStringUTC=function(e){if(e&&isNaN(e.getTime()))throw new Error("Invalid date");function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},t.isEmptyDate=N,t.timeToString=function(e){if(e&&isNaN(e.getTime()))throw new Error("Invalid date");return N(e)?"":("0"+e.getHours().toString()).substr(-2)+":"+("0"+e.getMinutes().toString()).substr(-2)},t.isNullOrVoid=function(e){return!e||!e.ObjectIds||0===e.ObjectIds.length},t.booleanInputValueFromFieldValue=M,t.getFieldRef=function(e,t){if(!t)return null;for(var n=0;n<e.Fields.Items.length;n++){var r=e.Fields.Items[n];if(r.Name===t)return r}return null},t.getFieldRefsByFieldPath=function(e,t){var n=[];if(!t)return n;t.indexOf(":")<0&&(t="field:"+t);for(var r=0;r<e.Fields.Items.length;r++){var i=e.Fields.Items[r];y(i.FieldPath,"field")===t&&n.push(i)}return n},t.getViewFromFieldRef=L,t.isSingleViewVersion=H,t.hasMultipleViewVersions=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.createViewDataModelWithObject=function(e,t,n,r,i,a,o,s){var l=T.None;return e&&(e.hasOwnProperty("ClassId")&&e.hasOwnProperty("Items")?l=T.List:e.hasOwnProperty("ObjectId")&&e.hasOwnProperty("ExtraKey")&&(l=T.Item)),te(l,r,i,n,n,e,t,null,null,null,-1,null,a,o,null,s)},t.createViewDataModel=function(t,n,r,i){var a=new e.Utilities.ExchangeUtil(t.data),o=T.None;t.data&&(t.data.hasOwnProperty("ClassId")&&t.data.hasOwnProperty("Items")?o=T.List:t.data.hasOwnProperty("ObjectId")&&t.data.hasOwnProperty("ExtraKey")&&(o=T.Item));var s=null;if(t.viewData&&t.viewId){var l=u(t.viewData,t.viewId);l&&(s=l.definition)}return te(o,t.viewData,t.itemScopedViewData,s,s,t.data,a,null,null,null,-1,null,n,r,null,i)},t.createEmptyViewDataModel=function(e,t){var r=Z(null,null,null,-1,null,e),a={},o=new i(r,a);return o.path=null,o.modelType=n.View,t&&b(t,o,e),r.model=a,r},t.listViewModelCreator=function(t,r){return function(i){var a;if(i.modelType===n.View&&!i.path&&t){i.setModelProperty(l.noResultsText,t.noDataText),i.setModelProperty(l.pagerPosition,t.pagerPosition),i.setModelProperty(l.noDataPolicy,t.noDataPolicy),i.setModelProperty(l.showPageSpan,t.showPageSpan),i.setModelProperty(l.selectable,t.selectable),i.setModelProperty(l.multiselect,t.multiselect);var o="";t.select&&("Select"===t.select.action?o="commands.select":"MultiSelect"===t.select.action?o="commands.multiselect":"Command"===t.select.action?o=t.select.commandName:"Navigate"===t.select.action&&e.Client.canNavigate(t.select.nav)&&(o="commands.select")),i.setModelProperty(l.selectCommand,o),i.setModelProperty(l.highlightable,t.highlightable),i.setModelPropertyIfUnset(l.commandsColumnCaption,t.commandsColumnCaption),i.setModelPropertyIfUnset(l.expanderOpenCaption,t.expanderOpenCaption),i.setModelPropertyIfUnset(l.expanderCloseCaption,t.expanderCloseCaption),i.setModelProperty(l.mainRowTemplate,null==r?void 0:r.mainRowTemplate,!1),i.setModelProperty(l.beforeRowTemplate,null==r?void 0:r.beforeRowTemplate,!1),i.setModelProperty(l.afterRowTemplate,null==r?void 0:r.afterRowTemplate,!1),i.setModelProperty(l.lastRowTemplate,null==r?void 0:r.lastRowTemplate,!1),i.setModelProperty(l.expanderRowTemplate,null==r?void 0:r.expanderRowTemplate,!1),(null==r?void 0:r.isLoading)&&i.setModelProperty(l.isLoading,null==r?void 0:r.isLoading,!1)}else i.modelType===n.Item&&t&&2===(null===(a=i.path)||void 0===a?void 0:a.split(".").length)&&(t.select&&"Command"===t.select.action&&t.select.commandName?(i.addComputedProperty(l.selectCommandEnabled,(function(n){var r=n;if(!ko.unwrap(r.itemModel.canSelect))return!1;var i=r.commands.commandRef();if(i)for(var a=0;a<i.length;a++){var o=i[a];if(o.attr[e.Views.CommandRefNodeAttributes.name_]===t.select.commandName)return ko.unwrap(o.attr[e.Views.CommandRefNodeAttributes.isEnabled])}return!1})),i.addComputedProperty(l.selectCommandNode,(function(n){var r=n.commands.commandRef();if(r)for(var i=0;i<r.length;i++){var a=r[i];if(a.attr[e.Views.CommandRefNodeAttributes.name_]===t.select.commandName)return a}return null}))):t.select&&("Select"===t.select.action||"MultiSelect"===t.select.action||"Navigate"===t.select.action&&e.Client.canNavigate(t.select.nav))?(i.addComputedProperty(l.selectCommandEnabled,(function(e){var t=e;return ko.unwrap(t.itemModel.canSelect)})),i.setModelProperty(l.selectCommandNode,null)):(i.setModelProperty(l.selectCommandEnabled,!1),i.setModelProperty(l.selectCommandNode,null)))}},t.itemViewModelCreator=function(e){return function(t){var r;t.modelType===n.View&&!t.path&&e&&(t.setModelProperty(s.noResultText,e.noDataText),t.setModelProperty(s.labelColumnWidth,null!==(r=e.labelColumnWidth)&&void 0!==r?r:100),t.setModelProperty(s.noDataPolicy,e.noDataPolicy))}},t.createEmptyListViewDataModel=function(e,t,n){var r=Z(null,null,null,-1,null,e),i={};return J(i,T.List),r.model=i,t&&(i[l.commandsColumnCaption](t.commandsColumnCaption),i[l.expanderOpenCaption](t.expanderOpenCaption),i[l.expanderCloseCaption](t.expanderCloseCaption),i[l.noResultsText](t.noDataText),i[l.pagerPosition](t.pagerPosition),i[l.noDataPolicy](t.noDataPolicy),i[l.showPageSpan](t.showPageSpan),i[l.selectable](t.selectable),i[l.multiselect](t.multiselect),i[l.singleselect](!1),i[l.highlightable](t.highlightable)),n&&(i[l.mainRowTemplate]=n.mainRowTemplate,i[l.beforeRowTemplate]=n.beforeRowTemplate,i[l.afterRowTemplate]=n.afterRowTemplate,i[l.lastRowTemplate]=n.lastRowTemplate,i[l.expanderRowTemplate]=n.expanderRowTemplate,n.isLoading&&(i[l.isLoading]=n.isLoading)),r},t.createEmptyItemViewDataModel=function(e,t){var n,r=Z(null,null,null,-1,null,e),i={};return J(i,T.Item),r.model=i,t&&(i[s.noResultText](t.noDataText),i[s.labelColumnWidth](null!==(n=t.labelColumnWidth)&&void 0!==n?n:100),i[s.noDataPolicy](t.noDataPolicy)),r},function(e){e[e.None=0]="None",e[e.Item=1]="Item",e[e.List=2]="List"}(T||(T={})),t.createViewDataModelForSubObject=function(t,n,r,i,a){var o=new e.Utilities.ExchangeUtil(t.data),s=o.getField(t.data,n);if(!s)throw new Error("Field '"+n+"' not found in data.");if(!s.Value)throw new Error("Field '"+n+"' has no value.");if("Object"!==s.Value.ValueType&&"Collection"!==s.Value.ValueType)throw new Error("Field '"+n+"' is not an object or collection field.");var l=s.Value.Value,u=e.Core.findView(t.viewData,t.viewId);if(!u)throw new Error("View '"+t.viewId.Uri+"' not found");var c=e.Core.getFieldRefsByFieldPath(u.definition,n);if(1!==c.length)throw new Error("View '"+t.viewId.Uri+"' does not contain one FieldRef for field path '"+n+"'.");var d=e.Core.getViewFromFieldRef(u.definition,c[0],t.viewData,r);if(!d)throw new Error("View for FieldRef '"+c[0].Name+"' not found.");return e.Core.createViewDataModelWithObject(l,o,d.definition,t.viewData,t.itemScopedViewData,i,a)},t.getItemFieldStringValue=function(t,n){var r=t.attr[e.Views.ItemFieldNodeAttributes.value],i=t.attr[e.Views.ItemFieldNodeAttributes.type_];if(n)return n(t);var a="";if("Date"===i)r&&(a=e.Core.constDateFromIsoDateString(r).value().format("L"));else if("Time"===i)r&&(a=8===t.attr[e.Views.ItemFieldNodeAttributes.length_]?e.Core.constDateFromIsoDateString(r).value().format("LTS"):e.Core.constDateFromIsoDateString(r).value().format("LT"));else if("DateTime"===i){if(r){var o=e.Core.constDateFromIsoDateString(r).value();a=o.format("L")+" ",8===t.attr[e.Views.ItemFieldNodeAttributes.timeLength]?a+=o.format("LTS"):a+=o.format("LT")}}else"string"==typeof r?a=r:r&&r.toString&&(a=r.toString());return a}}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(n){_inherits(i,n);var r=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=r.apply(this,arguments)).service=new t.ComponentRequestServiceProxy(e.componentActionRequest.bind(_assertThisInitialized(e)),_assertThisInitialized(e)),e.service2=e.service.notNull().handleError(),e}return _createClass(i,[{key:"serviceRequestUrl",get:function(){var t=e.Client.combinePath(this.requestInfo.siteRelativeUrl,"/_vti_bin/ChipSoft/ZP.svc/ComponentRequest");if(this.requestInfo.extraQuery)for(var n in this.requestInfo.extraQuery)this.requestInfo.extraQuery.hasOwnProperty(n)&&(t=e.Client.addQueryParameter(t,n,this.requestInfo.extraQuery[n],2));return t}},{key:"componentDownloadUrl",get:function(){var t=e.Client.combinePath(this.requestInfo.siteRelativeUrl,"/_layouts/15/ChipSoft/ComponentDownload.ashx");if(this.requestInfo.extraQuery)for(var n in this.requestInfo.extraQuery)this.requestInfo.extraQuery.hasOwnProperty(n)&&(t=e.Client.addQueryParameter(t,n,this.requestInfo.extraQuery[n],2));return t}},{key:"componentActionRequest",value:function(t,n,r,i){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function a(){return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.Client.componentActionRequest(this.requestInfo,this.serviceRequestUrl,t,n,r,i);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a,this)})))}}]),i}(t.ViewModelBase);t.ViewModel=n;var r=function(n){_inherits(i,n);var r=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=r.apply(this,arguments)).service=new t.ComponentRequestServiceProxy(e.componentActionRequest.bind(_assertThisInitialized(e)),_assertThisInitialized(e)),e}return _createClass(i,[{key:"serviceRequestUrl",get:function(){var t=e.Client.combinePath(this.requestInfo.siteRelativeUrl,"/_vti_bin/ChipSoft/ZPAdmin.svc/ComponentRequest");if(this.requestInfo.extraQuery)for(var n in this.requestInfo.extraQuery)this.requestInfo.extraQuery.hasOwnProperty(n)&&(t=e.Client.addQueryParameter(t,n,this.requestInfo.extraQuery[n],2));return t}},{key:"componentActionRequest",value:function(t,n,r,i){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function a(){return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.Client.componentActionRequest(this.requestInfo,this.serviceRequestUrl,t,n,r,i);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a,this)})))}}]),i}(t.ViewModelBase);t.AdministrationViewModel=r;var i=function(n){_inherits(i,n);var r=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=r.apply(this,arguments)).service=new t.ComponentRequestServiceProxy(e.componentActionRequest.bind(_assertThisInitialized(e)),_assertThisInitialized(e)),e}return _createClass(i,[{key:"serviceRequestUrl",get:function(){var t=e.Client.combinePath(this.requestInfo.siteRelativeUrl,"/_vti_bin/ChipSoft/ZPEdit.svc/ComponentRequest");if(this.requestInfo.extraQuery)for(var n in this.requestInfo.extraQuery)this.requestInfo.extraQuery.hasOwnProperty(n)&&(t=e.Client.addQueryParameter(t,n,this.requestInfo.extraQuery[n],2));return t}},{key:"componentActionRequest",value:function(t,n,r,i){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function a(){return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.Client.componentActionRequest(this.requestInfo,this.serviceRequestUrl,t,n,r,i);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a,this)})))}}]),i}(t.ViewModelBase);t.EditorViewModel=i;var a=function(n){_inherits(i,n);var r=_createSuper(i);function i(e){var n;return _classCallCheck(this,i),(n=r.call(this)).errorMessageVisible=ko.observable(!1),n.errorlist={error:ko.observableArray([])},n.isError=ko.observable(!1),n.hasInputFocus=ko.observable(!0),n.isNotError=ko.pureComputed((function(){return!n.isError()}),_assertThisInitialized(n)),n.service=new t.ComponentRequestServiceProxy(n.componentActionRequest.bind(_assertThisInitialized(n)),_assertThisInitialized(n)),e&&void 0!==e.authId&&(n.authId=e.authId),e&&void 0!==e.targetUri&&(n.targetUri=e.targetUri),n.hasInputFocus.extend({notify:"always"}),n.isLoading.subscribe((function(){n.isLoading()||n.hasInputFocus(!0)})),n}return _createClass(i,[{key:"serviceRequestUrl",get:function(){var t=e.Client.combinePath(this.requestInfo.siteRelativeUrl,"/_layouts/15/ChipSoft/ZP.svc/ComponentRequest");if(this.requestInfo.extraQuery)for(var n in this.requestInfo.extraQuery)this.requestInfo.extraQuery.hasOwnProperty(n)&&(t=e.Client.addQueryParameter(t,n,this.requestInfo.extraQuery[n],2));if(!this.authId)throw new Error("authId is not defined");return t=e.Client.addQueryParameter(t,"zpauth",this.authId,1)}},{key:"componentActionRequest",value:function(t,n,r,i){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark((function a(){return _regeneratorRuntime().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.Client.componentActionRequest(this.requestInfo,this.serviceRequestUrl,t,n,r,i);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a,this)})))}},{key:"handleSignIn",value:function(t){e.Client.signIn(t)}}]),i}(t.ViewModelBase);t.LoginViewModel=a;var o=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var r;return _classCallCheck(this,n),r=t.call(this),Object.assign(_assertThisInitialized(r),e),r}return _createClass(n)}(n);t.SettingViewModelBase=o}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=function(){function e(t){_classCallCheck(this,e),this._taskId=t.object.ObjectId,this._name=t.getValue("Naam"),this._description=t.getValue("Omschrijving"),this._canEditNow=t.getValue("MagNuWijzigen");var n="TaakObject.TaakDefinitieObject";this._taskDefinitionId=t.getObjectId(n),this._editUrls=t.getCollection(n+".WijzigUrls"),this._showUrls=t.getCollection(n+".InzageUrls"),this._executeUrls=t.getCollection(n+".UitvoerUrls"),this._overviewUrls=t.getCollection(n+".OverzichtUrls"),this._isConcept=t.getValue("Concept"),this._executionDateTime=t.getValue("Uitvoerdatumtijd"),this._resultObject=t.getObject("ResultaatObject"),this._resultObject&&(this._resultObjectId=this.resultObject.object.ObjectId)}return _createClass(e,[{key:"taskId",get:function(){return this._taskId}},{key:"taskDefinitionId",get:function(){return this._taskDefinitionId}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"canEditNow",get:function(){return this._canEditNow}},{key:"isConcept",get:function(){return this._isConcept}},{key:"executionDateTime",get:function(){return this._executionDateTime}},{key:"resultObject",get:function(){return this._resultObject}},{key:"resultObjectId",get:function(){return this._resultObjectId}},{key:"editUrls",get:function(){return this._editUrls}},{key:"showUrls",get:function(){return this._showUrls}},{key:"overviewUrls",get:function(){return this._overviewUrls}},{key:"executeUrls",get:function(){return this._executeUrls}}]),e}();e.ZPExecutedTask=t}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=function(){function e(t){_classCallCheck(this,e),this.exchangeObject=t,this._taskId=t.object.ObjectId,this._active=t.getValue("Actief"),this._nextExecutionDate=t.getValue("EerstvolgendeUitvoerdatum"),this._allowAntedate=t.getValue("MagAntedateren"),this._shouldRecordEventTime=t.getValue("TijdstipVragen"),this._scheduleTypeName=t.getValue("SchemaType"),this._profileContextClassId=t.getValue("Profiel.Context.ClassID"),this._profileContextObjectId=t.getObject("Profiel.ContextTarget").object.ObjectId,this._taskDefinitionId=t.getObjectId("TaakDefinitieObject")}return _createClass(e,[{key:"active",get:function(){return this._active}},{key:"nextExecutionDate",get:function(){return this._nextExecutionDate}},{key:"allowAntedate",get:function(){return this._allowAntedate}},{key:"scheduleTypeName",get:function(){return this._scheduleTypeName}},{key:"shouldRecordEventTime",get:function(){return this._shouldRecordEventTime}},{key:"taskId",get:function(){return this._taskId}},{key:"taskDefinitionId",get:function(){return this._taskDefinitionId}},{key:"profileContextObjectId",get:function(){return this._profileContextObjectId}},{key:"profileContextClassId",get:function(){return this._profileContextClassId}},{key:"conceptDuration",get:function(){return this.exchangeObject.getValue("TaakObject.ConceptDuur")}}]),e}();e.ZPTask=t}(e.Core||(e.Core={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(){function e(){_classCallCheck(this,e),this.handlers=[]}return _createClass(e,[{key:"on",value:function(e){this.handlers.push(e)}},{key:"off",value:function(e){this.handlers=this.handlers.filter((function(t){return t!==e}))}},{key:"trigger",value:function(e){this.handlers.slice(0).forEach((function(t){t(e)}))}}]),e}(),r=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"scrollDirIsUp",value:function(e){var t=e.originalEvent.deltaY<0,n=e.originalEvent.detail<0;return t||n}},{key:"checkMax",value:function(e,n){var r=t.parseInt10(n.toString().substring(0,e.length));return t.parseInt10(e)>r}},{key:"isNumberKey",value:function(e){return e<=57&&e>=48||e>=96&&e<=105}},{key:"isSeperatorKey",value:function(e){return-1!==jQuery.inArray(e,[194,188,190,220,221,110,111,109,189,9,32,13])}},{key:"isNavKey",value:function(e){return-1!==jQuery.inArray(e,[37,39])}},{key:"isUpDownKey",value:function(e){return-1!==jQuery.inArray(e,[38,40])}},{key:"isbackEvent",value:function(e,t){var n=e.which;return!!(e.shiftKey&&9===n||0===t.getSelection().start&&37===n)}},{key:"isForwardEvent",value:function(e,t){var n=e.which;return t.getSelection().start===t.val().length&&39===n}},{key:"isBetweenMinAndMax",value:function(e,t,n){var r=!0;return(t&&e.isBefore(t)||n&&e.isAfter(n))&&(r=!1),r}},{key:"date2IsoFormat",value:function(t){return e.Core.dateInputValueFromDate(e.ConstDate.toDate(t))}},{key:"isoDateString2Date",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.Core.dateTimeValueFromInputAsConstDate(t,null);return!r.isValid||!n&&r.value().isEmptyDate()?e.ConstDateHolder.invalid:r}},{key:"parseDateString",value:function(t,n){var r=/^\s*(\d+)[-,.\s:\\_/](\d+)[-,.\s:\\_/](\d+)\s*$/.exec(t);if(!r)return e.ConstDateHolder.invalid;for(var i=[r[1],r[2],r[3]],a=0,o=[["YYYY","MM","DD"],this.getLocaleDateFormatParts(n),["DD","MM","YYYY"],["MM","DD","YYYY"],["DD","MM","YY"],["MM","DD","YY"],["YY","MM","DD"]];a<o.length;a++){var s=o[a],l=this.parseDateStringFormat(i,s);if(l.isValid)return l}return e.ConstDateHolder.invalid}},{key:"getLocaleDateFormatParts",value:function(e){if(this.localDateFormatParts)return this.localDateFormatParts;var t,n=[],r=_createForOfIteratorHelper(e.shortDatePattern.split(e.dateSeparator));try{for(r.s();!(t=r.n()).done;){var i=t.value;if("yy"===i)n.push("YY");else if("yyyy"===i)n.push("YYYY");else if("MM"===i||"M"===i)n.push("MM");else{if("dd"!==i&&"d"!==i)throw new Error("Unsuported date part in locale ".concat(e.name," : ").concat(i));n.push("DD")}}}catch(e){r.e(e)}finally{r.f()}return this.localDateFormatParts=n}},{key:"parseDateStringFormat",value:function(t,n){var r=-1,i=-1,a=-1;if(t.length<n.length)return e.ConstDateHolder.invalid;for(var o=0;o<n.length;o++){var s=n[o],l=t[o];if("YYYY"===s){if(4!==l.length)return e.ConstDateHolder.invalid;var u=parseInt(l,10);if(isNaN(u)||u<0||u>9999)return e.ConstDateHolder.invalid;r=u}else if("YY"===s){if(2!==l.length)return e.ConstDateHolder.invalid;var c=parseInt(l,10);if(isNaN(c)||c<0||c>99)return e.ConstDateHolder.invalid;r=c>=69?c+2e3:c+1900}else if("MM"===s){if(2!==l.length)return e.ConstDateHolder.invalid;var d=parseInt(l,10);if(isNaN(d)||d<1||d>12)return e.ConstDateHolder.invalid;i=d-1}else if("DD"===s){if(2!==l.length)return e.ConstDateHolder.invalid;var f=parseInt(l,10);if(isNaN(f)||f<1||f>31)return e.ConstDateHolder.invalid;a=f}}return e.ConstDate.tryCreate(r,i,a)}},{key:"prePendZeros",value:function(e,t){if(e&&e.length<t){var n=t-e.length;e=Array(n+1).join("0")+e}return e}},{key:"makeYearDate",value:function(e,n,r){return n?this.prePendZeros(this.twoYearDigitsToFour(e,t.parseInt10(n))+"",r):n}},{key:"twoYearDigitsToFour",value:function(e,t){return isNaN(t)||t<0?0:t<100&&t>=0?t>e.getFullYear()-2e3?t+1900:t+2e3:t}},{key:"trimLeadingZeros",value:function(e){return e.replace(/^0*/,"")}}]),t}();r.escapeHtml=function(e){return jQuery("<div></div>").text(e).html()},r.parseInt10=function(e){return parseInt(e,10)};var i=function(){function t(i,a,o,s,l){var u=this;_classCallCheck(this,t),this.preventFocusSelect=!1,this.updateTriggeredFromClientField=!1,this.onValueUpdate=new n,this.locale=e.PageManager.locale,this.watchClientFieldChanges=function(){var e=document.getElementById(u.clientId);jQuery(e).on("change.clearDate",u.updateFromClientDate)},this.updateFromClientDate=function(){var e=jQuery("#"+u.clientId).val(),t=r.isoDateString2Date(e);e&&!u.updateTriggeredFromClientField?u.setDatepickerDate(t):u.updateTriggeredFromClientField||u.clearDate()},this.createDatepickerDom=function(){var e=u.locale.shortDatePattern,t=u.locale.dateSeparator,n=e.split(t),i="<span>"+r.escapeHtml(t)+"</span>",a="<input type='text' size='2' min='1' max='31' inputmode='numeric' maxlength='40' data-field='d' class='d' aria-label='dd' placeholder='dd' value='' autocomplete='off'>".replace(/dd/g,""+u.locale.datepickerPlaceholderDay),o="<input type='text' size='2' min='1' max='12' inputmode='numeric' maxlength='40' data-field='m' class='m' aria-label='mm' placeholder='mm' value='' autocomplete='off'>".replace(/mm/g,""+u.locale.datepickerPlaceholderMonth),s="<input type='text' size='4' min='1' max='9999' inputmode='numeric' maxlength='40' data-field='y' class='y' aria-label='yyyy' placeholder='yyyy' value='' autocomplete='off'>".replace(/yyyy/g,u.locale.datepickerPlaceholderYear),l={dd:a,d:a,MM:o,M:o,yy:s,yyyy:s},c=l[n[0]]&&l[n[1]]&&l[n[2]]?l[n[0]]+i+l[n[1]]+i+l[n[2]]:l.DD+i+l.MM+i+l.YYYY,d="<span class='"+r.escapeHtml(u.datepickerClasses)+"'><span class='input-container'>"+c+"<a class='clear-date' tabfocus='0'>&times;</a></span><input type='text' class='input-spacer' aria-hidden='true' disabled tabindex='-1'></span>",f=jQuery(d);return f.find(".input-container > input:first-child")[0].id=r.escapeHtml(u.clientId)+"_C",f},this.createBindings=function(){var e="";u.$datepicker.children(".input-container").children("input[type='text']").on("keydown wheel",(function(e){u.keyDownEvents(e)})).on("keyup",(function(e){u.keyUpEvents(e)})).on("input propertychange",(function(e){u.changeEvents(e)})).on("input",(function(e){u.inputEvents(e)})).on("blur",(function(e){u.blurEvents(e)})).on("focus",(function(e){u.focusEvents(e)})).on("dragenter",(function(t){e=jQuery(t.target).val(),$(t.target).val("")})).on("dragleave",(function(t){$(t.target).val(e),e=""}));u.$datepicker.on("click",".close-cal, .cs-cal-button",(function(e){e.stopPropagation();var t=u.$datepicker.find(".cal-container");jQuery(".cs-customDateInput .cal-container:visible").not(t).hide(),jQuery(".cs-set-time-container:visible").hide(),t.toggle(),jQuery(document).off("click.cs-datepicker"),t.is(":visible")&&jQuery(document).on("click.cs-datepicker",(function(e){0===jQuery(e.target).closest(u.$datepicker).length&&(jQuery(".cal-container").hide(),u.validateDatepicker(!0),jQuery(document).off("click.cs-datepicker"))}))})),u.$datepicker.find("a.clear-date").on("click keydown",(function(e){u.clearDateButtonHandler(e)}))},this.clearDate=function(){u.$datepicker.find("input[type='text']").each((function(e,t){jQuery(t).val("")})),u.validateDatepicker(!1)},this.datepickerClasses=l||"cs-customDateInput",this.clientId=i,this.now=e.ConstDate.fromDate(s),this.minDate=ko.unwrap(a)?ko.computed((function(){return r.isoDateString2Date(ko.unwrap(a),!0).value()})):ko.observable(r.isoDateString2Date("1-1-1",!0).value()),this.maxDate=ko.unwrap(o)?ko.computed((function(){return r.isoDateString2Date(ko.unwrap(o)).value()})):ko.observable(r.isoDateString2Date("9999-12-31").value()),this.$datepicker=this.createDatepickerDom();var c=jQuery("#"+this.clientId).val(),d=r.isoDateString2Date(c);this.setDatepickerDate(d),this.createBindings(),this.validateDatepicker(!0),this.watchClientFieldChanges()}return _createClass(t,[{key:"setOutputField",value:function(e){var t=this;clearTimeout(this.timeout),this.updateTriggeredFromClientField=!0,jQuery("input#"+this.clientId).val(e).trigger("change"),this.timeout=setTimeout((function(){t.updateTriggeredFromClientField=!1}),0)}},{key:"clearDateButtonHandler",value:function(e){if("click"===e.type){this.clearDate(),this.$datepicker.find("input[type='text']").first().focus();var t=this.getDatepickerDate();if(t.isValid){var n=r.date2IsoFormat(t.value());this.setOutputField(n)}else this.setOutputField("");this.validateDatepicker()}else 8===e.which&&e.preventDefault()}},{key:"keyDownEvents",value:function(e){var t=e.which,n=jQuery(e.target),i=n.val(),a=r.parseInt10(n.attr("min")),o=r.parseInt10(n.attr("max")),s=!1;if(9===t||e.shiftKey&&9===t);else if(r.isbackEvent(e,n))e.preventDefault(),n.prev().prev().focus();else if(13===t&&0===n.next().next("input").length)"y"===n.data("field")&&n.val(r.makeYearDate(this.now,i,r.parseInt10(n.attr("size")))),s=!0,e.preventDefault(),n.next().next("input").focus();else if(r.isSeperatorKey(t)&&""!==n.val())e.preventDefault(),n.next().next("input").focus();else if(r.isForwardEvent(e,n))e.preventDefault(),n.next().next("input").focus();else if(r.isUpDownKey(t)||"wheel"===e.type){if(this.$datepicker.children(".input-container").children("input[type='text']").is(":focus")){e.preventDefault();var l=r.parseInt10(i),u=l&&l>=a?l:a-1;u=r.scrollDirIsUp(e)||38===t?u+1:u-1,(u=!i&&n.is("[data-field=y]")?this.now.getFullYear():u)<a?u=o:u>o&&(u=a);var c=r.parseInt10(n.attr("size")),d=r.prePendZeros(u.toString(),c);n.val(d),n.select()}}else 8===t&&0===n.getSelection().start&&n.prev().prev("input").length&&0===n.getSelection().end?(this.preventFocusSelect=!0,n.prev().prev("input").focus(),n.prev().prev("input").setSelection(n.prev().prev("input").val().length)):46===t&&n.getSelection().start===i.length&&n.next().next("input").length>0&&(this.preventFocusSelect=!0,n.next().next("input").focus(),n.next().next("input").setSelection(0));var f=this.getValidatedDatePicker(s);if(f.isValid){var h=r.date2IsoFormat(f.value());this.onValueUpdate.trigger({value:h})}else this.onValueUpdate.trigger({value:"Invalid date",preventRedraw:!0})}},{key:"keyUpEvents",value:function(e){var t=e.which,n=jQuery(e.target),i=n.val(),a=r.parseInt10(n.attr("min")),o=r.parseInt10(n.attr("max"));r.isNumberKey(t)&&i.length>=parseInt(n.attr("size"),10)&&n.getSelection().start>0?(n.next().next("input").focus(),r.parseInt10(i)<a?n.val(a):r.parseInt10(i)>o&&n.val(o)):r.parseInt10(i)>o?n.val(o):r.isNumberKey(t)&&8!==t&&r.checkMax(i,o)&&0!==n.getSelection().start&&!r.isNavKey(t)?n.next().next("input").focus():(!r.isNumberKey(t)||e.shiftKey&&r.isNumberKey(t))&&e.preventDefault();var s=this.getValidatedDatePicker();if(s.isValid){var l=r.date2IsoFormat(s.value());this.onValueUpdate.trigger({value:l})}}},{key:"inputEvents",value:function(e){var t=jQuery(e.target),n=t.val(),i=r.parseInt10(t.attr("max"));if(r.parseInt10(n)>i){for(var a=n,o=5;r.parseInt10(a)>i;)o-=1,a=a.substr(0,o);var s=t.getSelection();t.val(r.trimLeadingZeros(n.substr(0,o))),t.setSelection(s.end),t.next().next("input")[0]&&(this.preventFocusSelect=!0,t.next().next("input").focus().val(r.trimLeadingZeros(n.substr(o))),t.next().next("input").trigger("input"))}}},{key:"changeEvents",value:function(e){var t=jQuery(e.target),n=t.val(),i=/([^0-9])/g;if(n.length>4){var a=r.parseDateString(n,this.locale);a.isValid?(this.setDatepickerDate(a),this.preventFocusSelect=!0,this.$datepicker.find(".input-container").children("input").last().focus().setSelection(4)):(n=r.trimLeadingZeros(n.replace(i,"")),t.val(n))}else(n=n.replace(i,"")).length>r.parseInt10(t.attr("size"))&&(n=r.trimLeadingZeros(n)),t.val(n);var o=this.getValidatedDatePicker();if(o.isValid){var s=r.date2IsoFormat(o.value());this.onValueUpdate.trigger({value:s})}}},{key:"focusEvents",value:function(e){var t=this,n=jQuery(e.target);this.$datepicker.children(".input-container").addClass("focused"),this.preventFocusSelect?this.preventFocusSelect=!1:(this.preventFocusSelect=!0,window.setTimeout((function(){n.setSelection(0,n.val().length),t.preventFocusSelect=!1}),0))}},{key:"blurEvents",value:function(e){var t=jQuery(e.target),n=!0;this.$datepicker.children(".input-container").removeClass("focused");var i=t.val(),a=r.parseInt10(t.attr("size"));"y"===t.data("field")?(t.val(r.makeYearDate(this.now,i,a)),n=!1):t.val(r.prePendZeros(i,a));var o=!0,s=jQuery(e.relatedTarget);s.is("input[data-field]")&&s.parent()===t.parent()&&(o=!1);var l=this.getValidatedDatePicker(o);if(l.isValid){var u=r.date2IsoFormat(l.value());this.onValueUpdate.trigger({value:u,preventRedraw:n})}}},{key:"getDatepickerValues",value:function(){var e={d:null,m:null,y:null};return e.y=r.parseInt10(this.$datepicker.find("input[data-field='y']").val()),e.m=r.parseInt10(this.$datepicker.find("input[data-field='m']").val()),e.d=r.parseInt10(this.$datepicker.find("input[data-field='d']").val()),e}},{key:"getDatepickerDate",value:function(){var t=this.getDatepickerValues();return e.ConstDate.tryCreate(r.twoYearDigitsToFour(this.now,t.y),t.m-1,t.d)}},{key:"setDatepickerDate",value:function(t){var n=null;t instanceof e.ConstDateHolder&&t.isValid&&(n=t.value()),n&&(this.$datepicker.find("input[data-field='y']").val(r.prePendZeros(n.getFullYear().toString(),4)),this.$datepicker.find("input[data-field='m']").val(r.prePendZeros((n.getMonth()+1).toString(),2)),this.$datepicker.find("input[data-field='d']").val(r.prePendZeros(n.getDate().toString(),2)))}},{key:"getValidatedDatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getDatepickerDate(),i=this.getDatepickerValues(),a=jQuery("#"+this.clientId),o=!1,s=!i.y&&!i.m&&!i.d,l=!i.y||!i.m||!i.d;return n.isValid&&r.isBetweenMinAndMax(n.value(),this.minDate(),this.maxDate())&&!l?(this.$datepicker.removeClass("invalid"),t&&this.updateClientField(n.value()),o=!0):n.isValid&&!l?(this.$datepicker.addClass("invalid"),t&&this.updateClientField(n.value()),o=!0):!a.prop("required")&&s?(this.$datepicker.removeClass("invalid"),t&&this.updateClientField(null)):(a.prop("required"),this.$datepicker.addClass("invalid"),t&&this.updateClientField(null)),new e.ConstDateHolder(o,n.isValid?n.value():null)}},{key:"validateDatepicker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getValidatedDatePicker(e).isValid}},{key:"updateClientField",value:function(e){var t=e?r.date2IsoFormat(e):"";this.setOutputField(t)}}]),t}(),a=function(t){_inherits(i,t);var n=_createSuper(i);function i(t,a,o,s){var l;_classCallCheck(this,i),(l=n.call(this,t,a,o,s,"cs-customDateInput hasCalendar")).createCalendarDom=function(){return l.$datepicker.find("span.input-container").after(jQuery("<a class='cs-cal-button cs-icon-calendar'></a><div class='cal-container arrow-box'>                <div class='header'><span class='monthyear'><i class='icon month-left cs-icon-caret-left'></i><span class='month'></span><i class='icon month-right cs-icon-caret-right'></i>                    <i class='icon year-left cs-icon-caret-left'></i><span class='year'></span><i class='icon year-right cs-icon-caret-right'></i></span>                </div>                <div class='week names'></div>                <div class='week days'></div>                <div class='close-cal'>                  <a>sluiten</a>                </div>              </div>")),l.$datepicker},l.initCalendar=function(e){l.updateSelectedDate(e),l.redrawCalendar()},l.bindEvents=function(){l.$datepicker.find(".month-left").on("mousedown click mouseleave mouseup keydown",(function(e){"mousedown"===e.type?(l.prevM(),l.setAcceleratedInterval(500,75,100,l.prevM)):window.clearTimeout(l.changeInterval)})),l.$datepicker.find(".month-right").on("mousedown click mouseleave mouseup keydown",(function(e){"mousedown"===e.type?(l.nextM(),l.setAcceleratedInterval(500,75,100,l.nextM)):window.clearTimeout(l.changeInterval)})),l.$datepicker.find(".year-left").on("mousedown click mouseleave mouseup keydown",(function(e){"mousedown"===e.type?(l.prevY(),l.setAcceleratedInterval(500,100,25,l.prevY)):window.clearTimeout(l.changeInterval)})),l.$datepicker.find(".year-right").on("mousedown click mouseleave mouseup keydown",(function(e){"mousedown"===e.type?(l.nextY(),l.setAcceleratedInterval(500,100,25,l.nextY)):window.clearTimeout(l.changeInterval)})),l.$datepicker.find(".monthyear .year, .year-left, .year-right").on("DOMMouseScroll mousewheel",(function(e){e.preventDefault(),r.scrollDirIsUp(e)?l.nextY():l.prevY()})),l.$datepicker.find(".monthyear .month, .month-left, .month-right").on("DOMMouseScroll mousewheel",(function(e){e.preventDefault(),r.scrollDirIsUp(e)?l.nextM():l.prevM()})),l.$datepicker.find(".week.days").on("DOMMouseScroll mousewheel",(function(e){e.preventDefault(),r.scrollDirIsUp(e)?l.nextD():l.prevD()}))},l.nextY=function(){var e=l.month.withoutTime();if(!l.maxDate()||!l.minDate()||e.getFullYear()<l.maxDate().getFullYear()&&e.getFullYear()>=l.minDate().getFullYear())l.month=l.month.addYears(1),e=l.firstDayOfWeek(e.addYears(1).withDate(1)),l.buildMonth(e,l.month),l.redrawCalendar();else{var t=l.minDate();t=t.withMonth(e.getMonth()),l.month=t,t=l.firstDayOfWeek(t.withDate(1)),l.buildMonth(t,l.month),l.redrawCalendar()}},l.prevY=function(){var e=l.month.withoutTime();if(!l.minDate()||!l.minDate()||e.getFullYear()>l.minDate().getFullYear()&&e.getFullYear()<=l.maxDate().getFullYear())l.month=l.month.addYears(-1),e=l.firstDayOfWeek(e.addYears(-1).withDate(1)),l.buildMonth(e,l.month),l.redrawCalendar();else{var t=l.maxDate();t=t.withMonth(e.getMonth()),l.month=t,t=l.firstDayOfWeek(t.withDate(1)),l.buildMonth(t,l.month),l.redrawCalendar()}},l.nextM=function(){var e=l.month.withoutTime();e=l.firstDayOfWeek(e.addMonths(1).withDate(1)),l.month=l.month.addMonths(1),l.buildMonth(e,l.month),l.redrawCalendar()},l.prevM=function(){var e=l.month.withoutTime();e=l.firstDayOfWeek(e.addMonths(-1).withDate(1)),l.month=l.month.addMonths(-1),l.buildMonth(e,l.month),l.redrawCalendar()},l.nextD=function(){var e=l.month.withoutTime();e=l.firstDayOfWeek(e.addDays(1).withDate(1)),l.month=l.month.addDays(1),l.selected=l.month.withoutTime(),l.setDatepickerDate(l.month),l.buildMonth(e,l.month),l.redrawCalendar(),l.validateDatepicker()},l.prevD=function(){var e=l.month.withoutTime();e=l.firstDayOfWeek(e.addDays(-1).withDate(1)),l.month=l.month.addDays(-1),l.selected=l.month.withoutTime(),l.setDatepickerDate(l.month),l.buildMonth(e,l.month),l.redrawCalendar(),l.validateDatepicker()},l.buildMonth=function(e,t){l.weeks=[];for(var n=!1,r=e,i=r.getMonth(),a=0;!n;)l.weeks.push({days:l.buildWeek(r,t)}),r=r.addDays(7),n=a>2&&i!==r.getMonth(),a++,i=r.getMonth()},l.buildWeek=function(e,t){for(var n=[],r=0;r<7;r++)n.push({name:e.format("dd").toLowerCase(),daynumber:e.getDate(),isCurrentMonth:e.getMonth()===t.getMonth(),isToday:e.isSameDay(l.now),date:e}),e=e.addDays(1);return n},l.updateSelectedDate=function(e){if("Invalid date"===e)l.selected=l.today,l.month=l.selected;else if(e){var t=r.isoDateString2Date(e);t.isValid?(l.selected=t.value().withoutTime(),l.month=l.selected):(l.selected=l.today,l.month=l.selected)}else l.selected=null,l.month=l.today;var n=l.month.withDate(1),i=l.firstDayOfWeek(n);l.buildMonth(i,l.month)},l.redrawCalendar=function(){var e=l.$datepicker.find(".cal-container"),t=e.children(".week.names"),n=e.children(".week.days"),i=e.find("span.month"),a=e.find("span.year");n.off("click press","span");var o="";l.weeks[0].days.forEach((function(e){var t="<span class='name'>"+r.escapeHtml(e.name)+"</span>";o+=t}));var s=jQuery(o),u=[];l.weeks.forEach((function(e){e.days.forEach((function(e){var t="<span class='"+("day "+(l.selected&&e.date.isSameDay(l.selected)?"selected ":"")+(e.isToday?"isToday ":"")+(r.isBetweenMinAndMax(e.date,l.minDate(),l.maxDate())?"":"isInvalid ")+(e.isCurrentMonth?"":"isDifferentMonth "))+"' data-date='"+e.date.toIso()+"'>"+r.escapeHtml(e.daynumber)+"</span>",n=jQuery(t);u.push(n)}))})),t.empty().append(s),n.empty().append(u),i.text(l.month.format("MMMM")),a.text(l.month.format("YYYY")),n.on("click press","span",l.selectDay)},l.selectDay=function(t){var n=jQuery(t.target);jQuery(".day.selected").removeClass("selected"),n.addClass("selected");var i=n.data("date"),a=e.Core.dateFromIsoDateString(i);(l.updateSelectedDate(r.date2IsoFormat(a)),l.setDatepickerDate(e.ConstDate.tryCreate(a)),l.validateDatepicker(!0))&&l.$datepicker.find(".cal-container").hide()},l.updateCalendar=function(e,t){l.updateSelectedDate(e),t||l.redrawCalendar()},l.today=l.now.withoutTime(),l.$datepicker=l.createCalendarDom();var u=jQuery("#"+l.clientId).val();return l.initCalendar(u),l.bindEvents(),l.onValueUpdate.on((function(e){l.updateCalendar(e.value,e.preventRedraw)})),ko.isSubscribable(a)&&l.minDate.subscribe((function(){l.validateDatepicker(!0),l.redrawCalendar()})),ko.isSubscribable(o)&&l.maxDate.subscribe((function(){l.validateDatepicker(!0),l.redrawCalendar()})),l}return _createClass(i,[{key:"setAcceleratedInterval",value:function(e,t,n,r){var i=this;e=e>n?e-t:n,this.changeInterval=window.setTimeout((function(){window.clearTimeout(i.changeInterval),r(),i.setAcceleratedInterval(e,t,n,r)}),e)}},{key:"firstDayOfWeek",value:function(e){for(var t=this.locale.firstDayOfWeek;e.getDay()!==t;)e=e.addDays(-1);return e.withoutTime()}},{key:"clearDateButtonHandler",value:function(e){_get(_getPrototypeOf(i.prototype),"clearDateButtonHandler",this).call(this,e),this.onValueUpdate.trigger({value:null})}}]),i}(i);t.datepicker=function(e,t){var n,r,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;n=o||"9999-12-31",r=s||"0001-01-01";var l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?new a(e,r,n,t):new i(e,r,n,t,null),u=jQuery("#"+e);u.before(l.$datepicker),u.hide()}}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(t){var n=function(){function t(n,r){var i=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:15,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Number.MIN_SAFE_INTEGER,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_SAFE_INTEGER,d=arguments.length>8?arguments[8]:void 0,f=arguments.length>9?arguments[9]:void 0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,m=arguments.length>11&&void 0!==arguments[11]&&arguments[11],p=arguments.length>12&&void 0!==arguments[12]&&arguments[12];if(_classCallCheck(this,t),this.fieldId=n,this.decAllowed=a,this.negAllowed=o,this.minDecLength=s,this.maxDecLength=l,this.minVal=u,this.maxVal=c,this.required=d,this.sepReplacer=f,this.updateOnBlur=m,this.updateAfterDelay=p,this.allowedDecSeperators="[\\.,]",this.selectionCache={start:0,end:0},this.intFieldClass="cs-numeric-integer-box",this.decFieldClass="cs-numeric-decimal-box",this.inputFieldClass="cs-numeric-input-box",this.intFieldEl=$("#"+this.fieldId+" ."+this.intFieldClass),this.decFieldEl=$("#"+this.fieldId+" ."+this.decFieldClass),!this.intFieldEl.length||this.decAllowed&&!this.decFieldEl.length)e.PageManager.logError("cs-numberfield - required clientfields are missing (fieldId: "+this.fieldId+")");else{$("#"+this.fieldId).children().hide(),this.fieldEl=this.addInputField(),this.sepReplacer=this.sepReplacer?this.sepReplacer:.1.toLocaleString()[1],this.required=void 0!==this.required?this.required:this.intFieldEl.is("[required]"),ko.isObservable(h)&&(h.subscribe((function(e){i.fieldEl.attr("placeholder",e)})),h=h());var v,g="string"==typeof h;"number"==typeof h&&(g=!0,h=h.toString(10)),this.decAllowed&&this.decFieldEl.length&&this.intFieldEl.length?(this.patternRegExp=new RegExp("^(-?)(\\d*)("+this.allowedDecSeperators+")?(\\d*)$"),g||this.fieldEl.attr("placeholder","0"+this.sepReplacer+"0")):!this.decAllowed&&this.intFieldEl.length&&(this.patternRegExp=new RegExp("^(-?)(\\d*)$"),g||this.fieldEl.attr("placeholder","0")),g&&this.fieldEl.attr("placeholder",h),ko.isObservable(r)?(v=r(),this.initValueSubscription=r.subscribe((function(){i.validateInput()}))):v=r,this.value=null!==r&&void 0!==v?""+v:this.getValueFromClientFields(),this.fieldEl.val(this.value),this.sanitizeInput(!0),this.lastValidVal=this.value,this.addValidators(),this.initBinding()}}return _createClass(t,[{key:"numericValue",get:function(){var e=new RegExp(this.allowedDecSeperators);return parseFloat(this.value.replace(e,"."))}},{key:"getValueFromClientFields",value:function(){return this.decFieldEl.length&&this.intFieldEl.length?this.intFieldEl.val()+(this.decFieldEl.val()?""+this.sepReplacer+this.decFieldEl.val():""):this.intFieldEl.length?""+this.intFieldEl.val():void 0}},{key:"addInputField",value:function(){var e=jQuery('<input type="text" class="'.concat(this.inputFieldClass,'" ').concat(this.required?"required":""," />"));return jQuery("#"+this.fieldId).append(e),e}},{key:"initBinding",value:function(){var e=this;this.fieldEl.on("keydown paste",(function(t){e.selectionCache=e.fieldEl.focus().getSelection()})),this.fieldEl.on("change input",(function(t){e.sanitizeInput()})),this.fieldEl.on("blur",(function(t){e.updateOnBlur&&e.updateFields(),e.validateInput()}))}},{key:"sanitizeInput",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(""+this.fieldEl.val()).match(this.patternRegExp);r?(this.value=r[0],""===r[2]&&r[3]&&(r[2]="0"),r[3]&&r[3]!==this.sepReplacer&&(this.value=this.value.replace(new RegExp(this.allowedDecSeperators),this.sepReplacer),r[3]=this.sepReplacer,this.fieldEl.val(this.value),this.fieldEl.setSelection(this.selectionCache.start+1,this.selectionCache.start+1)),r[2]&&r[3]&&!r[4]&&(r[4]="0"),this.intVal=r[1]+r[2],this.decVal=r[4],this.lastValidVal=this.value):(n&&e.PageManager.logError("cs-numberfield - initial value was not a valid number (fieldId: "+this.fieldId+")"),this.value=this.lastValidVal,this.fieldEl.val(this.lastValidVal),this.fieldEl.setSelection(this.selectionCache.start,this.selectionCache.end)),clearTimeout(this.updateTimeout),this.updateOnBlur||this.updateFields(),this.updateAfterDelay&&(this.updateTimeout=setTimeout((function(){t.updateFields()}),1e3))}},{key:"updateFields",value:function(){this.intFieldEl.val(this.intVal).trigger("change"),this.decFieldEl.val(this.decVal).trigger("change")}},{key:"validateInput",value:function(){var t=this.getValueFromClientFields().match(this.patternRegExp);if(t&&""===t[0]&&!this.required)this.setFieldValidity(!0,"");else if(t){this.value=t[0],this.fieldEl.val(this.value);var n,r="",i=!0,a=_createForOfIteratorHelper(this.fieldValidationRules);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.rule(t)||(r+="".concat(r?", \n":" ").concat(o.validationMessage),i=!1)}}catch(e){a.e(e)}finally{a.f()}this.setFieldValidity(i,r)}else this.setFieldValidity(!1),e.PageManager.logError("cs-numberfield - clientfields altered (fieldId: "+this.fieldId+")")}},{key:"addValidators",value:function(){var e=this;this.fieldValidationRules=[];this.addValidationRule((function(t){return t&&e.numericValue>=e.minVal}),"moet minimaal ".concat(this.minVal," zijn"));if(this.addValidationRule((function(t){return t&&e.numericValue<=e.maxVal}),"mag maximaal ".concat(this.maxVal," zijn")),!this.negAllowed){this.addValidationRule((function(e){return!("-"===e[1])}),"mag niet negatief zijn")}if(!this.decAllowed||this.maxDecLength<=0){this.addValidationRule((function(e){return!(e&&"."===e[3])}),"mag geen decimalen bevatten")}if(this.decAllowed&&this.minDecLength>0){this.addValidationRule((function(t){return!(t&&t[4].length<e.minDecLength)}),"moet minimaal ".concat(this.minDecLength," decimalen bevatten"))}if(this.decAllowed&&this.maxDecLength>0){this.addValidationRule((function(t){return!(t&&t[4].length>e.maxDecLength)}),"mag maximaal ".concat(this.maxDecLength," decimalen bevatten"))}}},{key:"addValidationRule",value:function(e,t){this.fieldValidationRules.push({rule:e,validationMessage:t})}},{key:"setFieldValidity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unspecified error";e?(this.fieldEl[0].setCustomValidity(""),this.fieldEl.removeClass("cs-error")):(this.fieldEl[0].setCustomValidity(t),this.fieldEl.addClass("cs-error"))}},{key:"dispose",value:function(){this.initValueSubscription&&this.initValueSubscription.dispose()}}]),t}();t.numberfield=function(e,t,r,i,a,o,s,l,u,c,d){return new n(e,t,r,i,a,o,s,l,u,c,d,arguments.length>11&&void 0!==arguments[11]&&arguments[11],arguments.length>12&&void 0!==arguments[12]&&arguments[12])}}(e.Client||(e.Client={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})),function(e){!function(e){var t=_createClass((function e(){_classCallCheck(this,e),this.parent=null,this.propertyName=null,this.index=-1,this.path=null,this.rootNode=null,this.viewNode=null,this.viewModel=null}));e.ViewNodeNavigation=t;var n=_createClass((function e(){_classCallCheck(this,e)}));n.name_="name",n.visible="visible",n.type_="type",n.fieldType="fieldType",n.hasNonEmptyValues="hasNonEmptyValues",e.FieldRefNodeAttributes=n;var r=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t,this.fieldModel=null}));e.FieldRefNode=r;var i=_createClass((function e(){_classCallCheck(this,e)}));i.name_="name",i.scope="scope",i.isEnabled="isEnabled",i.visible="visible",i.hideWhenDisabled="hideWhenDisabled",i.isFirstCommand="isFirstCommand",i.isLastCommand="isLastCommand",i.isFirstCommandOfScope="isFirstCommandOfScope",i.isLastCommandOfScope="isLastCommandOfScope",i.displayName="displayName",i.confirmationMessage="confirmationMessage",i.linkTarget="linkTarget",i.imageUrl="imageUrl",i.pageUrl="pageUrl",i.objectParameter="objectParameter",i.disabledImageUrl="disabledImageUrl",i.displayTemplate="displayTemplate",i.utilityCssClass="utilityCssClass",i.commandCssClass="commandCssClass",i.disabledCommandCssClass="disabledCommandCssClass",i.targetPage="targetPage",i.isEmptyTargetPage="isEmptyTargetPage",e.CommandRefNodeAttributes=i;var a=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t,this.itemCommandModel=null}));e.ItemCommandNode=a;var o=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t,this.commandModel=null}));e.CommandRefNode=o;var s=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t,this.fieldRef=[]}));e.ViewFieldsNode=s;var l=_createClass((function e(){_classCallCheck(this,e)}));l.name_="name",l.value="value",l.inputValue="inputValue",l.inputTemplate="inputTemplate",l.inputAction="inputAction",l.inputInitialValueField="inputInitialValueField",l.selectionDisplayValueField="selectionDisplayValueField",l.editable="editable",l.fieldPath="fieldPath",l.required="required",l.rtfToHtml="rtfToHtml",l.cdfToHtml="rtfToHtml",l.dateInputValue="dateInputValue",l.timeInputValue="timeInputValue",l.integerInputValue="integerInputValue",l.decimalInputValue="decimalInputValue",l.visible="visible",l.type_="type",l.valueIsEmpty="valueIsEmpty",l.fieldType="fieldType",l.fieldTypeOverride="fieldTypeOverride",l.length_="length",l.timeLength="timeLength",l.isValid="isValid",l.validationMessage="validationMessage",l.filter="filter",e.ItemFieldNodeAttributes=l;var u=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t,this.itemFieldModel=null}));e.ItemFieldNode=u;var c=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t}));e.ItemFieldsNode=c;var d=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t,this.commandRef=ko.observableArray([])}));e.ItemCommandsNode=d;var f=_createClass((function e(){_classCallCheck(this,e)}));f.validationMessage="validationMessage",f.isValid="isValid",f.hasNonValidViewFields="hasNonValidViewFields",e.ViewResultItemNodeAttributes=f;var h=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t,this.fields=new c,this.commands=new d,this.itemModel=null}));e.ViewResultItemNode=h;var m=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(h);e.ViewResultItemNodeWithPrecompilerContext=m;var p=_createClass((function e(){_classCallCheck(this,e)}));p.maxVisibleItemCommands="maxVisibleItemCommands",p.empty="empty",e.ViewResultNodeAttributes=p;var v=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t,this.item=[]}));e.ViewResultNode=v;var g=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(h);e.ViewResultNodeWithPrecompilerContexts=g;var C=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t,this.commandRef=[]}));e.ViewCommandsNode=C;var w=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t}));e.ViewBehaviorNode=w;var y=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t}));e.ViewBehaviorsNode=y;var b=_createClass((function e(){_classCallCheck(this,e)}));b.selectionDisplayValueField="selectionDisplayValueField",e.ViewNodeAttributes=b;var D=_createClass((function e(){_classCallCheck(this,e),this.attr={},this.nav=new t,this.viewBehaviors=new y,this.viewFields=new s,this.viewResult=new v,this.viewCommands=new C,this.model=null}));e.ViewNode=D}(e.Views||(e.Views={}))}((ChipSoft=window.ChipSoft)||(ChipSoft=window.ChipSoft={})); }chipsoft_core_mds();